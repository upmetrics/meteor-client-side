(function(){var exports,_;(function(){exports={}}).call(this);(function(){(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.5.2";var _isArguments=function(obj){return toString.call(obj)==="[object Arguments]"};if(!_isArguments(arguments)){_isArguments=function(obj){return!!(obj&&hasOwnProperty.call(obj,"callee")&&typeof obj.callee==="function")}}var looksLikeArray=function(obj){return obj.length===+obj.length&&(_isArguments(obj)||obj.constructor!==Object)};var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(looksLikeArray(obj)){for(var i=0,length=obj.length;i<length;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}}else{var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))});return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(!looksLikeArray(obj)){var keys=_.keys(obj);length=keys.length}each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true}else{memo=iterator.call(context,memo,obj[index],index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results.push(value)});return results};_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)};_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker});return!!result};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target})};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};_.where=function(obj,attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return _[first?"find":"filter"](obj,function(value){for(var key in attrs){if(attrs[key]!==value[key])return false}return true})};_.findWhere=function(obj,attrs){return _.where(obj,attrs,true)};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity,value:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity,value:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})});return result.value};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value});return shuffled};_.sample=function(obj,n,guard){if(arguments.length<2||guard){return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,value,context){var result={};var iterator=value==null?_.identity:lookupIterator(value);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)});return result}};_.groupBy=group(function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)});_.indexBy=group(function(result,key,value){result[key]=value});_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1});_.sortedIndex=function(array,obj,iterator,context){iterator=iterator==null?_.identity:lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(looksLikeArray(obj))return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return looksLikeArray(obj)?obj.length:_.keys(obj).length};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;return n==null||guard?array[0]:slice.call(array,0,n)};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard){return array[array.length-1]}else{return slice.call(array,Math.max(array.length-n,0))}};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){if(shallow&&_.every(input,_.isArray)){return concat.apply(output,input)}each(input,function(value){if(_.isArray(value)||_.isArguments(value)){shallow?push.apply(output,value):flatten(value,shallow,output)}else{output.push(value)}});return output};_.flatten=function(array,shallow){return flatten(array,shallow,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false}var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value)){seen.push(value);results.push(array[index])}});return results};_.union=function(){return _.uniq(_.flatten(arguments,true))};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){var length=_.max(_.pluck(arguments,"length").concat(0));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(arguments,""+i)}return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,length=list.length;i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,length=array.length;if(isSorted){if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,length+isSorted):isSorted}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<length;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item)}var i=hasIndex?from:array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var length=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(length);while(idx<length){range[idx++]=start;start+=step}return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}};_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)throw new Error("bindAll must be passed function names");each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;options||(options={});var later=function(){previous=options.leading===false?0:new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this;args=arguments;timestamp=new Date;var later=function(){var last=new Date-timestamp;if(last<wait){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate)result=func.apply(context,args)}};var callNow=immediate&&!timeout;if(!timeout){timeout=setTimeout(later,wait)}if(callNow)result=func.apply(context,args);return result}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo}};_.wrap=function(func,wrapper){return function(){var args=[func];push.apply(args,arguments);return wrapper.apply(this,args)}};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=new Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=new Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key]});return copy};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key]}return copy};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop]}}});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b}var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)){return false}aStack.push(a);bStack.push(b);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break}}}else{for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}}if(result){for(key in b){if(_.has(b,key)&&!size--)break}result=!size}}aStack.pop();bStack.pop();return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))}}if(typeof/./!=="function"){_.isFunction=function(obj){return typeof obj==="function"}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){var accum=Array(Math.max(0,n));for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(string==null)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}});_.result=function(object,property){if(object==null)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}if(evaluate){source+="';\n"+evaluate+"\n__p+='"}index=offset+match.length;return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=="shift"||name=="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.extend(_.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)}).call(this);(function(){_=exports._}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.underscore={},{_:_})})();(function(){(function(){var _=Package["underscore"]._;var config=this.__meteor_runtime_config__||{};__meteor_runtime_config__=_.defaults({},config,{meteorEnv:{},DDP_DEFAULT_CONNECTION_URL:window.DDP_DEFAULT_CONNECTION_URL})}).call(this)})();(function(){var global,meteorEnv,Meteor;(function(){global=this}).call(this);(function(){meteorEnv=__meteor_runtime_config__.meteorEnv;Meteor={isProduction:meteorEnv.NODE_ENV==="production",isDevelopment:meteorEnv.NODE_ENV!=="production",isClient:true,isServer:false,isCordova:false};if(typeof __meteor_runtime_config__==="object"&&__meteor_runtime_config__.PUBLIC_SETTINGS){Meteor.settings={public:__meteor_runtime_config__.PUBLIC_SETTINGS}}}).call(this);(function(){if(Meteor.isServer)var Future=Npm.require("fibers/future");if(typeof __meteor_runtime_config__==="object"&&__meteor_runtime_config__.meteorRelease){Meteor.release=__meteor_runtime_config__.meteorRelease}Meteor._get=function(obj){for(var i=1;i<arguments.length;i++){if(!(arguments[i]in obj))return undefined;obj=obj[arguments[i]]}return obj};Meteor._ensure=function(obj){for(var i=1;i<arguments.length;i++){var key=arguments[i];if(!(key in obj))obj[key]={};obj=obj[key]}return obj};Meteor._delete=function(obj){var stack=[obj];var leaf=true;for(var i=1;i<arguments.length-1;i++){var key=arguments[i];if(!(key in obj)){leaf=false;break}obj=obj[key];if(typeof obj!=="object")break;stack.push(obj)}for(var i=stack.length-1;i>=0;i--){var key=arguments[i+1];if(leaf)leaf=false;else for(var other in stack[i][key])return;delete stack[i][key]}};Meteor.wrapAsync=function(fn,context){return function(){var self=context||this;var newArgs=Array.prototype.slice.call(arguments);var callback;for(var i=newArgs.length-1;i>=0;--i){var arg=newArgs[i];var type=typeof arg;if(type!=="undefined"){if(type==="function"){callback=arg}break}}if(!callback){if(Meteor.isClient){callback=logErr}else{var fut=new Future;callback=fut.resolver()}++i}newArgs[i]=Meteor.bindEnvironment(callback);var result=fn.apply(self,newArgs);return fut?fut.wait():result}};var hasOwn=Object.prototype.hasOwnProperty;Meteor._inherits=function(Child,Parent){for(var key in Parent){if(hasOwn.call(Parent,key)){Child[key]=Parent[key]}}var Middle=function(){this.constructor=Child};Middle.prototype=Parent.prototype;Child.prototype=new Middle;Child.__super__=Parent.prototype;return Child};var warnedAboutWrapAsync=false;Meteor._wrapAsync=function(fn,context){if(!warnedAboutWrapAsync){Meteor._debug("Meteor._wrapAsync has been renamed to Meteor.wrapAsync");warnedAboutWrapAsync=true}return Meteor.wrapAsync.apply(Meteor,arguments)};function logErr(err){if(err){return Meteor._debug("Exception in callback of async function",err.stack?err.stack:err)}}}).call(this);(function(){"use strict";var global=this;function useSetImmediate(){if(!global.setImmediate)return null;else{var setImmediate=function(fn){global.setImmediate(fn)};setImmediate.implementation="setImmediate";return setImmediate}}function usePostMessage(){if(!global.postMessage||global.importScripts){return null}var postMessageIsAsynchronous=true;var oldOnMessage=global.onmessage;global.onmessage=function(){postMessageIsAsynchronous=false};global.postMessage("","*");global.onmessage=oldOnMessage;if(!postMessageIsAsynchronous)return null;var funcIndex=0;var funcs={};var MESSAGE_PREFIX="Meteor._setImmediate."+Math.random()+".";function isStringAndStartsWith(string,putativeStart){return typeof string==="string"&&string.substring(0,putativeStart.length)===putativeStart}function onGlobalMessage(event){if(event.source===global&&isStringAndStartsWith(event.data,MESSAGE_PREFIX)){var index=event.data.substring(MESSAGE_PREFIX.length);try{if(funcs[index])funcs[index]()}finally{delete funcs[index]}}}if(global.addEventListener){global.addEventListener("message",onGlobalMessage,false)}else{global.attachEvent("onmessage",onGlobalMessage)}var setImmediate=function(fn){++funcIndex;funcs[funcIndex]=fn;global.postMessage(MESSAGE_PREFIX+funcIndex,"*")};setImmediate.implementation="postMessage";return setImmediate}function useTimeout(){var setImmediate=function(fn){global.setTimeout(fn,0)};setImmediate.implementation="setTimeout";return setImmediate}Meteor._setImmediate=useSetImmediate()||usePostMessage()||useTimeout()}).call(this);(function(){function withoutInvocation(f){if(Package.ddp){var DDP=Package.ddp.DDP;var CurrentInvocation=DDP._CurrentMethodInvocation||DDP._CurrentInvocation;var invocation=CurrentInvocation.get();if(invocation&&invocation.isSimulation){throw new Error("Can't set timers inside simulations")}return function(){CurrentInvocation.withValue(null,f)}}else{return f}}function bindAndCatch(context,f){return Meteor.bindEnvironment(withoutInvocation(f),context)}Meteor.setTimeout=function(f,duration){return setTimeout(bindAndCatch("setTimeout callback",f),duration)};Meteor.setInterval=function(f,duration){return setInterval(bindAndCatch("setInterval callback",f),duration)};Meteor.clearInterval=function(x){return clearInterval(x)};Meteor.clearTimeout=function(x){return clearTimeout(x)};Meteor.defer=function(f){Meteor._setImmediate(bindAndCatch("defer callback",f))}}).call(this);(function(){Meteor.makeErrorType=function(name,constructor){var errorClass=function(){if(Error.captureStackTrace){Error.captureStackTrace(this,errorClass)}else{this.stack=(new Error).stack}constructor.apply(this,arguments);this.errorType=name};Meteor._inherits(errorClass,Error);return errorClass};Meteor.Error=Meteor.makeErrorType("Meteor.Error",function(error,reason,details){var self=this;self.isClientSafe=true;self.error=error;self.reason=reason;self.details=details;if(self.reason)self.message=self.reason+" ["+self.error+"]";else self.message="["+self.error+"]"});Meteor.Error.prototype.clone=function(){var self=this;return new Meteor.Error(self.error,self.reason,self.details)}}).call(this);(function(){Meteor._noYieldsAllowed=function(f){return f()};Meteor._SynchronousQueue=function(){var self=this;self._tasks=[];self._running=false;self._runTimeout=null};var SQp=Meteor._SynchronousQueue.prototype;SQp.runTask=function(task){var self=this;if(!self.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");self._tasks.push(task);var tasks=self._tasks;self._tasks=[];self._running=true;if(self._runTimeout){clearTimeout(self._runTimeout);self._runTimeout=null}try{while(tasks.length>0){var t=tasks.shift();try{t()}catch(e){if(tasks.length===0){throw e}Meteor._debug("Exception in queued task: "+(e.stack||e))}}}finally{self._running=false}};SQp.queueTask=function(task){var self=this;self._tasks.push(task);if(!self._runTimeout){self._runTimeout=setTimeout(function(){return self.flush.apply(self,arguments)},0)}};SQp.flush=function(){var self=this;self.runTask(function(){})};SQp.drain=function(){var self=this;if(!self.safeToRunTask()){return}while(self._tasks.length>0){self.flush()}};SQp.safeToRunTask=function(){var self=this;return!self._running}}).call(this);(function(){var callbackQueue=[];var isLoadingCompleted=false;var isReady=false;var readyHoldsCount=0;var holdReady=function(){readyHoldsCount++};var releaseReadyHold=function(){readyHoldsCount--;maybeReady()};var maybeReady=function(){if(isReady||!isLoadingCompleted||readyHoldsCount>0)return;isReady=true;while(callbackQueue.length)callbackQueue.shift()();if(Meteor.isCordova){WebAppLocalServer.startupDidComplete()}};var loadingCompleted=function(){if(!isLoadingCompleted){isLoadingCompleted=true;maybeReady()}};if(Meteor.isCordova){holdReady();document.addEventListener("deviceready",releaseReadyHold,false)}if(document.readyState==="complete"||document.readyState==="loaded"){window.setTimeout(loadingCompleted)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",loadingCompleted,false);window.addEventListener("load",loadingCompleted,false)}else{document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){loadingCompleted()}});window.attachEvent("load",loadingCompleted)}}Meteor.startup=function(callback){var doScroll=!document.addEventListener&&document.documentElement.doScroll;if(!doScroll||window!==top){if(isReady)callback();else callbackQueue.push(callback)}else{try{doScroll("left")}catch(error){setTimeout(function(){Meteor.startup(callback)},50);return}callback()}}}).call(this);(function(){var suppress=0;Meteor._debug=function(){if(suppress){suppress--;return}if(typeof console!=="undefined"&&typeof console.log!=="undefined"){if(arguments.length==0){console.log("")}else{if(typeof console.log.apply==="function"){var allArgumentsOfTypeString=true;for(var i=0;i<arguments.length;i++)if(typeof arguments[i]!=="string")allArgumentsOfTypeString=false;if(allArgumentsOfTypeString)console.log.apply(console,[Array.prototype.join.call(arguments," ")]);else console.log.apply(console,arguments)}else if(typeof Function.prototype.bind==="function"){var log=Function.prototype.bind.call(console.log,console);log.apply(console,arguments)}else{Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))}}}};Meteor._suppress_log=function(count){suppress+=count};Meteor._suppressed_log_expected=function(){return suppress!==0}}).call(this);(function(){Meteor._escapeRegExp=function(string){return String(string).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}).call(this);(function(){var TEST_METADATA_STR;if(Meteor.isClient){TEST_METADATA_STR=meteorEnv.TEST_METADATA}else{TEST_METADATA_STR=process.env.TEST_METADATA}var TEST_METADATA=JSON.parse(TEST_METADATA_STR||"{}");var testDriverPackageName=TEST_METADATA.driverPackage;Meteor.isTest=!!TEST_METADATA.isTest;Meteor.isAppTest=!!TEST_METADATA.isAppTest;Meteor.isPackageTest=!!testDriverPackageName&&!Meteor.isTest&&!Meteor.isAppTest;if(typeof testDriverPackageName==="string"){Meteor.startup(function(){var testDriverPackage=Package[testDriverPackageName];if(!testDriverPackage){throw new Error("Can't find test driver package: "+testDriverPackageName)}if(Meteor.isClient){if(typeof testDriverPackage.runTests!=="function"){throw new Error("Test driver package "+testDriverPackageName+" missing `runTests` export")}testDriverPackage.runTests()}else{if(typeof testDriverPackage.start==="function"){testDriverPackage.start()}}})}}).call(this);(function(){var nextSlot=0;var currentValues=[];Meteor.EnvironmentVariable=function(){this.slot=nextSlot++};var EVp=Meteor.EnvironmentVariable.prototype;EVp.get=function(){return currentValues[this.slot]};EVp.getOrNullIfOutsideFiber=function(){return this.get()};EVp.withValue=function(value,func){var saved=currentValues[this.slot];try{currentValues[this.slot]=value;var ret=func()}finally{currentValues[this.slot]=saved}return ret};Meteor.bindEnvironment=function(func,onException,_this){var boundValues=currentValues.slice();if(!onException||typeof onException==="string"){var description=onException||"callback of async function";onException=function(error){Meteor._debug("Exception in "+description+":",error&&error.stack||error)}}return function(){var savedValues=currentValues;try{currentValues=boundValues;var ret=func.apply(_this,arguments)}catch(e){onException(e)}finally{currentValues=savedValues}return ret}};Meteor._nodeCodeMustBeInFiber=function(){}}).call(this);(function(){Meteor.absoluteUrl=function(path,options){if(!options&&typeof path==="object"){options=path;path=undefined}options=Object.assign({},Meteor.absoluteUrl.defaultOptions,options||{});var url=options.rootUrl;if(!url)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");if(!/^http[s]?:\/\//i.test(url))url="http://"+url;if(!/\/$/.test(url))url+="/";if(path)url+=path;if(options.secure&&/^http:/.test(url)&&!/http:\/\/localhost[:\/]/.test(url)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(url))url=url.replace(/^http:/,"https:");if(options.replaceLocalhost)url=url.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1");return url};Meteor.absoluteUrl.defaultOptions={};if(typeof __meteor_runtime_config__==="object"&&__meteor_runtime_config__.ROOT_URL)Meteor.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL;Meteor._relativeToSiteRootUrl=function(link){if(typeof __meteor_runtime_config__==="object"&&link.substr(0,1)==="/")link=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+link;return link}}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.meteor={},{Meteor:Meteor,global:global,meteorEnv:meteorEnv})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var Tracker,Deps;(function(){Tracker={};Tracker.active=false;Tracker.currentComputation=null;var setCurrentComputation=function(c){Tracker.currentComputation=c;Tracker.active=!!c};var _debugFunc=function(){return typeof Meteor!=="undefined"?Meteor._debug:typeof console!=="undefined"&&console.error?function(){console.error.apply(console,arguments)}:function(){}};var _maybeSuppressMoreLogs=function(messagesLength){if(typeof Meteor!=="undefined"){if(Meteor._suppressed_log_expected()){Meteor._suppress_log(messagesLength-1)}}};var _throwOrLog=function(from,e){if(throwFirstError){throw e}else{var printArgs=["Exception from Tracker "+from+" function:"];if(e.stack&&e.message&&e.name){var idx=e.stack.indexOf(e.message);if(idx<0||idx>e.name.length+2){var message=e.name+": "+e.message;printArgs.push(message)}}printArgs.push(e.stack);_maybeSuppressMoreLogs(printArgs.length);for(var i=0;i<printArgs.length;i++){_debugFunc()(printArgs[i])}}};var withNoYieldsAllowed=function(f){if(typeof Meteor==="undefined"||Meteor.isClient){return f}else{return function(){var args=arguments;Meteor._noYieldsAllowed(function(){f.apply(null,args)})}}};var nextId=1;var pendingComputations=[];var willFlush=false;var inFlush=false;var inCompute=false;var throwFirstError=false;var afterFlushCallbacks=[];var requireFlush=function(){if(!willFlush){if(typeof Meteor!=="undefined")Meteor._setImmediate(Tracker._runFlush);else setTimeout(Tracker._runFlush,0);willFlush=true}};var constructingComputation=false;Tracker.Computation=function(f,parent,onError){if(!constructingComputation)throw new Error("Tracker.Computation constructor is private; use Tracker.autorun");constructingComputation=false;var self=this;self.stopped=false;self.invalidated=false;self.firstRun=true;self._id=nextId++;self._onInvalidateCallbacks=[];self._onStopCallbacks=[];self._parent=parent;self._func=f;self._onError=onError;self._recomputing=false;var errored=true;try{self._compute();errored=false}finally{self.firstRun=false;if(errored)self.stop()}};Tracker.Computation.prototype.onInvalidate=function(f){var self=this;if(typeof f!=="function")throw new Error("onInvalidate requires a function");if(self.invalidated){Tracker.nonreactive(function(){withNoYieldsAllowed(f)(self)})}else{self._onInvalidateCallbacks.push(f)}};Tracker.Computation.prototype.onStop=function(f){var self=this;if(typeof f!=="function")throw new Error("onStop requires a function");if(self.stopped){Tracker.nonreactive(function(){withNoYieldsAllowed(f)(self)})}else{self._onStopCallbacks.push(f)}};Tracker.Computation.prototype.invalidate=function(){var self=this;if(!self.invalidated){if(!self._recomputing&&!self.stopped){requireFlush();pendingComputations.push(this)}self.invalidated=true;for(var i=0,f;f=self._onInvalidateCallbacks[i];i++){Tracker.nonreactive(function(){withNoYieldsAllowed(f)(self)})}self._onInvalidateCallbacks=[]}};Tracker.Computation.prototype.stop=function(){var self=this;if(!self.stopped){self.stopped=true;self.invalidate();for(var i=0,f;f=self._onStopCallbacks[i];i++){Tracker.nonreactive(function(){withNoYieldsAllowed(f)(self)})}self._onStopCallbacks=[]}};Tracker.Computation.prototype._compute=function(){var self=this;self.invalidated=false;var previous=Tracker.currentComputation;setCurrentComputation(self);var previousInCompute=inCompute;inCompute=true;try{withNoYieldsAllowed(self._func)(self)}finally{setCurrentComputation(previous);inCompute=previousInCompute}};Tracker.Computation.prototype._needsRecompute=function(){var self=this;return self.invalidated&&!self.stopped};Tracker.Computation.prototype._recompute=function(){var self=this;self._recomputing=true;try{if(self._needsRecompute()){try{self._compute()}catch(e){if(self._onError){self._onError(e)}else{_throwOrLog("recompute",e)}}}}finally{self._recomputing=false}};Tracker.Computation.prototype.flush=function(){var self=this;if(self._recomputing)return;self._recompute()};Tracker.Computation.prototype.run=function(){var self=this;self.invalidate();self.flush()};Tracker.Dependency=function(){this._dependentsById={}};Tracker.Dependency.prototype.depend=function(computation){if(!computation){if(!Tracker.active)return false;computation=Tracker.currentComputation}var self=this;var id=computation._id;if(!(id in self._dependentsById)){self._dependentsById[id]=computation;computation.onInvalidate(function(){delete self._dependentsById[id]});return true}return false};Tracker.Dependency.prototype.changed=function(){var self=this;for(var id in self._dependentsById)self._dependentsById[id].invalidate()};Tracker.Dependency.prototype.hasDependents=function(){var self=this;for(var id in self._dependentsById)return true;return false};Tracker.flush=function(options){Tracker._runFlush({finishSynchronously:true,throwFirstError:options&&options._throwFirstError})};Tracker.inFlush=function(){return inFlush};Tracker._runFlush=function(options){if(Tracker.inFlush())throw new Error("Can't call Tracker.flush while flushing");if(inCompute)throw new Error("Can't flush inside Tracker.autorun");options=options||{};inFlush=true;willFlush=true;throwFirstError=!!options.throwFirstError;var recomputedCount=0;var finishedTry=false;try{while(pendingComputations.length||afterFlushCallbacks.length){while(pendingComputations.length){var comp=pendingComputations.shift();comp._recompute();if(comp._needsRecompute()){pendingComputations.unshift(comp)}if(!options.finishSynchronously&&++recomputedCount>1e3){finishedTry=true;return}}if(afterFlushCallbacks.length){var func=afterFlushCallbacks.shift();try{func()}catch(e){_throwOrLog("afterFlush",e)}}}finishedTry=true}finally{if(!finishedTry){inFlush=false;Tracker._runFlush({finishSynchronously:options.finishSynchronously,throwFirstError:false})}willFlush=false;inFlush=false;if(pendingComputations.length||afterFlushCallbacks.length){if(options.finishSynchronously){throw new Error("still have more to do?")}setTimeout(requireFlush,10)}}};Tracker.autorun=function(f,options){if(typeof f!=="function")throw new Error("Tracker.autorun requires a function argument");options=options||{};constructingComputation=true;var c=new Tracker.Computation(f,Tracker.currentComputation,options.onError);if(Tracker.active)Tracker.onInvalidate(function(){c.stop()});return c};Tracker.nonreactive=function(f){var previous=Tracker.currentComputation;setCurrentComputation(null);try{return f()}finally{setCurrentComputation(previous)}};Tracker.onInvalidate=function(f){if(!Tracker.active)throw new Error("Tracker.onInvalidate requires a currentComputation");Tracker.currentComputation.onInvalidate(f)};Tracker.afterFlush=function(f){afterFlushCallbacks.push(f);requireFlush()}}).call(this);(function(){Meteor.flush=Tracker.flush;Meteor.autorun=Tracker.autorun;Meteor.autosubscribe=Tracker.autorun;Tracker.depend=function(d){return d.depend()};Deps=Tracker}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.tracker={},{Tracker:Tracker,Deps:Deps})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var Base64;(function(){var BASE_64_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var BASE_64_VALS={};for(var i=0;i<BASE_64_CHARS.length;i++){BASE_64_VALS[BASE_64_CHARS.charAt(i)]=i}Base64={};Base64.encode=function(array){if(typeof array==="string"){var str=array;array=Base64.newBinary(str.length);for(var i=0;i<str.length;i++){var ch=str.charCodeAt(i);if(ch>255){throw new Error("Not ascii. Base64.encode can only take ascii strings.")}array[i]=ch}}var answer=[];var a=null;var b=null;var c=null;var d=null;for(var i=0;i<array.length;i++){switch(i%3){case 0:a=array[i]>>2&63;b=(array[i]&3)<<4;break;case 1:b=b|array[i]>>4&15;c=(array[i]&15)<<2;break;case 2:c=c|array[i]>>6&3;d=array[i]&63;answer.push(getChar(a));answer.push(getChar(b));answer.push(getChar(c));answer.push(getChar(d));a=null;b=null;c=null;d=null;break}}if(a!=null){answer.push(getChar(a));answer.push(getChar(b));if(c==null)answer.push("=");else answer.push(getChar(c));if(d==null)answer.push("=")}return answer.join("")};var getChar=function(val){return BASE_64_CHARS.charAt(val)};var getVal=function(ch){if(ch==="="){return-1}return BASE_64_VALS[ch]};Base64.newBinary=function(len){if(typeof Uint8Array==="undefined"||typeof ArrayBuffer==="undefined"){var ret=[];for(var i=0;i<len;i++){ret.push(0)}ret.$Uint8ArrayPolyfill=true;return ret}return new Uint8Array(new ArrayBuffer(len))};Base64.decode=function(str){var len=Math.floor(str.length*3/4);if(str.charAt(str.length-1)=="="){len--;if(str.charAt(str.length-2)=="=")len--}var arr=Base64.newBinary(len);var one=null;var two=null;var three=null;var j=0;for(var i=0;i<str.length;i++){var c=str.charAt(i);var v=getVal(c);switch(i%4){case 0:if(v<0)throw new Error("invalid base64 string");one=v<<2;break;case 1:if(v<0)throw new Error("invalid base64 string");one=one|v>>4;arr[j++]=one;two=(v&15)<<4;break;case 2:if(v>=0){two=two|v>>2;arr[j++]=two;three=(v&3)<<6}break;case 3:if(v>=0){arr[j++]=three|v}break}}return arr}}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.base64={},{Base64:Base64})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var Hook;(function(){Hook=function(options){var self=this;options=options||{};self.nextCallbackId=0;self.callbacks={};self.bindEnvironment=true;if(options.bindEnvironment===false)self.bindEnvironment=false;if(options.exceptionHandler)self.exceptionHandler=options.exceptionHandler;else if(options.debugPrintExceptions){if(!_.isString(options.debugPrintExceptions))throw new Error("Hook option debugPrintExceptions should be a string");self.exceptionHandler=options.debugPrintExceptions}};_.extend(Hook.prototype,{register:function(callback){var self=this;var exceptionHandler=self.exceptionHandler||function(exception){throw exception};if(self.bindEnvironment){callback=Meteor.bindEnvironment(callback,exceptionHandler)}else{callback=dontBindEnvironment(callback,exceptionHandler)}var id=self.nextCallbackId++;self.callbacks[id]=callback;return{stop:function(){delete self.callbacks[id]}}},each:function(iterator){var self=this;Meteor._nodeCodeMustBeInFiber();var ids=_.keys(self.callbacks);for(var i=0;i<ids.length;++i){var id=ids[i];if(_.has(self.callbacks,id)){var callback=self.callbacks[id];if(!iterator(callback))break}}}});var dontBindEnvironment=function(func,onException,_this){if(!onException||typeof onException==="string"){var description=onException||"callback of async function";onException=function(error){Meteor._debug("Exception in "+description+":",error&&error.stack||error)}}return function(){var args=_.toArray(arguments);var runAndHandleExceptions=function(){try{var ret=func.apply(_this,args)}catch(e){onException(e)}return ret};return runAndHandleExceptions()}}}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["callback-hook"]={},{Hook:Hook})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var ReactiveVar;(function(){ReactiveVar=function(initialValue,equalsFunc){if(!(this instanceof ReactiveVar))return new ReactiveVar(initialValue,equalsFunc);this.curValue=initialValue;this.equalsFunc=equalsFunc;this.dep=new Tracker.Dependency};ReactiveVar._isEqual=function(oldValue,newValue){var a=oldValue,b=newValue;if(a!==b)return false;else return!a||typeof a==="number"||typeof a==="boolean"||typeof a==="string"};ReactiveVar.prototype.get=function(){if(Tracker.active)this.dep.depend();return this.curValue};ReactiveVar.prototype.set=function(newValue){var oldValue=this.curValue;if((this.equalsFunc||ReactiveVar._isEqual)(oldValue,newValue))return;this.curValue=newValue;this.dep.changed()};ReactiveVar.prototype.toString=function(){return"ReactiveVar{"+this.get()+"}"};ReactiveVar.prototype._numListeners=function(){var count=0;for(var id in this.dep._dependentsById)count++;return count}}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["reactive-var"]={},{ReactiveVar:ReactiveVar})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var makeInstaller,makeInstallerOptions,meteorInstall;makeInstaller=function(options){"use strict";options=options||{};var defaultExtensions=options.extensions||[".js",".json"];var onInstall=options.onInstall;var wrapRequire=options.wrapRequire;var override=options.override;var fallback=options.fallback;var mainFields=options.mainFields||(options.browser?["browser","main"]:["main"]);var hasOwn={}.hasOwnProperty;var filesByModuleId={};var root=new File("/",new File("/.."));var rootRequire=makeRequire(root);function install(tree,options){if(isObject(tree)){fileMergeContents(root,tree,options);if(isFunction(onInstall)){onInstall(rootRequire)}}return rootRequire}install.fetch=function(ids){throw new Error("fetch not implemented")};function Module(id){this.id=id;this.children=[];this.childrenById={}}Module.prototype.resolve=function(id){return this.require.resolve(id)};var resolvedPromise;var lastPrefetchPromise;Module.prototype.prefetch=function(id){var module=this;var parentFile=getOwn(filesByModuleId,module.id);var missing;resolvedPromise=resolvedPromise||Promise.resolve();lastPrefetchPromise=lastPrefetchPromise||resolvedPromise;var previousPromise=lastPrefetchPromise;function walk(module){var file=getOwn(filesByModuleId,module.id);if(fileIsDynamic(file)&&!file.pending){file.pending=true;missing=missing||{};missing[module.id]={module:file.module,deps:Object.keys(file.deps),options:file.options,stub:file.stub};each(file.deps,function(parentId,id){fileResolve(file,id)});each(module.childrenById,walk)}}return lastPrefetchPromise=resolvedPromise.then(function(){var absChildId=module.resolve(id);each(module.childrenById,walk);return Promise.resolve(missing&&install.fetch(missing)).then(function(tree){function both(){if(tree)install(tree);return absChildId}return previousPromise.then(both,both)})})};install.Module=Module;function getOwn(obj,key){return hasOwn.call(obj,key)&&obj[key]}function isObject(value){return typeof value==="object"&&value!==null}function isFunction(value){return typeof value==="function"}function isString(value){return typeof value==="string"}function makeMissingError(id){return new Error("Cannot find module '"+id+"'")}function makeRequire(file){function require(id){var result=fileResolve(file,id);if(result){return fileEvaluate(result,file.module)}var error=makeMissingError(id);if(isFunction(fallback)){return fallback(id,file.module.id,error)}throw error}if(isFunction(wrapRequire)){require=wrapRequire(require,file.module)}require.extensions=fileGetExtensions(file).slice(0);require.resolve=function(id){var f=fileResolve(file,id);if(f)return f.module.id;var error=makeMissingError(id);if(fallback&&isFunction(fallback.resolve)){return fallback.resolve(id,file.module.id,error)}throw error};return require}function File(moduleId,parent){var file=this;file.parent=parent=parent||null;file.module=new Module(moduleId);filesByModuleId[moduleId]=file;file.contents=null;file.deps={}}function fileEvaluate(file,parentModule){var module=file.module;if(!hasOwn.call(module,"exports")){var contents=file.contents;if(!contents){if(file.stub){return file.stub}throw makeMissingError(module.id)}if(parentModule){module.parent=parentModule;var children=parentModule.children;if(Array.isArray(children)){children.push(module)}}if(!isFunction(module.useNode)||!module.useNode()){contents(module.require=module.require||makeRequire(file),module.exports=file.stub||{},module,file.module.id,file.parent.module.id)}module.loaded=true}var runSetters=module.runSetters||module.runModuleSetters;if(isFunction(runSetters)){runSetters.call(module)}return module.exports}function fileIsDirectory(file){return file&&isObject(file.contents)}function fileIsDynamic(file){return file&&file.contents===null}function fileMergeContents(file,contents,options){if(Array.isArray(contents)){contents.forEach(function(item){if(isString(item)){file.deps[item]=file.module.id}else if(isFunction(item)){contents=item}else if(isObject(item)){file.stub=file.stub||{};each(item,function(value,key){file.stub[key]=value})}});if(!isFunction(contents)){contents=null}}else if(!isFunction(contents)&&!isString(contents)&&!isObject(contents)){contents=null}if(contents){file.contents=file.contents||(isObject(contents)?{}:contents);if(isObject(contents)&&fileIsDirectory(file)){each(contents,function(value,key){if(key===".."){child=file.parent}else{var child=getOwn(file.contents,key);if(!child){child=file.contents[key]=new File(file.module.id.replace(/\/*$/,"/")+key,file);child.options=options}}fileMergeContents(child,value,options)})}}}function each(obj,callback,context){Object.keys(obj).forEach(function(key){callback.call(this,obj[key],key)},context)}function fileGetExtensions(file){return file.options&&file.options.extensions||defaultExtensions}function fileAppendIdPart(file,part,extensions){while(file&&!fileIsDirectory(file)){file=file.parent}if(!file||!part||part==="."){return file}if(part===".."){return file.parent}var exactChild=getOwn(file.contents,part);if(extensions&&(!exactChild||fileIsDirectory(exactChild))){for(var e=0;e<extensions.length;++e){var child=getOwn(file.contents,part+extensions[e]);if(child&&!fileIsDirectory(child)){return child}}}return exactChild}function fileAppendId(file,id,extensions){var parts=id.split("/");parts.every(function(part,i){return file=i<parts.length-1?fileAppendIdPart(file,part):fileAppendIdPart(file,part,extensions)});return file}function recordChild(parentModule,childFile){var childModule=childFile&&childFile.module;if(parentModule&&childModule){parentModule.childrenById[childModule.id]=childModule}}function fileResolve(file,id,parentModule,seenDirFiles){var parentModule=parentModule||file.module;var extensions=fileGetExtensions(file);file=id.charAt(0)==="/"?fileAppendId(root,id,extensions):id.charAt(0)==="."?fileAppendId(file,id,extensions):nodeModulesLookup(file,id,extensions);while(fileIsDirectory(file)){seenDirFiles=seenDirFiles||[];if(seenDirFiles.indexOf(file)<0){seenDirFiles.push(file);var pkgJsonFile=fileAppendIdPart(file,"package.json"),main;var pkg=pkgJsonFile&&fileEvaluate(pkgJsonFile,parentModule);if(pkg&&mainFields.some(function(name){return isString(main=pkg[name])})){recordChild(parentModule,pkgJsonFile);file=fileAppendId(file,main,extensions)||fileResolve(file,main,parentModule,seenDirFiles);if(file){continue}}}file=fileAppendIdPart(file,"index.js")}if(file&&isString(file.contents)){file=fileResolve(file,file.contents,parentModule,seenDirFiles)}recordChild(parentModule,file);return file}function nodeModulesLookup(file,id,extensions){if(isFunction(override)){id=override(id,file.module.id)}if(isString(id)){for(var resolved;file&&!resolved;file=file.parent){resolved=fileIsDirectory(file)&&fileAppendId(file,"node_modules/"+id,extensions)}return resolved}}return install};if(typeof exports==="object"){exports.makeInstaller=makeInstaller}(function(){makeInstallerOptions={};if(typeof Profile==="function"&&process.env.METEOR_PROFILE){makeInstallerOptions.wrapRequire=function(require){return Profile(function(id){return"require("+JSON.stringify(id)+")"},require)}}}).call(this);(function(){makeInstallerOptions.browser=true;meteorInstall=makeInstaller(makeInstallerOptions)}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["modules-runtime"]={},{meteorInstall:meteorInstall})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var meteorInstall=Package["modules-runtime"].meteorInstall;var require=meteorInstall({node_modules:{meteor:{modules:{"client.js":function(require,exports){require("./install-packages.js");require("./stubs.js");require("./process.js");require("./reify.js");exports.addStyles=require("./css").addStyles},"css.js":function(require,exports){var doc=document;var head=doc.getElementsByTagName("head").item(0);exports.addStyles=function(css){var style=doc.createElement("style");style.setAttribute("type","text/css");var internetExplorerSheetObject=style.sheet||style.styleSheet;if(internetExplorerSheetObject){internetExplorerSheetObject.cssText=css}else{style.appendChild(doc.createTextNode(css))}return head.appendChild(style)}},"install-packages.js":function(require,exports,module){function install(name,mainModule){var meteorDir={};if(typeof mainModule==="string"){meteorDir[name+".js"]=mainModule}else{meteorDir[name+".js"]=function(r,e,module){module.exports=Package[name]}}meteorInstall({node_modules:{meteor:meteorDir}})}install("meteor");install("modules-runtime");install("modules","meteor/modules/client.js");install("promise","meteor/promise/client.js");install("ecmascript-runtime-client","meteor/ecmascript-runtime-client/runtime.js");install("babel-compiler");install("ecmascript");install("underscore");install("ddp-rate-limiter");install("ecmascript-runtime");install("babel-runtime","meteor/babel-runtime/babel-runtime.js");install("random");install("localstorage");install("tracker");install("callback-hook");install("reactive-var");install("base64");install("ejson","meteor/ejson/ejson.js");install("check","meteor/check/match.js");install("retry");install("id-map");install("ddp-common");install("diff-sequence");install("mongo-id");install("ddp-client","meteor/ddp-client/namespace.js");install("ddp");install("geojson-utils","meteor/geojson-utils/main.js");install("ordered-dict");install("minimongo","meteor/minimongo/minimongo_client.js");install("ddp-server");install("allow-deny");install("mongo-dev-server");install("mongo");install("accounts-base","meteor/accounts-base/client_main.js");install("sha");install("srp");install("accounts-password");install("url");install("http");install("ostrio:cookies","meteor/ostrio:cookies/cookies.js");install("ostrio:files","meteor/ostrio:files/client.js");install("arunoda:streams");install("service-configuration")},"process.js":function(require,exports,module){if(!global.process){try{global.process=require("process")}catch(missing){global.process={}}}var proc=global.process;if(Meteor.isServer){meteorInstall({node_modules:{"process.js":function(r,e,module){module.exports=proc}}})}else{proc.platform="browser";proc.nextTick=proc.nextTick||Meteor._setImmediate}if(typeof proc.env!=="object"){proc.env={}}var hasOwn=Object.prototype.hasOwnProperty;for(var key in meteorEnv){if(hasOwn.call(meteorEnv,key)){proc.env[key]=meteorEnv[key]}}},"reify.js":function(require,exports,module){var Module=module.constructor;var Mp=Module.prototype;require("reify/lib/runtime").enable(Mp);Mp.importSync=Mp.importSync||Mp.import;Mp.import=Mp.import||Mp.importSync},"stubs.js":function(require){var haveStubs=false;try{require.resolve("meteor-node-stubs");haveStubs=true}catch(noStubs){}if(haveStubs){require("meteor-node-stubs")}},node_modules:{reify:{lib:{runtime:{"index.js":function(require,exports,module){"use strict";var utils=require("./utils.js");var Entry=require("./entry.js");exports.enable=function(mod){if(typeof mod.export!=="function"||typeof mod.importSync!=="function"){mod.export=moduleExport;mod.exportDefault=moduleExportDefault;mod.runSetters=runSetters;mod.watch=moduleWatch;mod.makeNsSetter=moduleMakeNsSetter;mod.runModuleSetters=runSetters;mod.importSync=importSync;return true}return false};function moduleWatch(exported,setters,key){utils.setESModule(this.exports);Entry.getOrCreate(this.exports,this);if(utils.isObject(setters)){Entry.getOrCreate(exported).addSetters(this,setters,key)}}function importSync(id,setters,key){return this.watch(this.require(id),setters,key)}function moduleExport(getters,constant){utils.setESModule(this.exports);var entry=Entry.getOrCreate(this.exports,this);entry.addGetters(getters,constant);if(this.loaded){entry.runSetters()}}function moduleExportDefault(value){return this.export({default:function(){return value}},true)}function runSetters(valueToPassThrough){var entry=Entry.get(this.exports);if(entry!==null){entry.runSetters()}if(this.loaded){Entry.getOrCreate(this.exports,this)}return valueToPassThrough}function moduleMakeNsSetter(){var module=this;return function(namespace){Object.keys(namespace).forEach(function(key){if(key!=="default"){utils.copyKey(key,module.exports,namespace)}})}}},"utils.js":function(require,exports,module){"use strict";var useSetPrototypeOf=typeof Object.setPrototypeOf==="function";var useSymbol=typeof Symbol==="function";var esStrKey="__esModule";var esSymKey=useSymbol?Symbol.for(esStrKey):null;var useToStringTag=useSymbol&&typeof Symbol.toStringTag==="symbol";var useGetOwnPropDesc=typeof Object.getOwnPropertyDescriptor==="function";var hasOwn=Object.prototype.hasOwnProperty;function copyKey(key,target,source){if(useGetOwnPropDesc){var desc=Object.getOwnPropertyDescriptor(source,key);desc.configurable=true;Object.defineProperty(target,key,desc)}else{target[key]=source[key]}}exports.copyKey=copyKey;exports.valueOrGetter=function(obj,key){if(useGetOwnPropDesc&&hasOwn.call(obj,key)){var desc=Object.getOwnPropertyDescriptor(obj,key);if(typeof desc.get==="function"){return desc.get}}return obj[key]};function getESModule(exported){if(isObjectLike(exported)){if(useSymbol&&hasOwn.call(exported,esSymKey)){return!!exported[esSymKey]}if(hasOwn.call(exported,esStrKey)){return!!exported[esStrKey]}}return false}exports.getESModule=getESModule;function setESModule(exported){if(isObjectLike(exported)){if(useSymbol){exported[esSymKey]=true}else if(!exported[esStrKey]){Object.defineProperty(exported,esStrKey,{configurable:true,enumerable:false,value:true,writable:false})}}}exports.setESModule=setESModule;function isObject(value){return typeof value==="object"&&value!==null}exports.isObject=isObject;function isObjectLike(value){var type=typeof value;return type==="function"||type==="object"&&value!==null}exports.isObjectLike=isObjectLike;function createNamespace(){var namespace=Object.create(null);if(useToStringTag){Object.defineProperty(namespace,Symbol.toStringTag,{value:"Module",configurable:false,enumerable:false,writable:false})}setESModule(namespace);return namespace}exports.createNamespace=createNamespace;function setPrototypeOf(object,proto){if(useSetPrototypeOf){Object.setPrototypeOf(object,proto)}else{object.__proto__=proto}return object}exports.setPrototypeOf=setPrototypeOf},"entry.js":function(require,exports,module){"use strict";var utils=require("./utils.js");var GETTER_ERROR={};var NAN={};var UNDEFINED={};var hasOwn=Object.prototype.hasOwnProperty;var keySalt=0;function Entry(exported){this.exports=exported;this.getters=Object.create(null);this.setters=Object.create(null);this.namespace=utils.createNamespace();this.ownerModules=Object.create(null);this._loaded=false}var Ep=utils.setPrototypeOf(Entry.prototype,null);var weakEntryMap=typeof WeakMap==="function"?new WeakMap:new function FakeWeakMap(){var keys=[];var values=[];this.get=function(obj){var index=keys.indexOf(obj);if(index>=0){return values[index]}};this.set=function(obj,value){var index=keys.indexOf(obj);if(index>=0){values[index]=value}else{keys.push(obj);values.push(value)}}};Entry.get=function(exported){if(utils.isObjectLike(exported)){var entry=weakEntryMap.get(exported);if(entry!==void 0){return entry}}return null};Entry.getOrCreate=function(exported,mod){var entry=getOrCreate(exported);if(utils.isObject(mod)){entry.ownerModules[mod.id]=mod}return entry};function getOrCreate(exported){if(!utils.isObjectLike(exported)){return new Entry(exported)}var entry=weakEntryMap.get(exported);if(entry!==void 0){return entry}var entry=new Entry(exported);weakEntryMap.set(exported,entry);return entry}function safeKeys(obj){var keys=Object.keys(obj);var esModuleIndex=keys.indexOf("__esModule");if(esModuleIndex>=0){keys.splice(esModuleIndex,1)}return keys}Ep.addGetters=function(getters,constant){var names=safeKeys(getters);var nameCount=names.length;constant=!!constant;for(var i=0;i<nameCount;++i){var name=names[i];var getter=getters[name];if(typeof getter==="function"&&!(name in this.getters)){this.getters[name]=getter;getter.constant=constant;getter.runCount=0}}};Ep.addSetters=function(parent,setters,key){var names=safeKeys(setters);var nameCount=names.length;if(!nameCount){return}key=key===void 0?makeUniqueKey():parent.id+":"+key;for(var i=0;i<nameCount;++i){var name=names[i];var setter=setters[name];if(typeof setter==="function"){setter.parent=parent;if(!(name in this.setters)){this.setters[name]=Object.create(null)}this.setters[name][key]=setter}}this.runSetters(names)};Ep.runGetters=function(names){syncExportsToNamespace(this,names);if(names===void 0||names.indexOf("*")>=0){names=Object.keys(this.getters)}var nameCount=names.length;for(var i=0;i<nameCount;++i){var name=names[i];var value=runGetter(this,name);if(value!==GETTER_ERROR){this.namespace[name]=value;this.exports[name]=value}}};function syncExportsToNamespace(entry,names){var setDefault=false;if(!utils.getESModule(entry.exports)){entry.namespace.default=entry.exports;setDefault=true}if(!utils.isObjectLike(entry.exports)){return}if(names===void 0||names.indexOf("*")>=0){names=Object.keys(entry.exports)}names.forEach(function(key){if(!hasOwn.call(entry.getters,key)&&!(setDefault&&key==="default")&&hasOwn.call(entry.exports,key)){utils.copyKey(key,entry.namespace,entry.exports)}})}Ep.hasLoaded=function(){if(this._loaded){return true}var ids=Object.keys(this.ownerModules);var idCount=ids.length;for(var i=0;i<idCount;++i){var owner=this.ownerModules[ids[i]];if(!owner.loaded&&owner.exports===this.exports){return false}}return this._loaded=true};Ep.runSetters=function(names){this.runGetters(names);var parents;forEachSetter(this,names,function(setter,name,value){if(parents===void 0){parents=Object.create(null)}parents[setter.parent.id]=setter.parent;setter(value,name)});if(!parents){return}var parentIDs=Object.keys(parents);var parentIDCount=parentIDs.length;for(var i=0;i<parentIDCount;++i){var parent=parents[parentIDs[i]];var parentEntry=Entry.get(parent.exports);if(parentEntry){parentEntry.runSetters()}}};function callSetterIfNecessary(setter,name,value,callback){if(name==="__esModule"){return}var shouldCall=false;if(setter.last===void 0){setter.last=Object.create(null);shouldCall=true}function changed(name,value){var valueToCompare=value;if(valueToCompare!==valueToCompare){valueToCompare=NAN}else if(valueToCompare===void 0){valueToCompare=UNDEFINED}if(setter.last[name]===valueToCompare){return false}setter.last[name]=valueToCompare;return true}if(name==="*"){var keys=safeKeys(value);var keyCount=keys.length;for(var i=0;i<keyCount;++i){var key=keys[i];if(changed(key,utils.valueOrGetter(value,key))){shouldCall=true}}}else if(changed(name,value)){shouldCall=true}if(shouldCall){return callback(setter,name,value)}}function forEachSetter(entry,names,callback){var needToCheckNames=true;if(names===void 0){names=Object.keys(entry.setters);needToCheckNames=false}var nameCount=names.length;for(var i=0;i<nameCount;++i){var name=names[i];if(needToCheckNames&&!hasOwn.call(entry.setters,name)){continue}var setters=entry.setters[name];var keys=Object.keys(setters);var keyCount=keys.length;for(var j=0;j<keyCount;++j){var key=keys[j];var value=getExportByName(entry,name);callSetterIfNecessary(setters[key],name,value,callback);var getter=entry.getters[name];if(typeof getter==="function"&&getter.runCount>0&&getter.constant){delete setters[key]}}}}function getExportByName(entry,name){if(name==="*"){return entry.namespace}if(hasOwn.call(entry.namespace,name)){return entry.namespace[name]}var exported=entry.exports;if(name==="default"&&!(utils.getESModule(exported)&&"default"in exported)){return exported}if(exported==null){return}return exported[name]}function makeUniqueKey(){return Math.random().toString(36).replace("0.",++keySalt+"$")}function runGetter(entry,name){var getter=entry.getters[name];try{var result=getter();++getter.runCount;return result}catch(e){}return GETTER_ERROR}module.exports=Entry}}}}}}},"meteor-node-stubs":{"package.json":function(require,exports){exports.name="meteor-node-stubs";exports.version="0.3.2";exports.main="index.js"},"index.js":function(require,exports,module){var map=require("./map.json");var meteorAliases={};Object.keys(map).forEach(function(id){if(typeof map[id]==="string"){var aliasParts=module.id.split("/");aliasParts.pop();aliasParts.push("node_modules",map[id]);exports[id]=meteorAliases[id+".js"]=aliasParts.join("/")}else{exports[id]=map[id];meteorAliases[id+".js"]=function(){}}});if(typeof meteorInstall==="function"){meteorInstall({"..":{node_modules:meteorAliases}})}},"map.json":function(require,exports,module){module.exports={assert:"assert/",buffer:"buffer/",child_process:null,cluster:null,console:"console-browserify",constants:"constants-browserify",crypto:"../wrappers/crypto.js",dgram:null,dns:null,domain:"domain-browser",events:"events/",fs:null,http:"http-browserify",https:"https-browserify",module:"../wrappers/module.js",net:null,os:"os-browserify/browser.js",path:"path-browserify",process:"process/browser.js",punycode:"punycode/",querystring:"querystring-es3/",readline:null,repl:null,stream:"stream-browserify",_stream_duplex:"readable-stream/duplex.js",_stream_passthrough:"readable-stream/passthrough.js",_stream_readable:"readable-stream/readable.js",_stream_transform:"readable-stream/transform.js",_stream_writable:"readable-stream/writable.js",string_decoder:"string_decoder/",sys:"util/util.js",timers:"timers-browserify",tls:null,tty:"tty-browserify",url:"url/",util:"util/util.js",vm:"vm-browserify",zlib:"browserify-zlib"}},deps:{"process.js":function(require){require("process/browser.js")},"domain.js":function(require){require("domain-browser")}},node_modules:{process:{"browser.js":function(require,exports,module){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}}},"domain-browser":{"package.json":function(require,exports){exports.name="domain-browser";exports.version="1.1.7";exports.main="./index.js"},"index.js":function(require,exports,module){"use strict";module.exports=function(){var events=require("events");var domain={};domain.createDomain=domain.create=function(){var d=new events.EventEmitter;function emitError(e){d.emit("error",e)}d.add=function(emitter){emitter.on("error",emitError)};d.remove=function(emitter){emitter.removeListener("error",emitError)};d.bind=function(fn){return function(){var args=Array.prototype.slice.call(arguments);try{fn.apply(null,args)}catch(err){emitError(err)}}};d.intercept=function(fn){return function(err){if(err){emitError(err)}else{var args=Array.prototype.slice.call(arguments,1);try{fn.apply(null,args)}catch(err){emitError(err)}}}};d.run=function(fn){try{fn()}catch(err){emitError(err)}return this};d.dispose=function(){this.removeAllListeners();return this};d.enter=d.exit=function(){return this};return d};return domain}.call(this)}},events:{"package.json":function(require,exports){exports.name="events";exports.version="1.1.1";exports.main="./events.js"},"events.js":function(require,exports,module){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Uncaught, unspecified "error" event. ('+er+")");err.context=er;throw err}}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}}}}},"core-js":{modules:{"es6.symbol.js":function(require){"use strict";var global=require("./_global");var has=require("./_has");var DESCRIPTORS=require("./_descriptors");var $export=require("./_export");var redefine=require("./_redefine");var META=require("./_meta").KEY;var $fails=require("./_fails");var shared=require("./_shared");var setToStringTag=require("./_set-to-string-tag");var uid=require("./_uid");var wks=require("./_wks");var wksExt=require("./_wks-ext");var wksDefine=require("./_wks-define");var enumKeys=require("./_enum-keys");var isArray=require("./_is-array");var anObject=require("./_an-object");var toIObject=require("./_to-iobject");var toPrimitive=require("./_to-primitive");var createDesc=require("./_property-desc");var _create=require("./_object-create");var gOPNExt=require("./_object-gopn-ext");var $GOPD=require("./_object-gopd");var $DP=require("./_object-dp");var $keys=require("./_object-keys");var gOPD=$GOPD.f;var dP=$DP.f;var gOPN=gOPNExt.f;var $Symbol=global.Symbol;var $JSON=global.JSON;var _stringify=$JSON&&$JSON.stringify;var PROTOTYPE="prototype";var HIDDEN=wks("_hidden");var TO_PRIMITIVE=wks("toPrimitive");var isEnum={}.propertyIsEnumerable;var SymbolRegistry=shared("symbol-registry");var AllSymbols=shared("symbols");var OPSymbols=shared("op-symbols");var ObjectProto=Object[PROTOTYPE];var USE_NATIVE=typeof $Symbol=="function";var QObject=global.QObject;var setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a!=7})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);if(protoDesc)delete ObjectProto[key];dP(it,key,D);if(protoDesc&&it!==ObjectProto)dP(ObjectProto,key,protoDesc)}:dP;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);sym._k=tag;return sym};var isSymbol=USE_NATIVE&&typeof $Symbol.iterator=="symbol"?function(it){return typeof it=="symbol"}:function(it){return it instanceof $Symbol};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectProto)$defineProperty(OPSymbols,key,D);anObject(it);key=toPrimitive(key,true);anObject(D);if(has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))dP(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)})}return setSymbolDesc(it,key,D)}return dP(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P));var i=0;var l=keys.length;var key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=toPrimitive(key,true));if(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return false;return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=toIObject(it);key=toPrimitive(key,true);if(it===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return;var D=gOPD(it,key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=gOPN(toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN&&key!=META)result.push(key)}return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectProto;var names=gOPN(IS_OP?OPSymbols:toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(has(AllSymbols,key=names[i++])&&(IS_OP?has(ObjectProto,key):true))result.push(AllSymbols[key])}return result};if(!USE_NATIVE){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:undefined);var $set=function(value){if(this===ObjectProto)$set.call(OPSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value))};if(DESCRIPTORS&&setter)setSymbolDesc(ObjectProto,tag,{configurable:true,set:$set});return wrap(tag)};redefine($Symbol[PROTOTYPE],"toString",function toString(){return this._k});$GOPD.f=$getOwnPropertyDescriptor;$DP.f=$defineProperty;require("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames;require("./_object-pie").f=$propertyIsEnumerable;require("./_object-gops").f=$getOwnPropertySymbols;if(DESCRIPTORS&&!require("./_library")){redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,true)}wksExt.f=function(name){return wrap(wks(name))}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol!");for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key},useSetter:function(){setter=true},useSimple:function(){setter=false}});$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return _stringify([S])!="[null]"||_stringify({a:S})!="{}"||_stringify(Object(S))!="{}"})),"JSON",{stringify:function stringify(it){if(it===undefined||isSymbol(it))return;var args=[it];var i=1;var replacer,$replacer;while(arguments.length>i)args.push(arguments[i++]);replacer=args[1];if(typeof replacer=="function")$replacer=replacer;if($replacer||!isArray(replacer))replacer=function(key,value){if($replacer)value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||require("./_hide")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",true);setToStringTag(global.JSON,"JSON",true)},"_global.js":function(require,exports,module){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},"_has.js":function(require,exports,module){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},"_descriptors.js":function(require,exports,module){module.exports=!require("./_fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"_fails.js":function(require,exports,module){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},"_export.js":function(require,exports,module){var global=require("./_global");var core=require("./_core");var hide=require("./_hide");var redefine=require("./_redefine");var ctx=require("./_ctx");var PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F;var IS_GLOBAL=type&$export.G;var IS_STATIC=type&$export.S;var IS_PROTO=type&$export.P;var IS_BIND=type&$export.B;var target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{})[PROTOTYPE];var exports=IS_GLOBAL?core:core[name]||(core[name]={});var expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={});var key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;out=(own?target:source)[key];exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(target)redefine(target,key,out,type&$export.U);if(exports[key]!=out)hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out}};global.core=core;$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;module.exports=$export},"_core.js":function(require,exports,module){var core=module.exports={version:"2.5.1"};if(typeof __e=="number")__e=core},"_hide.js":function(require,exports,module){var dP=require("./_object-dp");var createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},"_object-dp.js":function(require,exports){var anObject=require("./_an-object");var IE8_DOM_DEFINE=require("./_ie8-dom-define");var toPrimitive=require("./_to-primitive");var dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)O[P]=Attributes.value;return O}},"_an-object.js":function(require,exports,module){var isObject=require("./_is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},"_is-object.js":function(require,exports,module){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},"_ie8-dom-define.js":function(require,exports,module){module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a!=7})},"_dom-create.js":function(require,exports,module){var isObject=require("./_is-object");var document=require("./_global").document;var is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},"_to-primitive.js":function(require,exports,module){var isObject=require("./_is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=="function"&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},"_property-desc.js":function(require,exports,module){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},"_redefine.js":function(require,exports,module){var global=require("./_global");var hide=require("./_hide");var has=require("./_has");var SRC=require("./_uid")("src");var TO_STRING="toString";var $toString=Function[TO_STRING];var TPL=(""+$toString).split(TO_STRING);require("./_core").inspectSource=function(it){return $toString.call(it)};(module.exports=function(O,key,val,safe){var isFunction=typeof val=="function";if(isFunction)has(val,"name")||hide(val,"name",key);if(O[key]===val)return;if(isFunction)has(val,SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)));if(O===global){O[key]=val}else if(!safe){delete O[key];hide(O,key,val)}else if(O[key]){O[key]=val}else{hide(O,key,val)}})(Function.prototype,TO_STRING,function toString(){return typeof this=="function"&&this[SRC]||$toString.call(this)})},"_uid.js":function(require,exports,module){var id=0;var px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},"_ctx.js":function(require,exports,module){var aFunction=require("./_a-function");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},"_a-function.js":function(require,exports,module){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},"_meta.js":function(require,exports,module){var META=require("./_uid")("meta");var isObject=require("./_is-object");var has=require("./_has");var setDesc=require("./_object-dp").f;var id=0;var isExtensible=Object.isExtensible||function(){return true};var FREEZE=!require("./_fails")(function(){return isExtensible(Object.preventExtensions({}))});var setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})};var fastKey=function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i};var getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return true;if(!create)return false;setMeta(it)}return it[META].w};var onFreeze=function(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META))setMeta(it);return it};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}},"_shared.js":function(require,exports,module){var global=require("./_global");var SHARED="__core-js_shared__";var store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},"_set-to-string-tag.js":function(require,exports,module){var def=require("./_object-dp").f;var has=require("./_has");var TAG=require("./_wks")("toStringTag");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},"_wks.js":function(require,exports,module){var store=require("./_shared")("wks");var uid=require("./_uid");var Symbol=require("./_global").Symbol;var USE_SYMBOL=typeof Symbol=="function";var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},"_wks-ext.js":function(require,exports){exports.f=require("./_wks")},"_wks-define.js":function(require,exports,module){var global=require("./_global");var core=require("./_core");var LIBRARY=require("./_library");var wksExt=require("./_wks-ext");var defineProperty=require("./_object-dp").f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});if(name.charAt(0)!="_"&&!(name in $Symbol))defineProperty($Symbol,name,{value:wksExt.f(name)})}},"_library.js":function(require,exports,module){module.exports=false},"_enum-keys.js":function(require,exports,module){var getKeys=require("./_object-keys");var gOPS=require("./_object-gops");var pIE=require("./_object-pie");module.exports=function(it){var result=getKeys(it);var getSymbols=gOPS.f;if(getSymbols){var symbols=getSymbols(it);var isEnum=pIE.f;var i=0;var key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))result.push(key)}return result}},"_object-keys.js":function(require,exports,module){var $keys=require("./_object-keys-internal");var enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function keys(O){return $keys(O,enumBugKeys)}},"_object-keys-internal.js":function(require,exports,module){var has=require("./_has");var toIObject=require("./_to-iobject");var arrayIndexOf=require("./_array-includes")(false);var IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(object,names){var O=toIObject(object);var i=0;var result=[];var key;for(key in O)if(key!=IE_PROTO)has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result}},"_to-iobject.js":function(require,exports,module){var IObject=require("./_iobject");var defined=require("./_defined");module.exports=function(it){return IObject(defined(it))}},"_iobject.js":function(require,exports,module){var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},"_cof.js":function(require,exports,module){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},"_defined.js":function(require,exports,module){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},"_array-includes.js":function(require,exports,module){var toIObject=require("./_to-iobject");var toLength=require("./_to-length");var toAbsoluteIndex=require("./_to-absolute-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}return!IS_INCLUDES&&-1}}},"_to-length.js":function(require,exports,module){var toInteger=require("./_to-integer");var min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},"_to-integer.js":function(require,exports,module){var ceil=Math.ceil;var floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},"_to-absolute-index.js":function(require,exports,module){var toInteger=require("./_to-integer");var max=Math.max;var min=Math.min;module.exports=function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length)}},"_shared-key.js":function(require,exports,module){var shared=require("./_shared")("keys");var uid=require("./_uid");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},"_enum-bug-keys.js":function(require,exports,module){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"_object-gops.js":function(require,exports){exports.f=Object.getOwnPropertySymbols},"_object-pie.js":function(require,exports){exports.f={}.propertyIsEnumerable},"_is-array.js":function(require,exports,module){var cof=require("./_cof");module.exports=Array.isArray||function isArray(arg){return cof(arg)=="Array"}},"_object-create.js":function(require,exports,module){var anObject=require("./_an-object");var dPs=require("./_object-dps");var enumBugKeys=require("./_enum-bug-keys");var IE_PROTO=require("./_shared-key")("IE_PROTO");var Empty=function(){};var PROTOTYPE="prototype";var createDict=function(){var iframe=require("./_dom-create")("iframe");var i=enumBugKeys.length;var lt="<";var gt=">";var iframeDocument;iframe.style.display="none";require("./_html").appendChild(iframe);iframe.src="javascript:";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty;Empty[PROTOTYPE]=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:dPs(result,Properties)}},"_object-dps.js":function(require,exports,module){var dP=require("./_object-dp");var anObject=require("./_an-object");var getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=getKeys(Properties);var length=keys.length;var i=0;var P;while(length>i)dP.f(O,P=keys[i++],Properties[P]);return O}},"_html.js":function(require,exports,module){var document=require("./_global").document;module.exports=document&&document.documentElement},"_object-gopn-ext.js":function(require,exports,module){var toIObject=require("./_to-iobject");var gOPN=require("./_object-gopn").f;var toString={}.toString;var windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&toString.call(it)=="[object Window]"?getWindowNames(it):gOPN(toIObject(it))}},"_object-gopn.js":function(require,exports){var $keys=require("./_object-keys-internal");var hiddenKeys=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return $keys(O,hiddenKeys)}},"_object-gopd.js":function(require,exports){var pIE=require("./_object-pie");var createDesc=require("./_property-desc");var toIObject=require("./_to-iobject");var toPrimitive=require("./_to-primitive");var has=require("./_has");var IE8_DOM_DEFINE=require("./_ie8-dom-define");var gOPD=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?gOPD:function getOwnPropertyDescriptor(O,P){O=toIObject(O);P=toPrimitive(P,true);if(IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},"es6.map.js":function(require,exports,module){"use strict";var strong=require("./_collection-strong");var validate=require("./_validate-collection");var MAP="Map";module.exports=require("./_collection")(MAP,function(get){return function Map(){return get(this,arguments.length>0?arguments[0]:undefined)}},{get:function get(key){var entry=strong.getEntry(validate(this,MAP),key);return entry&&entry.v},set:function set(key,value){return strong.def(validate(this,MAP),key===0?0:key,value)}},strong,true)},"_collection-strong.js":function(require,exports,module){"use strict";var dP=require("./_object-dp").f;var create=require("./_object-create");var redefineAll=require("./_redefine-all");var ctx=require("./_ctx");var anInstance=require("./_an-instance");var forOf=require("./_for-of");var $iterDefine=require("./_iter-define");var step=require("./_iter-step");var setSpecies=require("./_set-species");var DESCRIPTORS=require("./_descriptors");var fastKey=require("./_meta").fastKey;var validate=require("./_validate-collection");var SIZE=DESCRIPTORS?"_s":"size";var getEntry=function(that,key){var index=fastKey(key);var entry;if(index!=="F")return that._i[index];for(entry=that._f;entry;entry=entry.n){if(entry.k==key)return entry}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i");that._t=NAME;that._i=create(null);that._f=undefined;that._l=undefined;that[SIZE]=0;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that)});redefineAll(C.prototype,{clear:function clear(){for(var that=validate(this,NAME),data=that._i,entry=that._f;entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that._f=that._l=undefined;that[SIZE]=0},delete:function(key){var that=validate(this,NAME);var entry=getEntry(that,key);if(entry){var next=entry.n;var prev=entry.p;delete that._i[entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that._f==entry)that._f=next;if(that._l==entry)that._l=prev;that[SIZE]--}return!!entry},forEach:function forEach(callbackfn){validate(this,NAME);var f=ctx(callbackfn,arguments.length>1?arguments[1]:undefined,3);var entry;while(entry=entry?entry.n:this._f){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p}},has:function has(key){return!!getEntry(validate(this,NAME),key)}});if(DESCRIPTORS)dP(C.prototype,"size",{get:function(){return validate(this,NAME)[SIZE]}});return C},def:function(that,key,value){var entry=getEntry(that,key);var prev,index;if(entry){entry.v=value}else{that._l=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that._l,n:undefined,r:false};if(!that._f)that._f=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!=="F")that._i[index]=entry}return that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=validate(iterated,NAME);this._k=kind;this._l=undefined},function(){var that=this;var kind=that._k;var entry=that._l;while(entry&&entry.r)entry=entry.p;if(!that._t||!(that._l=entry=entry?entry.n:that._t._f)){that._t=undefined;return step(1)}if(kind=="keys")return step(0,entry.k);if(kind=="values")return step(0,entry.v);return step(0,[entry.k,entry.v])},IS_MAP?"entries":"values",!IS_MAP,true);setSpecies(NAME)}}},"_redefine-all.js":function(require,exports,module){var redefine=require("./_redefine");module.exports=function(target,src,safe){for(var key in src)redefine(target,key,src[key],safe);return target}},"_an-instance.js":function(require,exports,module){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||forbiddenField!==undefined&&forbiddenField in it){throw TypeError(name+": incorrect invocation!")}return it}},"_for-of.js":function(require,exports,module){var ctx=require("./_ctx");var call=require("./_iter-call");var isArrayIter=require("./_is-array-iter");var anObject=require("./_an-object");var toLength=require("./_to-length");var getIterFn=require("./core.get-iterator-method");var BREAK={};var RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable);var f=ctx(fn,that,entries?2:1);var index=0;var length,step,iterator,result;if(typeof iterFn!="function")throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=call(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result}};exports.BREAK=BREAK;exports.RETURN=RETURN},"_iter-call.js":function(require,exports,module){var anObject=require("./_an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},"_is-array-iter.js":function(require,exports,module){var Iterators=require("./_iterators");var ITERATOR=require("./_wks")("iterator");var ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},"_iterators.js":function(require,exports,module){module.exports={}},"core.get-iterator-method.js":function(require,exports,module){var classof=require("./_classof");var ITERATOR=require("./_wks")("iterator");var Iterators=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},"_classof.js":function(require,exports,module){var cof=require("./_cof");var TAG=require("./_wks")("toStringTag");var ARG=cof(function(){return arguments}())=="Arguments";var tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=tryGet(O=Object(it),TAG))=="string"?T:ARG?cof(O):(B=cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B}},"_iter-define.js":function(require,exports,module){"use strict";var LIBRARY=require("./_library");var $export=require("./_export");var redefine=require("./_redefine");var hide=require("./_hide");var has=require("./_has");var Iterators=require("./_iterators");var $iterCreate=require("./_iter-create");var setToStringTag=require("./_set-to-string-tag");var getPrototypeOf=require("./_object-gpo");var ITERATOR=require("./_wks")("iterator");var BUGGY=!([].keys&&"next"in[].keys());var FF_ITERATOR="@@iterator";var KEYS="keys";var VALUES="values";var returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator";var DEF_VALUES=DEFAULT==VALUES;var VALUES_BUG=false;var proto=Base.prototype;var $native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT];var $default=$native||getMethod(DEFAULT);var $entries=DEFAULT?!DEF_VALUES?$default:getMethod("entries"):undefined;var $anyNative=NAME=="Array"?proto.entries||$native:$native;var methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=getPrototypeOf($anyNative.call(new Base));if(IteratorPrototype!==Object.prototype&&IteratorPrototype.next){setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&!has(IteratorPrototype,ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis)}}if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},"_iter-create.js":function(require,exports,module){"use strict";var create=require("./_object-create");var descriptor=require("./_property-desc");var setToStringTag=require("./_set-to-string-tag");var IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),function(){return this});module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}},"_object-gpo.js":function(require,exports,module){var has=require("./_has");var toObject=require("./_to-object");var IE_PROTO=require("./_shared-key")("IE_PROTO");var ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor=="function"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null}},"_to-object.js":function(require,exports,module){var defined=require("./_defined");module.exports=function(it){return Object(defined(it))}},"_iter-step.js":function(require,exports,module){module.exports=function(done,value){return{value:value,done:!!done}}},"_set-species.js":function(require,exports,module){"use strict";var global=require("./_global");var dP=require("./_object-dp");var DESCRIPTORS=require("./_descriptors");var SPECIES=require("./_wks")("species");module.exports=function(KEY){var C=global[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])dP.f(C,SPECIES,{configurable:true,get:function(){return this}})}},"_validate-collection.js":function(require,exports,module){var isObject=require("./_is-object");module.exports=function(it,TYPE){if(!isObject(it)||it._t!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required!");return it}},"_collection.js":function(require,exports,module){"use strict";var global=require("./_global");var $export=require("./_export");var redefine=require("./_redefine");var redefineAll=require("./_redefine-all");var meta=require("./_meta");var forOf=require("./_for-of");var anInstance=require("./_an-instance");var isObject=require("./_is-object");var fails=require("./_fails");var $iterDetect=require("./_iter-detect");var setToStringTag=require("./_set-to-string-tag");var inheritIfRequired=require("./_inherit-if-required");module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME];var C=Base;var ADDER=IS_MAP?"set":"add";var proto=C&&C.prototype;var O={};var fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,KEY=="delete"?function(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="has"?function has(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="get"?function get(a){return IS_WEAK&&!isObject(a)?undefined:fn.call(this,a===0?0:a)}:KEY=="add"?function add(a){fn.call(this,a===0?0:a);return this}:function set(a,b){fn.call(this,a===0?0:a,b);return this})};if(typeof C!="function"||!(IS_WEAK||proto.forEach&&!fails(function(){(new C).entries().next()}))){C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER);redefineAll(C.prototype,methods);meta.NEED=true}else{var instance=new C;var HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance;var THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)});var ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter)});var BUGGY_ZERO=!IS_WEAK&&fails(function(){var $instance=new C;var index=5;while(index--)$instance[ADDER](index,index);return!$instance.has(-0)});if(!ACCEPT_ITERABLES){C=wrapper(function(target,iterable){anInstance(target,C,NAME);var that=inheritIfRequired(new Base,target,C);if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);return that});C.prototype=proto;proto.constructor=C}if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod("delete");fixMethod("has");IS_MAP&&fixMethod("get")}if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);if(IS_WEAK&&proto.clear)delete proto.clear}setToStringTag(C,NAME);O[NAME]=C;$export($export.G+$export.W+$export.F*(C!=Base),O);if(!IS_WEAK)common.setStrong(C,NAME,IS_MAP);return C}},"_iter-detect.js":function(require,exports,module){var ITERATOR=require("./_wks")("iterator");var SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7];var iter=arr[ITERATOR]();iter.next=function(){return{done:safe=true}};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},"_inherit-if-required.js":function(require,exports,module){var isObject=require("./_is-object");var setPrototypeOf=require("./_set-proto").set;module.exports=function(that,target,C){var S=target.constructor;var P;if(S!==C&&typeof S=="function"&&(P=S.prototype)!==C.prototype&&isObject(P)&&setPrototypeOf){setPrototypeOf(that,P)}return that}},"_set-proto.js":function(require,exports,module){var isObject=require("./_is-object");var anObject=require("./_an-object");var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},"es6.set.js":function(require,exports,module){"use strict";var strong=require("./_collection-strong");var validate=require("./_validate-collection");var SET="Set";module.exports=require("./_collection")(SET,function(get){return function Set(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function add(value){return strong.def(validate(this,SET),value=value===0?0:value,value)}},strong)},"es6.string.iterator.js":function(require){"use strict";var $at=require("./_string-at")(true);require("./_iter-define")(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t;var index=this._i;var point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}})},"_string-at.js":function(require,exports,module){var toInteger=require("./_to-integer");var defined=require("./_defined");module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that));var i=toInteger(pos);var l=s.length;var a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},"es6.array.is-array.js":function(require){var $export=require("./_export");$export($export.S,"Array",{isArray:require("./_is-array")})},"es6.array.from.js":function(require){"use strict";var ctx=require("./_ctx");var $export=require("./_export");var toObject=require("./_to-object");var call=require("./_iter-call");var isArrayIter=require("./_is-array-iter");var toLength=require("./_to-length");var createProperty=require("./_create-property");var getIterFn=require("./core.get-iterator-method");$export($export.S+$export.F*!require("./_iter-detect")(function(iter){Array.from(iter)}),"Array",{from:function from(arrayLike){var O=toObject(arrayLike);var C=typeof this=="function"?this:Array;var aLen=arguments.length;var mapfn=aLen>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var index=0;var iterFn=getIterFn(O);var length,result,step,iterator;if(mapping)mapfn=ctx(mapfn,aLen>2?arguments[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++){createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],true):step.value)}}else{length=toLength(O.length);for(result=new C(length);length>index;index++){createProperty(result,index,mapping?mapfn(O[index],index):O[index])}}result.length=index;return result}})},"_create-property.js":function(require,exports,module){"use strict";var $defineProperty=require("./_object-dp");var createDesc=require("./_property-desc");module.exports=function(object,index,value){if(index in object)$defineProperty.f(object,index,createDesc(0,value));else object[index]=value}},"es6.array.of.js":function(require){"use strict";var $export=require("./_export");var createProperty=require("./_create-property");$export($export.S+$export.F*require("./_fails")(function(){function F(){}return!(Array.of.call(F)instanceof F)}),"Array",{of:function of(){var index=0;var aLen=arguments.length;var result=new(typeof this=="function"?this:Array)(aLen);while(aLen>index)createProperty(result,index,arguments[index++]);result.length=aLen;return result}})},"es6.array.join.js":function(require){"use strict";var $export=require("./_export");var toIObject=require("./_to-iobject");var arrayJoin=[].join;$export($export.P+$export.F*(require("./_iobject")!=Object||!require("./_strict-method")(arrayJoin)),"Array",{join:function join(separator){return arrayJoin.call(toIObject(this),separator===undefined?",":separator)}})},"_strict-method.js":function(require,exports,module){"use strict";var fails=require("./_fails");module.exports=function(method,arg){return!!method&&fails(function(){arg?method.call(null,function(){},1):method.call(null)})}},"es6.array.slice.js":function(require){"use strict";var $export=require("./_export");var html=require("./_html");var cof=require("./_cof");var toAbsoluteIndex=require("./_to-absolute-index");var toLength=require("./_to-length");var arraySlice=[].slice;$export($export.P+$export.F*require("./_fails")(function(){if(html)arraySlice.call(html)}),"Array",{slice:function slice(begin,end){var len=toLength(this.length);var klass=cof(this);end=end===undefined?len:end;if(klass=="Array")return arraySlice.call(this,begin,end);var start=toAbsoluteIndex(begin,len);var upTo=toAbsoluteIndex(end,len);var size=toLength(upTo-start);var cloned=Array(size);var i=0;for(;i<size;i++)cloned[i]=klass=="String"?this.charAt(start+i):this[start+i];return cloned}})},"es6.array.sort.js":function(require){"use strict";var $export=require("./_export");var aFunction=require("./_a-function");var toObject=require("./_to-object");var fails=require("./_fails");var $sort=[].sort;var test=[1,2,3];$export($export.P+$export.F*(fails(function(){test.sort(undefined)})||!fails(function(){test.sort(null)})||!require("./_strict-method")($sort)),"Array",{sort:function sort(comparefn){return comparefn===undefined?$sort.call(toObject(this)):$sort.call(toObject(this),aFunction(comparefn))}})},"es6.array.for-each.js":function(require){"use strict";var $export=require("./_export");var $forEach=require("./_array-methods")(0);var STRICT=require("./_strict-method")([].forEach,true);$export($export.P+$export.F*!STRICT,"Array",{forEach:function forEach(callbackfn){return $forEach(this,callbackfn,arguments[1])}})},"_array-methods.js":function(require,exports,module){var ctx=require("./_ctx");var IObject=require("./_iobject");var toObject=require("./_to-object");var toLength=require("./_to-length");var asc=require("./_array-species-create");module.exports=function(TYPE,$create){var IS_MAP=TYPE==1;var IS_FILTER=TYPE==2;var IS_SOME=TYPE==3;var IS_EVERY=TYPE==4;var IS_FIND_INDEX=TYPE==6;var NO_HOLES=TYPE==5||IS_FIND_INDEX;var create=$create||asc;return function($this,callbackfn,that){var O=toObject($this);var self=IObject(O);var f=ctx(callbackfn,that,3);var length=toLength(self.length);var index=0;var result=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined;var val,res;for(;length>index;index++)if(NO_HOLES||index in self){val=self[index];res=f(val,index,O);if(TYPE){if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return false}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},"_array-species-create.js":function(require,exports,module){var speciesConstructor=require("./_array-species-constructor");module.exports=function(original,length){return new(speciesConstructor(original))(length)}},"_array-species-constructor.js":function(require,exports,module){var isObject=require("./_is-object");var isArray=require("./_is-array");var SPECIES=require("./_wks")("species");module.exports=function(original){var C;if(isArray(original)){C=original.constructor;if(typeof C=="function"&&(C===Array||isArray(C.prototype)))C=undefined;if(isObject(C)){C=C[SPECIES];if(C===null)C=undefined}}return C===undefined?Array:C}},"es6.array.map.js":function(require){"use strict";var $export=require("./_export");var $map=require("./_array-methods")(1);$export($export.P+$export.F*!require("./_strict-method")([].map,true),"Array",{map:function map(callbackfn){return $map(this,callbackfn,arguments[1])}})},"es6.array.filter.js":function(require){"use strict";var $export=require("./_export");var $filter=require("./_array-methods")(2);$export($export.P+$export.F*!require("./_strict-method")([].filter,true),"Array",{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments[1])}})},"es6.array.some.js":function(require){"use strict";var $export=require("./_export");var $some=require("./_array-methods")(3);$export($export.P+$export.F*!require("./_strict-method")([].some,true),"Array",{some:function some(callbackfn){return $some(this,callbackfn,arguments[1])}})},"es6.array.every.js":function(require){"use strict";var $export=require("./_export");var $every=require("./_array-methods")(4);$export($export.P+$export.F*!require("./_strict-method")([].every,true),"Array",{every:function every(callbackfn){return $every(this,callbackfn,arguments[1])}})},"es6.array.reduce.js":function(require){"use strict";var $export=require("./_export");var $reduce=require("./_array-reduce");$export($export.P+$export.F*!require("./_strict-method")([].reduce,true),"Array",{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],false)}})},"_array-reduce.js":function(require,exports,module){var aFunction=require("./_a-function");var toObject=require("./_to-object");var IObject=require("./_iobject");var toLength=require("./_to-length");module.exports=function(that,callbackfn,aLen,memo,isRight){aFunction(callbackfn);var O=toObject(that);var self=IObject(O);var length=toLength(O.length);var index=isRight?length-1:0;var i=isRight?-1:1;if(aLen<2)for(;;){if(index in self){memo=self[index];index+=i;break}index+=i;if(isRight?index<0:length<=index){throw TypeError("Reduce of empty array with no initial value")}}for(;isRight?index>=0:length>index;index+=i)if(index in self){memo=callbackfn(memo,self[index],index,O)}return memo}},"es6.array.reduce-right.js":function(require){"use strict";var $export=require("./_export");var $reduce=require("./_array-reduce");$export($export.P+$export.F*!require("./_strict-method")([].reduceRight,true),"Array",{reduceRight:function reduceRight(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],true)}})},"es6.array.index-of.js":function(require){"use strict";var $export=require("./_export");var $indexOf=require("./_array-includes")(false);var $native=[].indexOf;var NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!require("./_strict-method")($native)),"Array",{indexOf:function indexOf(searchElement){return NEGATIVE_ZERO?$native.apply(this,arguments)||0:$indexOf(this,searchElement,arguments[1])}})},"es6.array.last-index-of.js":function(require){"use strict";var $export=require("./_export");var toIObject=require("./_to-iobject");var toInteger=require("./_to-integer");var toLength=require("./_to-length");var $native=[].lastIndexOf;var NEGATIVE_ZERO=!!$native&&1/[1].lastIndexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!require("./_strict-method")($native)),"Array",{lastIndexOf:function lastIndexOf(searchElement){if(NEGATIVE_ZERO)return $native.apply(this,arguments)||0;var O=toIObject(this);var length=toLength(O.length);var index=length-1;if(arguments.length>1)index=Math.min(index,toInteger(arguments[1]));if(index<0)index=length+index;for(;index>=0;index--)if(index in O)if(O[index]===searchElement)return index||0;return-1}})},"es6.array.copy-within.js":function(require){var $export=require("./_export");$export($export.P,"Array",{copyWithin:require("./_array-copy-within")});require("./_add-to-unscopables")("copyWithin")},"_array-copy-within.js":function(require,exports,module){"use strict";var toObject=require("./_to-object");var toAbsoluteIndex=require("./_to-absolute-index");var toLength=require("./_to-length");module.exports=[].copyWithin||function copyWithin(target,start){var O=toObject(this);var len=toLength(O.length);var to=toAbsoluteIndex(target,len);var from=toAbsoluteIndex(start,len);var end=arguments.length>2?arguments[2]:undefined;var count=Math.min((end===undefined?len:toAbsoluteIndex(end,len))-from,len-to);var inc=1;if(from<to&&to<from+count){inc=-1;from+=count-1;to+=count-1}while(count-- >0){if(from in O)O[to]=O[from];else delete O[to];to+=inc;from+=inc}return O}},"_add-to-unscopables.js":function(require,exports,module){var UNSCOPABLES=require("./_wks")("unscopables");var ArrayProto=Array.prototype;if(ArrayProto[UNSCOPABLES]==undefined)require("./_hide")(ArrayProto,UNSCOPABLES,{});module.exports=function(key){ArrayProto[UNSCOPABLES][key]=true}},"es6.array.fill.js":function(require){var $export=require("./_export");$export($export.P,"Array",{fill:require("./_array-fill")});require("./_add-to-unscopables")("fill")},"_array-fill.js":function(require,exports,module){"use strict";var toObject=require("./_to-object");var toAbsoluteIndex=require("./_to-absolute-index");var toLength=require("./_to-length");module.exports=function fill(value){var O=toObject(this);var length=toLength(O.length);var aLen=arguments.length;var index=toAbsoluteIndex(aLen>1?arguments[1]:undefined,length);var end=aLen>2?arguments[2]:undefined;var endPos=end===undefined?length:toAbsoluteIndex(end,length);while(endPos>index)O[index++]=value;return O}},"es6.array.find.js":function(require){"use strict";var $export=require("./_export");var $find=require("./_array-methods")(5);var KEY="find";var forced=true;if(KEY in[])Array(1)[KEY](function(){forced=false});$export($export.P+$export.F*forced,"Array",{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined)}});require("./_add-to-unscopables")(KEY)},"es6.array.find-index.js":function(require){"use strict";var $export=require("./_export");var $find=require("./_array-methods")(6);var KEY="findIndex";var forced=true;if(KEY in[])Array(1)[KEY](function(){forced=false});$export($export.P+$export.F*forced,"Array",{findIndex:function findIndex(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined)}});require("./_add-to-unscopables")(KEY)},"es6.array.species.js":function(require){require("./_set-species")("Array")},"es6.array.iterator.js":function(require,exports,module){"use strict";var addToUnscopables=require("./_add-to-unscopables");var step=require("./_iter-step");var Iterators=require("./_iterators");var toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind},function(){var O=this._t;var kind=this._k;var index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])},"values");Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries")},"es6.function.bind.js":function(require){var $export=require("./_export");$export($export.P,"Function",{bind:require("./_bind")})},"_bind.js":function(require,exports,module){"use strict";var aFunction=require("./_a-function");var isObject=require("./_is-object");var invoke=require("./_invoke");var arraySlice=[].slice;var factories={};var construct=function(F,len,args){if(!(len in factories)){for(var n=[],i=0;i<len;i++)n[i]="a["+i+"]";factories[len]=Function("F,a","return new F("+n.join(",")+")")}return factories[len](F,args)};module.exports=Function.bind||function bind(that){var fn=aFunction(this);var partArgs=arraySlice.call(arguments,1);var bound=function(){var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?construct(fn,args.length,args):invoke(fn,args,that)};if(isObject(fn.prototype))bound.prototype=fn.prototype;return bound}},"_invoke.js":function(require,exports,module){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},"es6.function.name.js":function(require){var dP=require("./_object-dp").f;var FProto=Function.prototype;var nameRE=/^\s*function ([^ (]*)/;var NAME="name";NAME in FProto||require("./_descriptors")&&dP(FProto,NAME,{configurable:true,get:function(){try{return(""+this).match(nameRE)[1]}catch(e){return""}}})},"es6.function.has-instance.js":function(require){"use strict";var isObject=require("./_is-object");var getPrototypeOf=require("./_object-gpo");var HAS_INSTANCE=require("./_wks")("hasInstance");var FunctionProto=Function.prototype;if(!(HAS_INSTANCE in FunctionProto))require("./_object-dp").f(FunctionProto,HAS_INSTANCE,{value:function(O){if(typeof this!="function"||!isObject(O))return false;if(!isObject(this.prototype))return O instanceof this;while(O=getPrototypeOf(O))if(this.prototype===O)return true;return false}})},"es6.math.acosh.js":function(require){var $export=require("./_export");var log1p=require("./_math-log1p");var sqrt=Math.sqrt;var $acosh=Math.acosh;$export($export.S+$export.F*!($acosh&&Math.floor($acosh(Number.MAX_VALUE))==710&&$acosh(Infinity)==Infinity),"Math",{acosh:function acosh(x){return(x=+x)<1?NaN:x>94906265.62425156?Math.log(x)+Math.LN2:log1p(x-1+sqrt(x-1)*sqrt(x+1))}})},"_math-log1p.js":function(require,exports,module){module.exports=Math.log1p||function log1p(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:Math.log(1+x)}},"es6.math.asinh.js":function(require){var $export=require("./_export");var $asinh=Math.asinh;function asinh(x){return!isFinite(x=+x)||x==0?x:x<0?-asinh(-x):Math.log(x+Math.sqrt(x*x+1))}$export($export.S+$export.F*!($asinh&&1/$asinh(0)>0),"Math",{asinh:asinh})},"es6.math.atanh.js":function(require){var $export=require("./_export");var $atanh=Math.atanh;$export($export.S+$export.F*!($atanh&&1/$atanh(-0)<0),"Math",{atanh:function atanh(x){return(x=+x)==0?x:Math.log((1+x)/(1-x))/2}})},"es6.math.cbrt.js":function(require){var $export=require("./_export");var sign=require("./_math-sign");$export($export.S,"Math",{cbrt:function cbrt(x){return sign(x=+x)*Math.pow(Math.abs(x),1/3)}})},"_math-sign.js":function(require,exports,module){module.exports=Math.sign||function sign(x){return(x=+x)==0||x!=x?x:x<0?-1:1}},"es6.math.clz32.js":function(require){var $export=require("./_export");$export($export.S,"Math",{clz32:function clz32(x){return(x>>>=0)?31-Math.floor(Math.log(x+.5)*Math.LOG2E):32}})},"es6.math.cosh.js":function(require){var $export=require("./_export");var exp=Math.exp;$export($export.S,"Math",{cosh:function cosh(x){return(exp(x=+x)+exp(-x))/2}})},"es6.math.expm1.js":function(require){var $export=require("./_export");var $expm1=require("./_math-expm1");$export($export.S+$export.F*($expm1!=Math.expm1),"Math",{expm1:$expm1})},"_math-expm1.js":function(require,exports,module){var $expm1=Math.expm1;module.exports=!$expm1||$expm1(10)>22025.465794806718||$expm1(10)<22025.465794806718||$expm1(-2e-17)!=-2e-17?function expm1(x){return(x=+x)==0?x:x>-1e-6&&x<1e-6?x+x*x/2:Math.exp(x)-1}:$expm1},"es6.math.fround.js":function(require){var $export=require("./_export");$export($export.S,"Math",{fround:require("./_math-fround")})},"_math-fround.js":function(require,exports,module){var sign=require("./_math-sign");var pow=Math.pow;var EPSILON=pow(2,-52);var EPSILON32=pow(2,-23);var MAX32=pow(2,127)*(2-EPSILON32);var MIN32=pow(2,-126);var roundTiesToEven=function(n){return n+1/EPSILON-1/EPSILON};module.exports=Math.fround||function fround(x){var $abs=Math.abs(x);var $sign=sign(x);var a,result;if($abs<MIN32)return $sign*roundTiesToEven($abs/MIN32/EPSILON32)*MIN32*EPSILON32;a=(1+EPSILON32/EPSILON)*$abs;result=a-(a-$abs);if(result>MAX32||result!=result)return $sign*Infinity;return $sign*result}},"es6.math.hypot.js":function(require){var $export=require("./_export");var abs=Math.abs;$export($export.S,"Math",{hypot:function hypot(value1,value2){var sum=0;var i=0;var aLen=arguments.length;var larg=0;var arg,div;while(i<aLen){arg=abs(arguments[i++]);if(larg<arg){div=larg/arg;sum=sum*div*div+1;larg=arg}else if(arg>0){div=arg/larg;sum+=div*div}else sum+=arg}return larg===Infinity?Infinity:larg*Math.sqrt(sum)}})},"es6.math.imul.js":function(require){var $export=require("./_export");var $imul=Math.imul;$export($export.S+$export.F*require("./_fails")(function(){return $imul(4294967295,5)!=-5||$imul.length!=2}),"Math",{imul:function imul(x,y){var UINT16=65535;var xn=+x;var yn=+y;var xl=UINT16&xn;var yl=UINT16&yn;return 0|xl*yl+((UINT16&xn>>>16)*yl+xl*(UINT16&yn>>>16)<<16>>>0)}})},"es6.math.log10.js":function(require){var $export=require("./_export");$export($export.S,"Math",{log10:function log10(x){return Math.log(x)*Math.LOG10E}})},"es6.math.log1p.js":function(require){var $export=require("./_export");$export($export.S,"Math",{log1p:require("./_math-log1p")})},"es6.math.log2.js":function(require){var $export=require("./_export");$export($export.S,"Math",{log2:function log2(x){return Math.log(x)/Math.LN2}})},"es6.math.sign.js":function(require){var $export=require("./_export");$export($export.S,"Math",{sign:require("./_math-sign")})},"es6.math.sinh.js":function(require){var $export=require("./_export");var expm1=require("./_math-expm1");var exp=Math.exp;$export($export.S+$export.F*require("./_fails")(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function sinh(x){return Math.abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(Math.E/2)}})},"es6.math.tanh.js":function(require){var $export=require("./_export");var expm1=require("./_math-expm1");var exp=Math.exp;$export($export.S,"Math",{tanh:function tanh(x){var a=expm1(x=+x);var b=expm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp(x)+exp(-x))}})},"es6.math.trunc.js":function(require){var $export=require("./_export");$export($export.S,"Math",{trunc:function trunc(it){return(it>0?Math.floor:Math.ceil)(it)}})},"es6.object.create.js":function(require){var $export=require("./_export");$export($export.S,"Object",{create:require("./_object-create")})},"es6.object.define-property.js":function(require){var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperty:require("./_object-dp").f})},"es6.object.define-properties.js":function(require){var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperties:require("./_object-dps")})},"es6.object.get-own-property-descriptor.js":function(require){var toIObject=require("./_to-iobject");var $getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_object-sap")("getOwnPropertyDescriptor",function(){return function getOwnPropertyDescriptor(it,key){return $getOwnPropertyDescriptor(toIObject(it),key)}})},"_object-sap.js":function(require,exports,module){var $export=require("./_export");var core=require("./_core");var fails=require("./_fails");module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY];var exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},"es6.object.get-prototype-of.js":function(require){var toObject=require("./_to-object");var $getPrototypeOf=require("./_object-gpo");require("./_object-sap")("getPrototypeOf",function(){return function getPrototypeOf(it){return $getPrototypeOf(toObject(it))}})},"es6.object.keys.js":function(require){var toObject=require("./_to-object");var $keys=require("./_object-keys");require("./_object-sap")("keys",function(){return function keys(it){return $keys(toObject(it))}})},"es6.object.get-own-property-names.js":function(require){require("./_object-sap")("getOwnPropertyNames",function(){return require("./_object-gopn-ext").f})},"es6.object.freeze.js":function(require){var isObject=require("./_is-object");var meta=require("./_meta").onFreeze;require("./_object-sap")("freeze",function($freeze){return function freeze(it){return $freeze&&isObject(it)?$freeze(meta(it)):it}})},"es6.object.seal.js":function(require){var isObject=require("./_is-object");var meta=require("./_meta").onFreeze;require("./_object-sap")("seal",function($seal){return function seal(it){return $seal&&isObject(it)?$seal(meta(it)):it}})},"es6.object.prevent-extensions.js":function(require){var isObject=require("./_is-object");var meta=require("./_meta").onFreeze;require("./_object-sap")("preventExtensions",function($preventExtensions){return function preventExtensions(it){return $preventExtensions&&isObject(it)?$preventExtensions(meta(it)):it}})},"es6.object.is-frozen.js":function(require){var isObject=require("./_is-object");require("./_object-sap")("isFrozen",function($isFrozen){return function isFrozen(it){return isObject(it)?$isFrozen?$isFrozen(it):false:true}})},"es6.object.is-sealed.js":function(require){var isObject=require("./_is-object");require("./_object-sap")("isSealed",function($isSealed){return function isSealed(it){return isObject(it)?$isSealed?$isSealed(it):false:true}})},"es6.object.is-extensible.js":function(require){var isObject=require("./_is-object");require("./_object-sap")("isExtensible",function($isExtensible){return function isExtensible(it){return isObject(it)?$isExtensible?$isExtensible(it):true:false}})},"es6.object.assign.js":function(require){var $export=require("./_export");$export($export.S+$export.F,"Object",{assign:require("./_object-assign")})},"_object-assign.js":function(require,exports,module){"use strict";var getKeys=require("./_object-keys");var gOPS=require("./_object-gops");var pIE=require("./_object-pie");var toObject=require("./_to-object");var IObject=require("./_iobject");var $assign=Object.assign;module.exports=!$assign||require("./_fails")(function(){var A={};var B={};var S=Symbol();var K="abcdefghijklmnopqrst";A[S]=7;K.split("").forEach(function(k){B[k]=k});return $assign({},A)[S]!=7||Object.keys($assign({},B)).join("")!=K})?function assign(target,source){var T=toObject(target);var aLen=arguments.length;var index=1;var getSymbols=gOPS.f;var isEnum=pIE.f;while(aLen>index){var S=IObject(arguments[index++]);var keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S);var length=keys.length;var j=0;var key;while(length>j)if(isEnum.call(S,key=keys[j++]))T[key]=S[key]}return T}:$assign},"es6.object.is.js":function(require){var $export=require("./_export");$export($export.S,"Object",{is:require("./_same-value")})},"_same-value.js":function(require,exports,module){module.exports=Object.is||function is(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y}},"es6.object.set-prototype-of.js":function(require){var $export=require("./_export");$export($export.S,"Object",{setPrototypeOf:require("./_set-proto").set})},"es6.object.to-string.js":function(require){"use strict";var classof=require("./_classof");var test={};test[require("./_wks")("toStringTag")]="z";if(test+""!="[object z]"){require("./_redefine")(Object.prototype,"toString",function toString(){return"[object "+classof(this)+"]"},true)}},"es6.regexp.constructor.js":function(require){var global=require("./_global");var inheritIfRequired=require("./_inherit-if-required");var dP=require("./_object-dp").f;var gOPN=require("./_object-gopn").f;var isRegExp=require("./_is-regexp");var $flags=require("./_flags");var $RegExp=global.RegExp;var Base=$RegExp;var proto=$RegExp.prototype;var re1=/a/g;var re2=/a/g;var CORRECT_NEW=new $RegExp(re1)!==re1;if(require("./_descriptors")&&(!CORRECT_NEW||require("./_fails")(function(){re2[require("./_wks")("match")]=false;return $RegExp(re1)!=re1||$RegExp(re2)==re2||$RegExp(re1,"i")!="/a/i"}))){$RegExp=function RegExp(p,f){var tiRE=this instanceof $RegExp;var piRE=isRegExp(p);var fiU=f===undefined;return!tiRE&&piRE&&p.constructor===$RegExp&&fiU?p:inheritIfRequired(CORRECT_NEW?new Base(piRE&&!fiU?p.source:p,f):Base((piRE=p instanceof $RegExp)?p.source:p,piRE&&fiU?$flags.call(p):f),tiRE?this:proto,$RegExp)};var proxy=function(key){key in $RegExp||dP($RegExp,key,{configurable:true,get:function(){return Base[key]},set:function(it){Base[key]=it}})};for(var keys=gOPN(Base),i=0;keys.length>i;)proxy(keys[i++]);proto.constructor=$RegExp;$RegExp.prototype=proto;require("./_redefine")(global,"RegExp",$RegExp)}require("./_set-species")("RegExp")},"_is-regexp.js":function(require,exports,module){var isObject=require("./_is-object");var cof=require("./_cof");var MATCH=require("./_wks")("match");module.exports=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:cof(it)=="RegExp")}},"_flags.js":function(require,exports,module){"use strict";var anObject=require("./_an-object");module.exports=function(){var that=anObject(this);var result="";if(that.global)result+="g";if(that.ignoreCase)result+="i";if(that.multiline)result+="m";if(that.unicode)result+="u";if(that.sticky)result+="y";return result}},"es6.regexp.to-string.js":function(require){"use strict";require("./es6.regexp.flags");var anObject=require("./_an-object");var $flags=require("./_flags");var DESCRIPTORS=require("./_descriptors");var TO_STRING="toString";var $toString=/./[TO_STRING];var define=function(fn){require("./_redefine")(RegExp.prototype,TO_STRING,fn,true)};if(require("./_fails")(function(){return $toString.call({source:"a",flags:"b"})!="/a/b"})){define(function toString(){var R=anObject(this);return"/".concat(R.source,"/","flags"in R?R.flags:!DESCRIPTORS&&R instanceof RegExp?$flags.call(R):undefined)})}else if($toString.name!=TO_STRING){define(function toString(){return $toString.call(this)})}},"es6.regexp.flags.js":function(require){if(require("./_descriptors")&&/./g.flags!="g")require("./_object-dp").f(RegExp.prototype,"flags",{configurable:true,get:require("./_flags")})},"es6.regexp.match.js":function(require){require("./_fix-re-wks")("match",1,function(defined,MATCH,$match){return[function match(regexp){"use strict";var O=defined(this);var fn=regexp==undefined?undefined:regexp[MATCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[MATCH](String(O))},$match]})},"_fix-re-wks.js":function(require,exports,module){"use strict";var hide=require("./_hide");var redefine=require("./_redefine");var fails=require("./_fails");var defined=require("./_defined");var wks=require("./_wks");module.exports=function(KEY,length,exec){var SYMBOL=wks(KEY);var fns=exec(defined,SYMBOL,""[KEY]);var strfn=fns[0];var rxfn=fns[1];if(fails(function(){var O={};O[SYMBOL]=function(){return 7};return""[KEY](O)!=7})){redefine(String.prototype,KEY,strfn);hide(RegExp.prototype,SYMBOL,length==2?function(string,arg){return rxfn.call(string,this,arg)}:function(string){return rxfn.call(string,this)})}}},"es6.regexp.replace.js":function(require){require("./_fix-re-wks")("replace",2,function(defined,REPLACE,$replace){return[function replace(searchValue,replaceValue){"use strict";var O=defined(this);var fn=searchValue==undefined?undefined:searchValue[REPLACE];return fn!==undefined?fn.call(searchValue,O,replaceValue):$replace.call(String(O),searchValue,replaceValue)},$replace]})},"es6.regexp.search.js":function(require){require("./_fix-re-wks")("search",1,function(defined,SEARCH,$search){return[function search(regexp){"use strict";var O=defined(this);var fn=regexp==undefined?undefined:regexp[SEARCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},$search]})},"es6.regexp.split.js":function(require){require("./_fix-re-wks")("split",2,function(defined,SPLIT,$split){"use strict";var isRegExp=require("./_is-regexp");var _split=$split;var $push=[].push;var $SPLIT="split";var LENGTH="length";var LAST_INDEX="lastIndex";if("abbc"[$SPLIT](/(b)*/)[1]=="c"||"test"[$SPLIT](/(?:)/,-1)[LENGTH]!=4||"ab"[$SPLIT](/(?:ab)*/)[LENGTH]!=2||"."[$SPLIT](/(.?)(.?)/)[LENGTH]!=4||"."[$SPLIT](/()()/)[LENGTH]>1||""[$SPLIT](/.?/)[LENGTH]){var NPCG=/()??/.exec("")[1]===undefined;$split=function(separator,limit){var string=String(this);if(separator===undefined&&limit===0)return[];if(!isRegExp(separator))return _split.call(string,separator,limit);var output=[];var flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":"");var lastLastIndex=0;var splitLimit=limit===undefined?4294967295:limit>>>0;var separatorCopy=new RegExp(separator.source,flags+"g");var separator2,match,lastIndex,lastLength,i;if(!NPCG)separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags);while(match=separatorCopy.exec(string)){lastIndex=match.index+match[0][LENGTH];if(lastIndex>lastLastIndex){output.push(string.slice(lastLastIndex,match.index));if(!NPCG&&match[LENGTH]>1)match[0].replace(separator2,function(){for(i=1;i<arguments[LENGTH]-2;i++)if(arguments[i]===undefined)match[i]=undefined});if(match[LENGTH]>1&&match.index<string[LENGTH])$push.apply(output,match.slice(1));lastLength=match[0][LENGTH];lastLastIndex=lastIndex;if(output[LENGTH]>=splitLimit)break}if(separatorCopy[LAST_INDEX]===match.index)separatorCopy[LAST_INDEX]++}if(lastLastIndex===string[LENGTH]){if(lastLength||!separatorCopy.test(""))output.push("")}else output.push(string.slice(lastLastIndex));return output[LENGTH]>splitLimit?output.slice(0,splitLimit):output}}else if("0"[$SPLIT](undefined,0)[LENGTH]){$split=function(separator,limit){return separator===undefined&&limit===0?[]:_split.call(this,separator,limit)}}return[function split(separator,limit){var O=defined(this);var fn=separator==undefined?undefined:separator[SPLIT];return fn!==undefined?fn.call(separator,O,limit):$split.call(String(O),separator,limit)},$split]})},"es6.string.from-code-point.js":function(require){var $export=require("./_export");var toAbsoluteIndex=require("./_to-absolute-index");var fromCharCode=String.fromCharCode;var $fromCodePoint=String.fromCodePoint;$export($export.S+$export.F*(!!$fromCodePoint&&$fromCodePoint.length!=1),"String",{fromCodePoint:function fromCodePoint(x){var res=[];var aLen=arguments.length;var i=0;var code;while(aLen>i){code=+arguments[i++];if(toAbsoluteIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(code<65536?fromCharCode(code):fromCharCode(((code-=65536)>>10)+55296,code%1024+56320))}return res.join("")}})},"es6.string.raw.js":function(require){var $export=require("./_export");var toIObject=require("./_to-iobject");var toLength=require("./_to-length");$export($export.S,"String",{raw:function raw(callSite){var tpl=toIObject(callSite.raw);var len=toLength(tpl.length);var aLen=arguments.length;var res=[];var i=0;while(len>i){res.push(String(tpl[i++]));if(i<aLen)res.push(String(arguments[i]))}return res.join("")}})},"es6.string.trim.js":function(require){"use strict";require("./_string-trim")("trim",function($trim){return function trim(){return $trim(this,3)}})},"_string-trim.js":function(require,exports,module){var $export=require("./_export");var defined=require("./_defined");var fails=require("./_fails");var spaces=require("./_string-ws");var space="["+spaces+"]";var non="​";var ltrim=RegExp("^"+space+space+"*");var rtrim=RegExp(space+space+"*$");var exporter=function(KEY,exec,ALIAS){var exp={};var FORCE=fails(function(){return!!spaces[KEY]()||non[KEY]()!=non});var fn=exp[KEY]=FORCE?exec(trim):spaces[KEY];if(ALIAS)exp[ALIAS]=fn;$export($export.P+$export.F*FORCE,"String",exp)};var trim=exporter.trim=function(string,TYPE){string=String(defined(string));if(TYPE&1)string=string.replace(ltrim,"");if(TYPE&2)string=string.replace(rtrim,"");return string};module.exports=exporter},"_string-ws.js":function(require,exports,module){module.exports="\t\n\v\f\r   ᠎    "+"         　\u2028\u2029\ufeff"},"es6.string.code-point-at.js":function(require){"use strict";var $export=require("./_export");var $at=require("./_string-at")(false);$export($export.P,"String",{codePointAt:function codePointAt(pos){return $at(this,pos)}})},"es6.string.ends-with.js":function(require){"use strict";var $export=require("./_export");var toLength=require("./_to-length");var context=require("./_string-context");var ENDS_WITH="endsWith";var $endsWith=""[ENDS_WITH];$export($export.P+$export.F*require("./_fails-is-regexp")(ENDS_WITH),"String",{endsWith:function endsWith(searchString){var that=context(this,searchString,ENDS_WITH);var endPosition=arguments.length>1?arguments[1]:undefined;var len=toLength(that.length);var end=endPosition===undefined?len:Math.min(toLength(endPosition),len);var search=String(searchString);return $endsWith?$endsWith.call(that,search,end):that.slice(end-search.length,end)===search}})},"_string-context.js":function(require,exports,module){var isRegExp=require("./_is-regexp");var defined=require("./_defined");module.exports=function(that,searchString,NAME){if(isRegExp(searchString))throw TypeError("String#"+NAME+" doesn't accept regex!");return String(defined(that))}},"_fails-is-regexp.js":function(require,exports,module){var MATCH=require("./_wks")("match");module.exports=function(KEY){var re=/./;try{"/./"[KEY](re)}catch(e){try{re[MATCH]=false;return!"/./"[KEY](re)}catch(f){}}return true}},"es6.string.includes.js":function(require){"use strict";var $export=require("./_export");var context=require("./_string-context");var INCLUDES="includes";$export($export.P+$export.F*require("./_fails-is-regexp")(INCLUDES),"String",{includes:function includes(searchString){return!!~context(this,searchString,INCLUDES).indexOf(searchString,arguments.length>1?arguments[1]:undefined)}})},"es6.string.repeat.js":function(require){var $export=require("./_export");$export($export.P,"String",{repeat:require("./_string-repeat")})},"_string-repeat.js":function(require,exports,module){"use strict";var toInteger=require("./_to-integer");var defined=require("./_defined");module.exports=function repeat(count){var str=String(defined(this));var res="";var n=toInteger(count);if(n<0||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))if(n&1)res+=str;return res}},"es6.string.starts-with.js":function(require){"use strict";var $export=require("./_export");var toLength=require("./_to-length");var context=require("./_string-context");var STARTS_WITH="startsWith";var $startsWith=""[STARTS_WITH];$export($export.P+$export.F*require("./_fails-is-regexp")(STARTS_WITH),"String",{startsWith:function startsWith(searchString){var that=context(this,searchString,STARTS_WITH);var index=toLength(Math.min(arguments.length>1?arguments[1]:undefined,that.length));var search=String(searchString);return $startsWith?$startsWith.call(that,search,index):that.slice(index,index+search.length)===search}})},"es6.string.anchor.js":function(require){"use strict";require("./_string-html")("anchor",function(createHTML){return function anchor(name){return createHTML(this,"a","name",name)}})},"_string-html.js":function(require,exports,module){var $export=require("./_export");var fails=require("./_fails");var defined=require("./_defined");var quot=/"/g;var createHTML=function(string,tag,attribute,value){var S=String(defined(string));var p1="<"+tag;if(attribute!=="")p1+=" "+attribute+'="'+String(value).replace(quot,"&quot;")+'"';return p1+">"+S+"</"+tag+">"};module.exports=function(NAME,exec){var O={};O[NAME]=exec(createHTML);$export($export.P+$export.F*fails(function(){var test=""[NAME]('"');return test!==test.toLowerCase()||test.split('"').length>3}),"String",O)}},"es6.string.big.js":function(require){"use strict";require("./_string-html")("big",function(createHTML){return function big(){return createHTML(this,"big","","")}})},"es6.string.blink.js":function(require){"use strict";require("./_string-html")("blink",function(createHTML){return function blink(){return createHTML(this,"blink","","")}})},"es6.string.bold.js":function(require){"use strict";require("./_string-html")("bold",function(createHTML){return function bold(){return createHTML(this,"b","","")}})},"es6.string.fixed.js":function(require){"use strict";require("./_string-html")("fixed",function(createHTML){return function fixed(){return createHTML(this,"tt","","")}})},"es6.string.fontcolor.js":function(require){"use strict";require("./_string-html")("fontcolor",function(createHTML){return function fontcolor(color){return createHTML(this,"font","color",color)}})},"es6.string.fontsize.js":function(require){"use strict";require("./_string-html")("fontsize",function(createHTML){return function fontsize(size){return createHTML(this,"font","size",size)}})},"es6.string.italics.js":function(require){"use strict";require("./_string-html")("italics",function(createHTML){return function italics(){return createHTML(this,"i","","")}})},"es6.string.link.js":function(require){"use strict";require("./_string-html")("link",function(createHTML){return function link(url){return createHTML(this,"a","href",url)}})},"es6.string.small.js":function(require){"use strict";require("./_string-html")("small",function(createHTML){return function small(){return createHTML(this,"small","","")}})},"es6.string.strike.js":function(require){"use strict";require("./_string-html")("strike",function(createHTML){return function strike(){return createHTML(this,"strike","","")}})},"es6.string.sub.js":function(require){"use strict";require("./_string-html")("sub",function(createHTML){return function sub(){return createHTML(this,"sub","","")}})},"es6.string.sup.js":function(require){"use strict";require("./_string-html")("sup",function(createHTML){return function sup(){return createHTML(this,"sup","","")}})},"es6.weak-map.js":function(require,exports,module){"use strict";var each=require("./_array-methods")(0);var redefine=require("./_redefine");var meta=require("./_meta");var assign=require("./_object-assign");var weak=require("./_collection-weak");var isObject=require("./_is-object");var fails=require("./_fails");var validate=require("./_validate-collection");var WEAK_MAP="WeakMap";var getWeak=meta.getWeak;var isExtensible=Object.isExtensible;var uncaughtFrozenStore=weak.ufstore;var tmp={};var InternalMap;var wrapper=function(get){return function WeakMap(){return get(this,arguments.length>0?arguments[0]:undefined)}};var methods={get:function get(key){if(isObject(key)){var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,WEAK_MAP)).get(key);return data?data[this._i]:undefined}},set:function set(key,value){return weak.def(validate(this,WEAK_MAP),key,value)}};var $WeakMap=module.exports=require("./_collection")(WEAK_MAP,wrapper,methods,weak,true,true);if(fails(function(){return(new $WeakMap).set((Object.freeze||Object)(tmp),7).get(tmp)!=7})){InternalMap=weak.getConstructor(wrapper,WEAK_MAP);assign(InternalMap.prototype,methods);meta.NEED=true;each(["delete","has","get","set"],function(key){var proto=$WeakMap.prototype;var method=proto[key];redefine(proto,key,function(a,b){if(isObject(a)&&!isExtensible(a)){if(!this._f)this._f=new InternalMap;var result=this._f[key](a,b);return key=="set"?this:result}return method.call(this,a,b)})})}},"_collection-weak.js":function(require,exports,module){"use strict";var redefineAll=require("./_redefine-all");var getWeak=require("./_meta").getWeak;var anObject=require("./_an-object");var isObject=require("./_is-object");var anInstance=require("./_an-instance");var forOf=require("./_for-of");var createArrayMethod=require("./_array-methods");var $has=require("./_has");var validate=require("./_validate-collection");var arrayFind=createArrayMethod(5);var arrayFindIndex=createArrayMethod(6);var id=0;var uncaughtFrozenStore=function(that){return that._l||(that._l=new UncaughtFrozenStore)};var UncaughtFrozenStore=function(){this.a=[]};var findUncaughtFrozen=function(store,key){return arrayFind(store.a,function(it){return it[0]===key})};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);if(entry)entry[1]=value;else this.a.push([key,value])},delete:function(key){var index=arrayFindIndex(this.a,function(it){return it[0]===key});if(~index)this.a.splice(index,1);return!!~index}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i");that._t=NAME;that._i=id++;that._l=undefined;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that)});redefineAll(C.prototype,{delete:function(key){if(!isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,NAME))["delete"](key);return data&&$has(data,this._i)&&delete data[this._i]},has:function has(key){if(!isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,NAME)).has(key);return data&&$has(data,this._i)}});return C},def:function(that,key,value){var data=getWeak(anObject(key),true);if(data===true)uncaughtFrozenStore(that).set(key,value);else data[that._i]=value;return that},ufstore:uncaughtFrozenStore}},"web.dom.iterable.js":function(require){var $iterators=require("./es6.array.iterator");var getKeys=require("./_object-keys");var redefine=require("./_redefine");var global=require("./_global");var hide=require("./_hide");var Iterators=require("./_iterators");var wks=require("./_wks");var ITERATOR=wks("iterator");var TO_STRING_TAG=wks("toStringTag");var ArrayValues=Iterators.Array;var DOMIterables={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var collections=getKeys(DOMIterables),i=0;i<collections.length;i++){var NAME=collections[i];var explicit=DOMIterables[NAME];var Collection=global[NAME];var proto=Collection&&Collection.prototype;var key;if(proto){if(!proto[ITERATOR])hide(proto,ITERATOR,ArrayValues);if(!proto[TO_STRING_TAG])hide(proto,TO_STRING_TAG,NAME);Iterators[NAME]=ArrayValues;if(explicit)for(key in $iterators)if(!proto[key])redefine(proto,key,$iterators[key],true)}}},"es6.weak-set.js":function(require){"use strict";var weak=require("./_collection-weak");var validate=require("./_validate-collection");var WEAK_SET="WeakSet";require("./_collection")(WEAK_SET,function(get){return function WeakSet(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function add(value){return weak.def(validate(this,WEAK_SET),value,true)}},weak,false,true)},"es7.array.includes.js":function(require){"use strict";var $export=require("./_export");var $includes=require("./_array-includes")(true);$export($export.P,"Array",{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:undefined)}});require("./_add-to-unscopables")("includes")},"es7.array.flat-map.js":function(require){"use strict";var $export=require("./_export");var flattenIntoArray=require("./_flatten-into-array");var toObject=require("./_to-object");var toLength=require("./_to-length");var aFunction=require("./_a-function");var arraySpeciesCreate=require("./_array-species-create");$export($export.P,"Array",{flatMap:function flatMap(callbackfn){var O=toObject(this);var sourceLen,A;aFunction(callbackfn);sourceLen=toLength(O.length);A=arraySpeciesCreate(O,0);flattenIntoArray(A,O,O,sourceLen,0,1,callbackfn,arguments[1]);return A}});require("./_add-to-unscopables")("flatMap")},"_flatten-into-array.js":function(require,exports,module){"use strict";var isArray=require("./_is-array");var isObject=require("./_is-object");var toLength=require("./_to-length");var ctx=require("./_ctx");var IS_CONCAT_SPREADABLE=require("./_wks")("isConcatSpreadable");function flattenIntoArray(target,original,source,sourceLen,start,depth,mapper,thisArg){var targetIndex=start;var sourceIndex=0;var mapFn=mapper?ctx(mapper,thisArg,3):false;var element,spreadable;while(sourceIndex<sourceLen){if(sourceIndex in source){element=mapFn?mapFn(source[sourceIndex],sourceIndex,original):source[sourceIndex];spreadable=false;if(isObject(element)){spreadable=element[IS_CONCAT_SPREADABLE];spreadable=spreadable!==undefined?!!spreadable:isArray(element)}if(spreadable&&depth>0){targetIndex=flattenIntoArray(target,original,element,toLength(element.length),targetIndex,depth-1)-1}else{if(targetIndex>=9007199254740991)throw TypeError();target[targetIndex]=element}targetIndex++}sourceIndex++}return targetIndex}module.exports=flattenIntoArray},"es7.array.flatten.js":function(require){"use strict";var $export=require("./_export");var flattenIntoArray=require("./_flatten-into-array");var toObject=require("./_to-object");var toLength=require("./_to-length");var toInteger=require("./_to-integer");var arraySpeciesCreate=require("./_array-species-create");$export($export.P,"Array",{flatten:function flatten(){var depthArg=arguments[0];var O=toObject(this);var sourceLen=toLength(O.length);var A=arraySpeciesCreate(O,0);flattenIntoArray(A,O,O,sourceLen,0,depthArg===undefined?1:toInteger(depthArg));return A}});require("./_add-to-unscopables")("flatten")},"es7.object.get-own-property-descriptors.js":function(require){var $export=require("./_export");var ownKeys=require("./_own-keys");var toIObject=require("./_to-iobject");var gOPD=require("./_object-gopd");var createProperty=require("./_create-property");$export($export.S,"Object",{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(object){var O=toIObject(object);var getDesc=gOPD.f;var keys=ownKeys(O);var result={};var i=0;var key,desc;while(keys.length>i){desc=getDesc(O,key=keys[i++]);if(desc!==undefined)createProperty(result,key,desc)}return result}})},"_own-keys.js":function(require,exports,module){var gOPN=require("./_object-gopn");var gOPS=require("./_object-gops");var anObject=require("./_an-object");var Reflect=require("./_global").Reflect;module.exports=Reflect&&Reflect.ownKeys||function ownKeys(it){var keys=gOPN.f(anObject(it));var getSymbols=gOPS.f;return getSymbols?keys.concat(getSymbols(it)):keys}},"es7.object.values.js":function(require){var $export=require("./_export");var $values=require("./_object-to-array")(false);$export($export.S,"Object",{values:function values(it){return $values(it)}})},"_object-to-array.js":function(require,exports,module){var getKeys=require("./_object-keys");var toIObject=require("./_to-iobject");var isEnum=require("./_object-pie").f;module.exports=function(isEntries){return function(it){var O=toIObject(it);var keys=getKeys(O);var length=keys.length;var i=0;var result=[];var key;while(length>i)if(isEnum.call(O,key=keys[i++])){result.push(isEntries?[key,O[key]]:O[key])}return result}}},"es7.object.entries.js":function(require){var $export=require("./_export");var $entries=require("./_object-to-array")(true);$export($export.S,"Object",{entries:function entries(it){return $entries(it)}})},"es7.object.define-getter.js":function(require){"use strict";var $export=require("./_export");var toObject=require("./_to-object");var aFunction=require("./_a-function");var $defineProperty=require("./_object-dp");require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__defineGetter__:function __defineGetter__(P,getter){$defineProperty.f(toObject(this),P,{get:aFunction(getter),enumerable:true,configurable:true})}})},"_object-forced-pam.js":function(require,exports,module){"use strict";module.exports=require("./_library")||!require("./_fails")(function(){var K=Math.random();__defineSetter__.call(null,K,function(){});delete require("./_global")[K]})},"es7.object.define-setter.js":function(require){"use strict";var $export=require("./_export");var toObject=require("./_to-object");var aFunction=require("./_a-function");var $defineProperty=require("./_object-dp");require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__defineSetter__:function __defineSetter__(P,setter){$defineProperty.f(toObject(this),P,{set:aFunction(setter),enumerable:true,configurable:true})}})},"es7.object.lookup-getter.js":function(require){"use strict";var $export=require("./_export");var toObject=require("./_to-object");var toPrimitive=require("./_to-primitive");var getPrototypeOf=require("./_object-gpo");var getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__lookupGetter__:function __lookupGetter__(P){var O=toObject(this);var K=toPrimitive(P,true);var D;do{if(D=getOwnPropertyDescriptor(O,K))return D.get}while(O=getPrototypeOf(O))}})},"es7.object.lookup-setter.js":function(require){"use strict";var $export=require("./_export");var toObject=require("./_to-object");var toPrimitive=require("./_to-primitive");var getPrototypeOf=require("./_object-gpo");var getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__lookupSetter__:function __lookupSetter__(P){var O=toObject(this);var K=toPrimitive(P,true);var D;do{if(D=getOwnPropertyDescriptor(O,K))return D.set}while(O=getPrototypeOf(O))}})},"es6.number.epsilon.js":function(require){var $export=require("./_export");$export($export.S,"Number",{EPSILON:Math.pow(2,-52)})},"es6.number.is-finite.js":function(require){var $export=require("./_export");var _isFinite=require("./_global").isFinite;$export($export.S,"Number",{isFinite:function isFinite(it){return typeof it=="number"&&_isFinite(it)}})},"es6.number.is-integer.js":function(require){var $export=require("./_export");$export($export.S,"Number",{isInteger:require("./_is-integer")})},"_is-integer.js":function(require,exports,module){var isObject=require("./_is-object");var floor=Math.floor;module.exports=function isInteger(it){return!isObject(it)&&isFinite(it)&&floor(it)===it}},"es6.number.is-nan.js":function(require){var $export=require("./_export");$export($export.S,"Number",{isNaN:function isNaN(number){return number!=number}})},"es6.number.is-safe-integer.js":function(require){var $export=require("./_export");var isInteger=require("./_is-integer");var abs=Math.abs;$export($export.S,"Number",{isSafeInteger:function isSafeInteger(number){return isInteger(number)&&abs(number)<=9007199254740991}})},"es6.number.max-safe-integer.js":function(require){var $export=require("./_export");$export($export.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},"es6.number.min-safe-integer.js":function(require){var $export=require("./_export");$export($export.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},"es6.number.parse-float.js":function(require){var $export=require("./_export");var $parseFloat=require("./_parse-float");$export($export.S+$export.F*(Number.parseFloat!=$parseFloat),"Number",{parseFloat:$parseFloat})},"_parse-float.js":function(require,exports,module){var $parseFloat=require("./_global").parseFloat;var $trim=require("./_string-trim").trim;module.exports=1/$parseFloat(require("./_string-ws")+"-0")!==-Infinity?function parseFloat(str){var string=$trim(String(str),3);var result=$parseFloat(string);return result===0&&string.charAt(0)=="-"?-0:result}:$parseFloat},"es6.number.parse-int.js":function(require){var $export=require("./_export");var $parseInt=require("./_parse-int");$export($export.S+$export.F*(Number.parseInt!=$parseInt),"Number",{parseInt:$parseInt})},"_parse-int.js":function(require,exports,module){var $parseInt=require("./_global").parseInt;var $trim=require("./_string-trim").trim;var ws=require("./_string-ws");var hex=/^[-+]?0[xX]/;module.exports=$parseInt(ws+"08")!==8||$parseInt(ws+"0x16")!==22?function parseInt(str,radix){var string=$trim(String(str),3);return $parseInt(string,radix>>>0||(hex.test(string)?16:10))}:$parseInt},"es6.typed.uint8-array.js":function(require){require("./_typed-array")("Uint8",1,function(init){return function Uint8Array(data,byteOffset,length){return init(this,data,byteOffset,length)}})},"_typed-array.js":function(require,exports,module){"use strict";if(require("./_descriptors")){var LIBRARY=require("./_library");var global=require("./_global");var fails=require("./_fails");var $export=require("./_export");var $typed=require("./_typed");var $buffer=require("./_typed-buffer");var ctx=require("./_ctx");var anInstance=require("./_an-instance");var propertyDesc=require("./_property-desc");var hide=require("./_hide");var redefineAll=require("./_redefine-all");var toInteger=require("./_to-integer");var toLength=require("./_to-length");var toIndex=require("./_to-index");var toAbsoluteIndex=require("./_to-absolute-index");var toPrimitive=require("./_to-primitive");var has=require("./_has");var classof=require("./_classof");var isObject=require("./_is-object");var toObject=require("./_to-object");var isArrayIter=require("./_is-array-iter");var create=require("./_object-create");var getPrototypeOf=require("./_object-gpo");var gOPN=require("./_object-gopn").f;var getIterFn=require("./core.get-iterator-method");var uid=require("./_uid");var wks=require("./_wks");var createArrayMethod=require("./_array-methods");var createArrayIncludes=require("./_array-includes");var speciesConstructor=require("./_species-constructor");var ArrayIterators=require("./es6.array.iterator");var Iterators=require("./_iterators");var $iterDetect=require("./_iter-detect");var setSpecies=require("./_set-species");var arrayFill=require("./_array-fill");var arrayCopyWithin=require("./_array-copy-within");var $DP=require("./_object-dp");var $GOPD=require("./_object-gopd");var dP=$DP.f;var gOPD=$GOPD.f;var RangeError=global.RangeError;var TypeError=global.TypeError;var Uint8Array=global.Uint8Array;var ARRAY_BUFFER="ArrayBuffer";var SHARED_BUFFER="Shared"+ARRAY_BUFFER;var BYTES_PER_ELEMENT="BYTES_PER_ELEMENT";var PROTOTYPE="prototype";var ArrayProto=Array[PROTOTYPE];var $ArrayBuffer=$buffer.ArrayBuffer;var $DataView=$buffer.DataView;var arrayForEach=createArrayMethod(0);var arrayFilter=createArrayMethod(2);var arraySome=createArrayMethod(3);var arrayEvery=createArrayMethod(4);var arrayFind=createArrayMethod(5);var arrayFindIndex=createArrayMethod(6);var arrayIncludes=createArrayIncludes(true);var arrayIndexOf=createArrayIncludes(false);var arrayValues=ArrayIterators.values;var arrayKeys=ArrayIterators.keys;var arrayEntries=ArrayIterators.entries;var arrayLastIndexOf=ArrayProto.lastIndexOf;var arrayReduce=ArrayProto.reduce;var arrayReduceRight=ArrayProto.reduceRight;var arrayJoin=ArrayProto.join;var arraySort=ArrayProto.sort;var arraySlice=ArrayProto.slice;var arrayToString=ArrayProto.toString;var arrayToLocaleString=ArrayProto.toLocaleString;var ITERATOR=wks("iterator");var TAG=wks("toStringTag");var TYPED_CONSTRUCTOR=uid("typed_constructor");var DEF_CONSTRUCTOR=uid("def_constructor");var ALL_CONSTRUCTORS=$typed.CONSTR;var TYPED_ARRAY=$typed.TYPED;var VIEW=$typed.VIEW;var WRONG_LENGTH="Wrong length!";var $map=createArrayMethod(1,function(O,length){return allocate(speciesConstructor(O,O[DEF_CONSTRUCTOR]),length)});var LITTLE_ENDIAN=fails(function(){return new Uint8Array(new Uint16Array([1]).buffer)[0]===1});var FORCED_SET=!!Uint8Array&&!!Uint8Array[PROTOTYPE].set&&fails(function(){new Uint8Array(1).set({})});var toOffset=function(it,BYTES){var offset=toInteger(it);if(offset<0||offset%BYTES)throw RangeError("Wrong offset!");return offset};var validate=function(it){if(isObject(it)&&TYPED_ARRAY in it)return it;throw TypeError(it+" is not a typed array!")};var allocate=function(C,length){if(!(isObject(C)&&TYPED_CONSTRUCTOR in C)){throw TypeError("It is not a typed array constructor!")}return new C(length)};var speciesFromList=function(O,list){return fromList(speciesConstructor(O,O[DEF_CONSTRUCTOR]),list)};var fromList=function(C,list){var index=0;var length=list.length;var result=allocate(C,length);while(length>index)result[index]=list[index++];return result};var addGetter=function(it,key,internal){dP(it,key,{get:function(){return this._d[internal]}})};var $from=function from(source){var O=toObject(source);var aLen=arguments.length;var mapfn=aLen>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var iterFn=getIterFn(O);var i,length,values,result,step,iterator;if(iterFn!=undefined&&!isArrayIter(iterFn)){for(iterator=iterFn.call(O),values=[],i=0;!(step=iterator.next()).done;i++){values.push(step.value)}O=values}if(mapping&&aLen>2)mapfn=ctx(mapfn,arguments[2],2);for(i=0,length=toLength(O.length),result=allocate(this,length);length>i;i++){result[i]=mapping?mapfn(O[i],i):O[i]}return result};var $of=function of(){var index=0;var length=arguments.length;var result=allocate(this,length);while(length>index)result[index]=arguments[index++];return result};var TO_LOCALE_BUG=!!Uint8Array&&fails(function(){arrayToLocaleString.call(new Uint8Array(1))});var $toLocaleString=function toLocaleString(){return arrayToLocaleString.apply(TO_LOCALE_BUG?arraySlice.call(validate(this)):validate(this),arguments)};var proto={copyWithin:function copyWithin(target,start){return arrayCopyWithin.call(validate(this),target,start,arguments.length>2?arguments[2]:undefined)},every:function every(callbackfn){return arrayEvery(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},fill:function fill(value){return arrayFill.apply(validate(this),arguments)},filter:function filter(callbackfn){return speciesFromList(this,arrayFilter(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined))},find:function find(predicate){return arrayFind(validate(this),predicate,arguments.length>1?arguments[1]:undefined)},findIndex:function findIndex(predicate){return arrayFindIndex(validate(this),predicate,arguments.length>1?arguments[1]:undefined)},forEach:function forEach(callbackfn){arrayForEach(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},indexOf:function indexOf(searchElement){return arrayIndexOf(validate(this),searchElement,arguments.length>1?arguments[1]:undefined)},includes:function includes(searchElement){return arrayIncludes(validate(this),searchElement,arguments.length>1?arguments[1]:undefined)},join:function join(separator){return arrayJoin.apply(validate(this),arguments)},lastIndexOf:function lastIndexOf(searchElement){return arrayLastIndexOf.apply(validate(this),arguments)},map:function map(mapfn){return $map(validate(this),mapfn,arguments.length>1?arguments[1]:undefined)},reduce:function reduce(callbackfn){return arrayReduce.apply(validate(this),arguments)},reduceRight:function reduceRight(callbackfn){return arrayReduceRight.apply(validate(this),arguments)},reverse:function reverse(){var that=this;var length=validate(that).length;var middle=Math.floor(length/2);var index=0;var value;while(index<middle){value=that[index];that[index++]=that[--length];that[length]=value}return that},some:function some(callbackfn){return arraySome(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},sort:function sort(comparefn){return arraySort.call(validate(this),comparefn)},subarray:function subarray(begin,end){var O=validate(this);var length=O.length;var $begin=toAbsoluteIndex(begin,length);return new(speciesConstructor(O,O[DEF_CONSTRUCTOR]))(O.buffer,O.byteOffset+$begin*O.BYTES_PER_ELEMENT,toLength((end===undefined?length:toAbsoluteIndex(end,length))-$begin))}};var $slice=function slice(start,end){return speciesFromList(this,arraySlice.call(validate(this),start,end))};var $set=function set(arrayLike){validate(this);var offset=toOffset(arguments[1],1);var length=this.length;var src=toObject(arrayLike);var len=toLength(src.length);var index=0;if(len+offset>length)throw RangeError(WRONG_LENGTH);while(index<len)this[offset+index]=src[index++]};var $iterators={entries:function entries(){return arrayEntries.call(validate(this))},keys:function keys(){return arrayKeys.call(validate(this))},values:function values(){return arrayValues.call(validate(this))}};var isTAIndex=function(target,key){return isObject(target)&&target[TYPED_ARRAY]&&typeof key!="symbol"&&key in target&&String(+key)==String(key)};var $getDesc=function getOwnPropertyDescriptor(target,key){return isTAIndex(target,key=toPrimitive(key,true))?propertyDesc(2,target[key]):gOPD(target,key)};var $setDesc=function defineProperty(target,key,desc){if(isTAIndex(target,key=toPrimitive(key,true))&&isObject(desc)&&has(desc,"value")&&!has(desc,"get")&&!has(desc,"set")&&!desc.configurable&&(!has(desc,"writable")||desc.writable)&&(!has(desc,"enumerable")||desc.enumerable)){target[key]=desc.value;return target}return dP(target,key,desc)};if(!ALL_CONSTRUCTORS){$GOPD.f=$getDesc;$DP.f=$setDesc}$export($export.S+$export.F*!ALL_CONSTRUCTORS,"Object",{getOwnPropertyDescriptor:$getDesc,defineProperty:$setDesc});if(fails(function(){arrayToString.call({})})){arrayToString=arrayToLocaleString=function toString(){return arrayJoin.call(this)}}var $TypedArrayPrototype$=redefineAll({},proto);redefineAll($TypedArrayPrototype$,$iterators);hide($TypedArrayPrototype$,ITERATOR,$iterators.values);redefineAll($TypedArrayPrototype$,{slice:$slice,set:$set,constructor:function(){},toString:arrayToString,toLocaleString:$toLocaleString});addGetter($TypedArrayPrototype$,"buffer","b");addGetter($TypedArrayPrototype$,"byteOffset","o");addGetter($TypedArrayPrototype$,"byteLength","l");addGetter($TypedArrayPrototype$,"length","e");dP($TypedArrayPrototype$,TAG,{get:function(){return this[TYPED_ARRAY]}});module.exports=function(KEY,BYTES,wrapper,CLAMPED){CLAMPED=!!CLAMPED;var NAME=KEY+(CLAMPED?"Clamped":"")+"Array";var GETTER="get"+KEY;var SETTER="set"+KEY;var TypedArray=global[NAME];var Base=TypedArray||{};var TAC=TypedArray&&getPrototypeOf(TypedArray);var FORCED=!TypedArray||!$typed.ABV;var O={};var TypedArrayPrototype=TypedArray&&TypedArray[PROTOTYPE];var getter=function(that,index){var data=that._d;return data.v[GETTER](index*BYTES+data.o,LITTLE_ENDIAN)};var setter=function(that,index,value){var data=that._d;if(CLAMPED)value=(value=Math.round(value))<0?0:value>255?255:value&255;data.v[SETTER](index*BYTES+data.o,value,LITTLE_ENDIAN)};var addElement=function(that,index){dP(that,index,{get:function(){return getter(this,index)},set:function(value){return setter(this,index,value)},enumerable:true})};if(FORCED){TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME,"_d");var index=0;var offset=0;var buffer,byteLength,length,klass;if(!isObject(data)){length=toIndex(data);byteLength=length*BYTES;buffer=new $ArrayBuffer(byteLength)}else if(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER){buffer=data;offset=toOffset($offset,BYTES);var $len=data.byteLength;if($length===undefined){if($len%BYTES)throw RangeError(WRONG_LENGTH);byteLength=$len-offset;if(byteLength<0)throw RangeError(WRONG_LENGTH)}else{byteLength=toLength($length)*BYTES;if(byteLength+offset>$len)throw RangeError(WRONG_LENGTH)}length=byteLength/BYTES}else if(TYPED_ARRAY in data){return fromList(TypedArray,data)}else{return $from.call(TypedArray,data)}hide(that,"_d",{b:buffer,o:offset,l:byteLength,e:length,v:new $DataView(buffer)});while(index<length)addElement(that,index++)});TypedArrayPrototype=TypedArray[PROTOTYPE]=create($TypedArrayPrototype$);hide(TypedArrayPrototype,"constructor",TypedArray)}else if(!fails(function(){TypedArray(1)})||!fails(function(){new TypedArray(-1)})||!$iterDetect(function(iter){new TypedArray;new TypedArray(null);new TypedArray(1.5);new TypedArray(iter)},true)){TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME);var klass;if(!isObject(data))return new Base(toIndex(data));if(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER){return $length!==undefined?new Base(data,toOffset($offset,BYTES),$length):$offset!==undefined?new Base(data,toOffset($offset,BYTES)):new Base(data)}if(TYPED_ARRAY in data)return fromList(TypedArray,data);return $from.call(TypedArray,data)});arrayForEach(TAC!==Function.prototype?gOPN(Base).concat(gOPN(TAC)):gOPN(Base),function(key){if(!(key in TypedArray))hide(TypedArray,key,Base[key])});TypedArray[PROTOTYPE]=TypedArrayPrototype;if(!LIBRARY)TypedArrayPrototype.constructor=TypedArray}var $nativeIterator=TypedArrayPrototype[ITERATOR];var CORRECT_ITER_NAME=!!$nativeIterator&&($nativeIterator.name=="values"||$nativeIterator.name==undefined);var $iterator=$iterators.values;hide(TypedArray,TYPED_CONSTRUCTOR,true);hide(TypedArrayPrototype,TYPED_ARRAY,NAME);hide(TypedArrayPrototype,VIEW,true);hide(TypedArrayPrototype,DEF_CONSTRUCTOR,TypedArray);if(CLAMPED?new TypedArray(1)[TAG]!=NAME:!(TAG in TypedArrayPrototype)){dP(TypedArrayPrototype,TAG,{get:function(){return NAME}})}O[NAME]=TypedArray;$export($export.G+$export.W+$export.F*(TypedArray!=Base),O);$export($export.S,NAME,{BYTES_PER_ELEMENT:BYTES});$export($export.S+$export.F*fails(function(){Base.of.call(TypedArray,1)}),NAME,{from:$from,of:$of});if(!(BYTES_PER_ELEMENT in TypedArrayPrototype))hide(TypedArrayPrototype,BYTES_PER_ELEMENT,BYTES);$export($export.P,NAME,proto);setSpecies(NAME);$export($export.P+$export.F*FORCED_SET,NAME,{set:$set});$export($export.P+$export.F*!CORRECT_ITER_NAME,NAME,$iterators);if(!LIBRARY&&TypedArrayPrototype.toString!=arrayToString)TypedArrayPrototype.toString=arrayToString;$export($export.P+$export.F*fails(function(){new TypedArray(1).slice()}),NAME,{slice:$slice});$export($export.P+$export.F*(fails(function(){return[1,2].toLocaleString()!=new TypedArray([1,2]).toLocaleString()})||!fails(function(){TypedArrayPrototype.toLocaleString.call([1,2])})),NAME,{toLocaleString:$toLocaleString});Iterators[NAME]=CORRECT_ITER_NAME?$nativeIterator:$iterator;if(!LIBRARY&&!CORRECT_ITER_NAME)hide(TypedArrayPrototype,ITERATOR,$iterator)}}else module.exports=function(){}},"_typed.js":function(require,exports,module){var global=require("./_global");var hide=require("./_hide");var uid=require("./_uid");var TYPED=uid("typed_array");var VIEW=uid("view");var ABV=!!(global.ArrayBuffer&&global.DataView);var CONSTR=ABV;var i=0;var l=9;var Typed;var TypedArrayConstructors="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(i<l){if(Typed=global[TypedArrayConstructors[i++]]){hide(Typed.prototype,TYPED,true);hide(Typed.prototype,VIEW,true)}else CONSTR=false}module.exports={ABV:ABV,CONSTR:CONSTR,TYPED:TYPED,VIEW:VIEW}},"_typed-buffer.js":function(require,exports){"use strict";var global=require("./_global");var DESCRIPTORS=require("./_descriptors");var LIBRARY=require("./_library");var $typed=require("./_typed");var hide=require("./_hide");var redefineAll=require("./_redefine-all");var fails=require("./_fails");var anInstance=require("./_an-instance");var toInteger=require("./_to-integer");var toLength=require("./_to-length");var toIndex=require("./_to-index");var gOPN=require("./_object-gopn").f;var dP=require("./_object-dp").f;var arrayFill=require("./_array-fill");var setToStringTag=require("./_set-to-string-tag");var ARRAY_BUFFER="ArrayBuffer";var DATA_VIEW="DataView";var PROTOTYPE="prototype";var WRONG_LENGTH="Wrong length!";var WRONG_INDEX="Wrong index!";var $ArrayBuffer=global[ARRAY_BUFFER];var $DataView=global[DATA_VIEW];var Math=global.Math;var RangeError=global.RangeError;var Infinity=global.Infinity;var BaseBuffer=$ArrayBuffer;var abs=Math.abs;var pow=Math.pow;var floor=Math.floor;var log=Math.log;var LN2=Math.LN2;var BUFFER="buffer";var BYTE_LENGTH="byteLength";var BYTE_OFFSET="byteOffset";var $BUFFER=DESCRIPTORS?"_b":BUFFER;var $LENGTH=DESCRIPTORS?"_l":BYTE_LENGTH;var $OFFSET=DESCRIPTORS?"_o":BYTE_OFFSET;function packIEEE754(value,mLen,nBytes){var buffer=Array(nBytes);var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?pow(2,-24)-pow(2,-77):0;var i=0;var s=value<0||value===0&&1/value<0?1:0;var e,m,c;value=abs(value);if(value!=value||value===Infinity){m=value!=value?1:0;e=eMax}else{e=floor(log(value)/LN2);if(value*(c=pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*pow(2,mLen);e=e+eBias}else{m=value*pow(2,eBias-1)*pow(2,mLen);e=0}}for(;mLen>=8;buffer[i++]=m&255,m/=256,mLen-=8);e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[i++]=e&255,e/=256,eLen-=8);buffer[--i]|=s*128;return buffer}function unpackIEEE754(buffer,mLen,nBytes){var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=eLen-7;var i=nBytes-1;var s=buffer[i--];var e=s&127;var m;s>>=7;for(;nBits>0;e=e*256+buffer[i],i--,nBits-=8);m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[i],i--,nBits-=8);if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:s?-Infinity:Infinity}else{m=m+pow(2,mLen);e=e-eBias}return(s?-1:1)*m*pow(2,e-mLen)}function unpackI32(bytes){return bytes[3]<<24|bytes[2]<<16|bytes[1]<<8|bytes[0]}function packI8(it){return[it&255]}function packI16(it){return[it&255,it>>8&255]}function packI32(it){return[it&255,it>>8&255,it>>16&255,it>>24&255]}function packF64(it){return packIEEE754(it,52,8)}function packF32(it){return packIEEE754(it,23,4)}function addGetter(C,key,internal){dP(C[PROTOTYPE],key,{get:function(){return this[internal]}})}function get(view,bytes,index,isLittleEndian){var numIndex=+index;var intIndex=toIndex(numIndex);if(intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b;var start=intIndex+view[$OFFSET];var pack=store.slice(start,start+bytes);return isLittleEndian?pack:pack.reverse()}function set(view,bytes,index,conversion,value,isLittleEndian){var numIndex=+index;var intIndex=toIndex(numIndex);if(intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b;var start=intIndex+view[$OFFSET];var pack=conversion(+value);for(var i=0;i<bytes;i++)store[start+i]=pack[isLittleEndian?i:bytes-i-1]}if(!$typed.ABV){$ArrayBuffer=function ArrayBuffer(length){anInstance(this,$ArrayBuffer,ARRAY_BUFFER);var byteLength=toIndex(length);this._b=arrayFill.call(Array(byteLength),0);this[$LENGTH]=byteLength};$DataView=function DataView(buffer,byteOffset,byteLength){anInstance(this,$DataView,DATA_VIEW);anInstance(buffer,$ArrayBuffer,DATA_VIEW);var bufferLength=buffer[$LENGTH];var offset=toInteger(byteOffset);if(offset<0||offset>bufferLength)throw RangeError("Wrong offset!");byteLength=byteLength===undefined?bufferLength-offset:toLength(byteLength);if(offset+byteLength>bufferLength)throw RangeError(WRONG_LENGTH);this[$BUFFER]=buffer;this[$OFFSET]=offset;this[$LENGTH]=byteLength};if(DESCRIPTORS){addGetter($ArrayBuffer,BYTE_LENGTH,"_l");addGetter($DataView,BUFFER,"_b");addGetter($DataView,BYTE_LENGTH,"_l");addGetter($DataView,BYTE_OFFSET,"_o")}redefineAll($DataView[PROTOTYPE],{getInt8:function getInt8(byteOffset){return get(this,1,byteOffset)[0]<<24>>24},getUint8:function getUint8(byteOffset){return get(this,1,byteOffset)[0]},getInt16:function getInt16(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return(bytes[1]<<8|bytes[0])<<16>>16},getUint16:function getUint16(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return bytes[1]<<8|bytes[0]},getInt32:function getInt32(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))},getUint32:function getUint32(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))>>>0},getFloat32:function getFloat32(byteOffset){return unpackIEEE754(get(this,4,byteOffset,arguments[1]),23,4)},getFloat64:function getFloat64(byteOffset){return unpackIEEE754(get(this,8,byteOffset,arguments[1]),52,8)},setInt8:function setInt8(byteOffset,value){set(this,1,byteOffset,packI8,value)},setUint8:function setUint8(byteOffset,value){set(this,1,byteOffset,packI8,value)},setInt16:function setInt16(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setUint16:function setUint16(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setInt32:function setInt32(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setUint32:function setUint32(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setFloat32:function setFloat32(byteOffset,value){set(this,4,byteOffset,packF32,value,arguments[2])},setFloat64:function setFloat64(byteOffset,value){set(this,8,byteOffset,packF64,value,arguments[2])}})}else{if(!fails(function(){$ArrayBuffer(1)})||!fails(function(){new $ArrayBuffer(-1)})||fails(function(){new $ArrayBuffer;new $ArrayBuffer(1.5);new $ArrayBuffer(NaN);return $ArrayBuffer.name!=ARRAY_BUFFER})){$ArrayBuffer=function ArrayBuffer(length){anInstance(this,$ArrayBuffer);return new BaseBuffer(toIndex(length))};var ArrayBufferProto=$ArrayBuffer[PROTOTYPE]=BaseBuffer[PROTOTYPE];for(var keys=gOPN(BaseBuffer),j=0,key;keys.length>j;){if(!((key=keys[j++])in $ArrayBuffer))hide($ArrayBuffer,key,BaseBuffer[key])}if(!LIBRARY)ArrayBufferProto.constructor=$ArrayBuffer}var view=new $DataView(new $ArrayBuffer(2));var $setInt8=$DataView[PROTOTYPE].setInt8;view.setInt8(0,2147483648);view.setInt8(1,2147483649);if(view.getInt8(0)||!view.getInt8(1))redefineAll($DataView[PROTOTYPE],{setInt8:function setInt8(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)},setUint8:function setUint8(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)}},true)}setToStringTag($ArrayBuffer,ARRAY_BUFFER);setToStringTag($DataView,DATA_VIEW);hide($DataView[PROTOTYPE],$typed.VIEW,true);exports[ARRAY_BUFFER]=$ArrayBuffer;exports[DATA_VIEW]=$DataView},"_to-index.js":function(require,exports,module){var toInteger=require("./_to-integer");var toLength=require("./_to-length");module.exports=function(it){if(it===undefined)return 0;var number=toInteger(it);var length=toLength(number);if(number!==length)throw RangeError("Wrong length!");return length}},"_species-constructor.js":function(require,exports,module){var anObject=require("./_an-object");var aFunction=require("./_a-function");var SPECIES=require("./_wks")("species");module.exports=function(O,D){var C=anObject(O).constructor;var S;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S)}},"es6.typed.uint32-array.js":function(require){require("./_typed-array")("Uint32",4,function(init){return function Uint32Array(data,byteOffset,length){return init(this,data,byteOffset,length)}})}},es6:{"array.js":function(require,exports,module){require("../modules/es6.string.iterator");require("../modules/es6.array.is-array");require("../modules/es6.array.from");require("../modules/es6.array.of");require("../modules/es6.array.join");require("../modules/es6.array.slice");require("../modules/es6.array.sort");require("../modules/es6.array.for-each");require("../modules/es6.array.map");require("../modules/es6.array.filter");require("../modules/es6.array.some");require("../modules/es6.array.every");require("../modules/es6.array.reduce");require("../modules/es6.array.reduce-right");require("../modules/es6.array.index-of");require("../modules/es6.array.last-index-of");require("../modules/es6.array.copy-within");require("../modules/es6.array.fill");require("../modules/es6.array.find");require("../modules/es6.array.find-index");require("../modules/es6.array.species");require("../modules/es6.array.iterator");module.exports=require("../modules/_core").Array},"function.js":function(require,exports,module){require("../modules/es6.function.bind");require("../modules/es6.function.name");require("../modules/es6.function.has-instance");module.exports=require("../modules/_core").Function},"math.js":function(require,exports,module){require("../modules/es6.math.acosh");require("../modules/es6.math.asinh");require("../modules/es6.math.atanh");require("../modules/es6.math.cbrt");require("../modules/es6.math.clz32");require("../modules/es6.math.cosh");require("../modules/es6.math.expm1");require("../modules/es6.math.fround");require("../modules/es6.math.hypot");require("../modules/es6.math.imul");require("../modules/es6.math.log10");require("../modules/es6.math.log1p");require("../modules/es6.math.log2");require("../modules/es6.math.sign");require("../modules/es6.math.sinh");require("../modules/es6.math.tanh");require("../modules/es6.math.trunc");module.exports=require("../modules/_core").Math},"object.js":function(require,exports,module){require("../modules/es6.symbol");require("../modules/es6.object.create");require("../modules/es6.object.define-property");require("../modules/es6.object.define-properties");require("../modules/es6.object.get-own-property-descriptor");require("../modules/es6.object.get-prototype-of");require("../modules/es6.object.keys");require("../modules/es6.object.get-own-property-names");require("../modules/es6.object.freeze");require("../modules/es6.object.seal");require("../modules/es6.object.prevent-extensions");require("../modules/es6.object.is-frozen");require("../modules/es6.object.is-sealed");require("../modules/es6.object.is-extensible");require("../modules/es6.object.assign");require("../modules/es6.object.is");require("../modules/es6.object.set-prototype-of");require("../modules/es6.object.to-string");module.exports=require("../modules/_core").Object},"regexp.js":function(require,exports,module){require("../modules/es6.regexp.constructor");require("../modules/es6.regexp.to-string");require("../modules/es6.regexp.flags");require("../modules/es6.regexp.match");require("../modules/es6.regexp.replace");require("../modules/es6.regexp.search");require("../modules/es6.regexp.split");module.exports=require("../modules/_core").RegExp},"string.js":function(require,exports,module){require("../modules/es6.string.from-code-point");require("../modules/es6.string.raw");require("../modules/es6.string.trim");require("../modules/es6.string.iterator");require("../modules/es6.string.code-point-at");require("../modules/es6.string.ends-with");require("../modules/es6.string.includes");require("../modules/es6.string.repeat");require("../modules/es6.string.starts-with");require("../modules/es6.string.anchor");require("../modules/es6.string.big");require("../modules/es6.string.blink");require("../modules/es6.string.bold");require("../modules/es6.string.fixed");require("../modules/es6.string.fontcolor");require("../modules/es6.string.fontsize");require("../modules/es6.string.italics");require("../modules/es6.string.link");require("../modules/es6.string.small");require("../modules/es6.string.strike");require("../modules/es6.string.sub");require("../modules/es6.string.sup");require("../modules/es6.regexp.match");require("../modules/es6.regexp.replace");require("../modules/es6.regexp.search");require("../modules/es6.regexp.split");module.exports=require("../modules/_core").String},"weak-map.js":function(require,exports,module){require("../modules/es6.object.to-string");require("../modules/es6.array.iterator");require("../modules/es6.weak-map");module.exports=require("../modules/_core").WeakMap},"weak-set.js":function(require,exports,module){require("../modules/es6.object.to-string");require("../modules/web.dom.iterable");require("../modules/es6.weak-set");module.exports=require("../modules/_core").WeakSet}},es7:{"array.js":function(require,exports,module){require("../modules/es7.array.includes");require("../modules/es7.array.flat-map");require("../modules/es7.array.flatten");module.exports=require("../modules/_core").Array},"object.js":function(require,exports,module){require("../modules/es7.object.get-own-property-descriptors");require("../modules/es7.object.values");require("../modules/es7.object.entries");require("../modules/es7.object.define-getter");require("../modules/es7.object.define-setter");require("../modules/es7.object.lookup-getter");require("../modules/es7.object.lookup-setter");module.exports=require("../modules/_core").Object}},library:{fn:{symbol:{"iterator.js":function(require,exports,module){require("../../modules/es6.string.iterator");require("../../modules/web.dom.iterable");module.exports=require("../../modules/_wks-ext").f("iterator")},"index.js":function(require,exports,module){require("../../modules/es6.symbol");require("../../modules/es6.object.to-string");require("../../modules/es7.symbol.async-iterator");require("../../modules/es7.symbol.observable");module.exports=require("../../modules/_core").Symbol}},object:{"set-prototype-of.js":function(require,exports,module){require("../../modules/es6.object.set-prototype-of");module.exports=require("../../modules/_core").Object.setPrototypeOf},"create.js":function(require,exports,module){require("../../modules/es6.object.create");var $Object=require("../../modules/_core").Object;module.exports=function create(P,D){return $Object.create(P,D)}}},array:{"from.js":function(require,exports,module){require("../../modules/es6.string.iterator");require("../../modules/es6.array.from");module.exports=require("../../modules/_core").Array.from}}},modules:{"es6.string.iterator.js":function(require){"use strict";var $at=require("./_string-at")(true);require("./_iter-define")(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t;var index=this._i;var point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}})},"_string-at.js":function(require,exports,module){var toInteger=require("./_to-integer");var defined=require("./_defined");module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that));var i=toInteger(pos);var l=s.length;var a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},"_to-integer.js":function(require,exports,module){var ceil=Math.ceil;var floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},"_defined.js":function(require,exports,module){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},"_iter-define.js":function(require,exports,module){"use strict";var LIBRARY=require("./_library");var $export=require("./_export");var redefine=require("./_redefine");var hide=require("./_hide");var has=require("./_has");var Iterators=require("./_iterators");var $iterCreate=require("./_iter-create");var setToStringTag=require("./_set-to-string-tag");var getPrototypeOf=require("./_object-gpo");var ITERATOR=require("./_wks")("iterator");var BUGGY=!([].keys&&"next"in[].keys());var FF_ITERATOR="@@iterator";var KEYS="keys";var VALUES="values";var returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator";var DEF_VALUES=DEFAULT==VALUES;var VALUES_BUG=false;var proto=Base.prototype;var $native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT];var $default=$native||getMethod(DEFAULT);var $entries=DEFAULT?!DEF_VALUES?$default:getMethod("entries"):undefined;var $anyNative=NAME=="Array"?proto.entries||$native:$native;var methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=getPrototypeOf($anyNative.call(new Base));if(IteratorPrototype!==Object.prototype&&IteratorPrototype.next){setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&!has(IteratorPrototype,ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis)}}if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},"_library.js":function(require,exports,module){module.exports=true},"_export.js":function(require,exports,module){var global=require("./_global");var core=require("./_core");var ctx=require("./_ctx");var hide=require("./_hide");var PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F;var IS_GLOBAL=type&$export.G;var IS_STATIC=type&$export.S;var IS_PROTO=type&$export.P;var IS_BIND=type&$export.B;var IS_WRAP=type&$export.W;var exports=IS_GLOBAL?core:core[name]||(core[name]={});var expProto=exports[PROTOTYPE];var target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE];var key,own,out;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;if(own&&key in exports)continue;out=own?target[key]:source[key];exports[key]=IS_GLOBAL&&typeof target[key]!="function"?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};F[PROTOTYPE]=C[PROTOTYPE];return F}(out):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(IS_PROTO){(exports.virtual||(exports.virtual={}))[key]=out;if(type&$export.R&&expProto&&!expProto[key])hide(expProto,key,out)}}};$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;module.exports=$export},"_global.js":function(require,exports,module){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},"_core.js":function(require,exports,module){var core=module.exports={version:"2.5.1"};if(typeof __e=="number")__e=core},"_ctx.js":function(require,exports,module){var aFunction=require("./_a-function");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},"_a-function.js":function(require,exports,module){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},"_hide.js":function(require,exports,module){var dP=require("./_object-dp");var createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},"_object-dp.js":function(require,exports){var anObject=require("./_an-object");var IE8_DOM_DEFINE=require("./_ie8-dom-define");var toPrimitive=require("./_to-primitive");var dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)O[P]=Attributes.value;return O}},"_an-object.js":function(require,exports,module){var isObject=require("./_is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},"_is-object.js":function(require,exports,module){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},"_ie8-dom-define.js":function(require,exports,module){module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a!=7})},"_descriptors.js":function(require,exports,module){module.exports=!require("./_fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"_fails.js":function(require,exports,module){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},"_dom-create.js":function(require,exports,module){var isObject=require("./_is-object");var document=require("./_global").document;var is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},"_to-primitive.js":function(require,exports,module){var isObject=require("./_is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=="function"&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},"_property-desc.js":function(require,exports,module){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},"_redefine.js":function(require,exports,module){module.exports=require("./_hide")},"_has.js":function(require,exports,module){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},"_iterators.js":function(require,exports,module){module.exports={}},"_iter-create.js":function(require,exports,module){"use strict";var create=require("./_object-create");var descriptor=require("./_property-desc");var setToStringTag=require("./_set-to-string-tag");var IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),function(){return this});module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}},"_object-create.js":function(require,exports,module){var anObject=require("./_an-object");var dPs=require("./_object-dps");var enumBugKeys=require("./_enum-bug-keys");var IE_PROTO=require("./_shared-key")("IE_PROTO");var Empty=function(){};var PROTOTYPE="prototype";var createDict=function(){var iframe=require("./_dom-create")("iframe");var i=enumBugKeys.length;var lt="<";var gt=">";var iframeDocument;iframe.style.display="none";require("./_html").appendChild(iframe);iframe.src="javascript:";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty;Empty[PROTOTYPE]=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:dPs(result,Properties)}},"_object-dps.js":function(require,exports,module){var dP=require("./_object-dp");var anObject=require("./_an-object");var getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=getKeys(Properties);var length=keys.length;var i=0;var P;while(length>i)dP.f(O,P=keys[i++],Properties[P]);return O}},"_object-keys.js":function(require,exports,module){var $keys=require("./_object-keys-internal");var enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function keys(O){return $keys(O,enumBugKeys)}},"_object-keys-internal.js":function(require,exports,module){var has=require("./_has");var toIObject=require("./_to-iobject");var arrayIndexOf=require("./_array-includes")(false);var IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(object,names){var O=toIObject(object);var i=0;var result=[];var key;for(key in O)if(key!=IE_PROTO)has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result}},"_to-iobject.js":function(require,exports,module){var IObject=require("./_iobject");var defined=require("./_defined");module.exports=function(it){return IObject(defined(it))}},"_iobject.js":function(require,exports,module){var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},"_cof.js":function(require,exports,module){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},"_array-includes.js":function(require,exports,module){var toIObject=require("./_to-iobject");var toLength=require("./_to-length");var toAbsoluteIndex=require("./_to-absolute-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}return!IS_INCLUDES&&-1}}},"_to-length.js":function(require,exports,module){var toInteger=require("./_to-integer");var min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},"_to-absolute-index.js":function(require,exports,module){var toInteger=require("./_to-integer");var max=Math.max;var min=Math.min;module.exports=function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length)}},"_shared-key.js":function(require,exports,module){var shared=require("./_shared")("keys");var uid=require("./_uid");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},"_shared.js":function(require,exports,module){var global=require("./_global");var SHARED="__core-js_shared__";var store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},"_uid.js":function(require,exports,module){var id=0;var px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},"_enum-bug-keys.js":function(require,exports,module){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"_html.js":function(require,exports,module){var document=require("./_global").document;module.exports=document&&document.documentElement},"_set-to-string-tag.js":function(require,exports,module){var def=require("./_object-dp").f;var has=require("./_has");var TAG=require("./_wks")("toStringTag");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},"_wks.js":function(require,exports,module){var store=require("./_shared")("wks");var uid=require("./_uid");var Symbol=require("./_global").Symbol;var USE_SYMBOL=typeof Symbol=="function";var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},"_object-gpo.js":function(require,exports,module){var has=require("./_has");var toObject=require("./_to-object");var IE_PROTO=require("./_shared-key")("IE_PROTO");var ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor=="function"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null}},"_to-object.js":function(require,exports,module){var defined=require("./_defined");module.exports=function(it){return Object(defined(it))}},"web.dom.iterable.js":function(require){require("./es6.array.iterator");var global=require("./_global");var hide=require("./_hide");var Iterators=require("./_iterators");var TO_STRING_TAG=require("./_wks")("toStringTag");var DOMIterables=("CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,"+"DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,"+"MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,"+"SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,"+"TextTrackList,TouchList").split(",");for(var i=0;i<DOMIterables.length;i++){var NAME=DOMIterables[i];var Collection=global[NAME];var proto=Collection&&Collection.prototype;if(proto&&!proto[TO_STRING_TAG])hide(proto,TO_STRING_TAG,NAME);Iterators[NAME]=Iterators.Array}},"es6.array.iterator.js":function(require,exports,module){"use strict";var addToUnscopables=require("./_add-to-unscopables");var step=require("./_iter-step");var Iterators=require("./_iterators");var toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind},function(){var O=this._t;var kind=this._k;var index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])},"values");Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries")},"_add-to-unscopables.js":function(require,exports,module){module.exports=function(){}},"_iter-step.js":function(require,exports,module){module.exports=function(done,value){return{value:value,done:!!done}}},"_wks-ext.js":function(require,exports){exports.f=require("./_wks")},"es6.symbol.js":function(require){"use strict";var global=require("./_global");var has=require("./_has");var DESCRIPTORS=require("./_descriptors");var $export=require("./_export");var redefine=require("./_redefine");var META=require("./_meta").KEY;var $fails=require("./_fails");var shared=require("./_shared");var setToStringTag=require("./_set-to-string-tag");var uid=require("./_uid");var wks=require("./_wks");var wksExt=require("./_wks-ext");var wksDefine=require("./_wks-define");var enumKeys=require("./_enum-keys");var isArray=require("./_is-array");var anObject=require("./_an-object");var toIObject=require("./_to-iobject");var toPrimitive=require("./_to-primitive");var createDesc=require("./_property-desc");var _create=require("./_object-create");var gOPNExt=require("./_object-gopn-ext");var $GOPD=require("./_object-gopd");var $DP=require("./_object-dp");var $keys=require("./_object-keys");var gOPD=$GOPD.f;var dP=$DP.f;var gOPN=gOPNExt.f;var $Symbol=global.Symbol;var $JSON=global.JSON;var _stringify=$JSON&&$JSON.stringify;var PROTOTYPE="prototype";var HIDDEN=wks("_hidden");var TO_PRIMITIVE=wks("toPrimitive");var isEnum={}.propertyIsEnumerable;var SymbolRegistry=shared("symbol-registry");var AllSymbols=shared("symbols");var OPSymbols=shared("op-symbols");var ObjectProto=Object[PROTOTYPE];var USE_NATIVE=typeof $Symbol=="function";var QObject=global.QObject;var setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a!=7})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);if(protoDesc)delete ObjectProto[key];dP(it,key,D);if(protoDesc&&it!==ObjectProto)dP(ObjectProto,key,protoDesc)}:dP;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);sym._k=tag;return sym};var isSymbol=USE_NATIVE&&typeof $Symbol.iterator=="symbol"?function(it){return typeof it=="symbol"}:function(it){return it instanceof $Symbol};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectProto)$defineProperty(OPSymbols,key,D);anObject(it);key=toPrimitive(key,true);anObject(D);if(has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))dP(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)})}return setSymbolDesc(it,key,D)}return dP(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P));var i=0;var l=keys.length;var key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=toPrimitive(key,true));if(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return false;return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=toIObject(it);key=toPrimitive(key,true);if(it===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return;var D=gOPD(it,key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=gOPN(toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN&&key!=META)result.push(key)}return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectProto;var names=gOPN(IS_OP?OPSymbols:toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(has(AllSymbols,key=names[i++])&&(IS_OP?has(ObjectProto,key):true))result.push(AllSymbols[key])}return result};if(!USE_NATIVE){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:undefined);var $set=function(value){if(this===ObjectProto)$set.call(OPSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value))};if(DESCRIPTORS&&setter)setSymbolDesc(ObjectProto,tag,{configurable:true,set:$set});return wrap(tag)};redefine($Symbol[PROTOTYPE],"toString",function toString(){return this._k});$GOPD.f=$getOwnPropertyDescriptor;$DP.f=$defineProperty;require("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames;require("./_object-pie").f=$propertyIsEnumerable;require("./_object-gops").f=$getOwnPropertySymbols;if(DESCRIPTORS&&!require("./_library")){redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,true)}wksExt.f=function(name){return wrap(wks(name))}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol!");for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key},useSetter:function(){setter=true},useSimple:function(){setter=false}});$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return _stringify([S])!="[null]"||_stringify({a:S})!="{}"||_stringify(Object(S))!="{}"})),"JSON",{stringify:function stringify(it){if(it===undefined||isSymbol(it))return;var args=[it];var i=1;var replacer,$replacer;while(arguments.length>i)args.push(arguments[i++]);replacer=args[1];if(typeof replacer=="function")$replacer=replacer;if($replacer||!isArray(replacer))replacer=function(key,value){if($replacer)value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||require("./_hide")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",true);setToStringTag(global.JSON,"JSON",true)},"_meta.js":function(require,exports,module){var META=require("./_uid")("meta");var isObject=require("./_is-object");var has=require("./_has");var setDesc=require("./_object-dp").f;var id=0;var isExtensible=Object.isExtensible||function(){return true};var FREEZE=!require("./_fails")(function(){return isExtensible(Object.preventExtensions({}))});var setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})};var fastKey=function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i};var getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return true;if(!create)return false;setMeta(it)}return it[META].w};var onFreeze=function(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META))setMeta(it);return it};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}},"_wks-define.js":function(require,exports,module){var global=require("./_global");var core=require("./_core");var LIBRARY=require("./_library");var wksExt=require("./_wks-ext");var defineProperty=require("./_object-dp").f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});if(name.charAt(0)!="_"&&!(name in $Symbol))defineProperty($Symbol,name,{value:wksExt.f(name)})}},"_enum-keys.js":function(require,exports,module){var getKeys=require("./_object-keys");var gOPS=require("./_object-gops");var pIE=require("./_object-pie");module.exports=function(it){var result=getKeys(it);var getSymbols=gOPS.f;if(getSymbols){var symbols=getSymbols(it);var isEnum=pIE.f;var i=0;var key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))result.push(key)}return result}},"_object-gops.js":function(require,exports){exports.f=Object.getOwnPropertySymbols},"_object-pie.js":function(require,exports){exports.f={}.propertyIsEnumerable},"_is-array.js":function(require,exports,module){var cof=require("./_cof");module.exports=Array.isArray||function isArray(arg){return cof(arg)=="Array"}},"_object-gopn-ext.js":function(require,exports,module){var toIObject=require("./_to-iobject");var gOPN=require("./_object-gopn").f;var toString={}.toString;var windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&toString.call(it)=="[object Window]"?getWindowNames(it):gOPN(toIObject(it))}},"_object-gopn.js":function(require,exports){var $keys=require("./_object-keys-internal");var hiddenKeys=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return $keys(O,hiddenKeys)}},"_object-gopd.js":function(require,exports){var pIE=require("./_object-pie");var createDesc=require("./_property-desc");var toIObject=require("./_to-iobject");var toPrimitive=require("./_to-primitive");var has=require("./_has");var IE8_DOM_DEFINE=require("./_ie8-dom-define");var gOPD=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?gOPD:function getOwnPropertyDescriptor(O,P){O=toIObject(O);P=toPrimitive(P,true);if(IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},"es6.object.to-string.js":function(){},"es7.symbol.async-iterator.js":function(require){require("./_wks-define")("asyncIterator")},"es7.symbol.observable.js":function(require){require("./_wks-define")("observable")},"es6.object.set-prototype-of.js":function(require){var $export=require("./_export");$export($export.S,"Object",{setPrototypeOf:require("./_set-proto").set})},"_set-proto.js":function(require,exports,module){var isObject=require("./_is-object");var anObject=require("./_an-object");var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},"es6.object.create.js":function(require){var $export=require("./_export");$export($export.S,"Object",{create:require("./_object-create")})},"es6.array.from.js":function(require){"use strict";var ctx=require("./_ctx");var $export=require("./_export");var toObject=require("./_to-object");var call=require("./_iter-call");var isArrayIter=require("./_is-array-iter");var toLength=require("./_to-length");var createProperty=require("./_create-property");var getIterFn=require("./core.get-iterator-method");$export($export.S+$export.F*!require("./_iter-detect")(function(iter){Array.from(iter)}),"Array",{from:function from(arrayLike){var O=toObject(arrayLike);var C=typeof this=="function"?this:Array;var aLen=arguments.length;var mapfn=aLen>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var index=0;var iterFn=getIterFn(O);var length,result,step,iterator;if(mapping)mapfn=ctx(mapfn,aLen>2?arguments[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++){createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],true):step.value)}}else{length=toLength(O.length);for(result=new C(length);length>index;index++){createProperty(result,index,mapping?mapfn(O[index],index):O[index])}}result.length=index;return result}})},"_iter-call.js":function(require,exports,module){var anObject=require("./_an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},"_is-array-iter.js":function(require,exports,module){var Iterators=require("./_iterators");var ITERATOR=require("./_wks")("iterator");var ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},"_create-property.js":function(require,exports,module){"use strict";var $defineProperty=require("./_object-dp");var createDesc=require("./_property-desc");module.exports=function(object,index,value){if(index in object)$defineProperty.f(object,index,createDesc(0,value));else object[index]=value}},"core.get-iterator-method.js":function(require,exports,module){var classof=require("./_classof");var ITERATOR=require("./_wks")("iterator");var Iterators=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},"_classof.js":function(require,exports,module){var cof=require("./_cof");var TAG=require("./_wks")("toStringTag");var ARG=cof(function(){return arguments}())=="Arguments";var tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=tryGet(O=Object(it),TAG))=="string"?T:ARG?cof(O):(B=cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B}},"_iter-detect.js":function(require,exports,module){var ITERATOR=require("./_wks")("iterator");var SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7];var iter=arr[ITERATOR]();iter.next=function(){return{done:safe=true}};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}}}}},"babel-runtime":{"package.json":function(require,exports,module){module.exports={_from:"babel-runtime@^6.26.0",_id:"babel-runtime@6.26.0",_inBundle:false,_integrity:"sha1-llxwWGaOgrVde/4E/yM3vItWR/4=",_location:"/babel-runtime",_phantomChildren:{},_requested:{type:"range",registry:true,raw:"babel-runtime@^6.26.0",name:"babel-runtime",escapedName:"babel-runtime",rawSpec:"^6.26.0",saveSpec:null,fetchSpec:"^6.26.0"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/babel-runtime/-/babel-runtime-6.26.0.tgz",_shasum:"965c7058668e82b55d7bfe04ff2337bc8b5647fe",_spec:"babel-runtime@^6.26.0",_where:"/home/vagrant/meteorclient/dist/tmp-meteor-client-side-bundler",author:{name:"Sebastian McKenzie",email:"sebmck@gmail.com"},bundleDependencies:false,dependencies:{"core-js":"^2.4.0","regenerator-runtime":"^0.11.0"},deprecated:false,description:"babel selfContained runtime",devDependencies:{"babel-helpers":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0"},license:"MIT",name:"babel-runtime",repository:{type:"git",url:"https://github.com/babel/babel/tree/master/packages/babel-runtime"},version:"6.26.0"}},regenerator:{"index.js":function(require,exports,module){module.exports=require("regenerator-runtime")}},helpers:{"typeof.js":function(require,exports){"use strict";exports.__esModule=true;var _iterator=require("../core-js/symbol/iterator");var _iterator2=_interopRequireDefault(_iterator);var _symbol=require("../core-js/symbol");var _symbol2=_interopRequireDefault(_symbol);var _typeof=typeof _symbol2.default==="function"&&typeof _iterator2.default==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof _symbol2.default==="function"&&obj.constructor===_symbol2.default&&obj!==_symbol2.default.prototype?"symbol":typeof obj};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=typeof _symbol2.default==="function"&&_typeof(_iterator2.default)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof(obj)}:function(obj){return obj&&typeof _symbol2.default==="function"&&obj.constructor===_symbol2.default&&obj!==_symbol2.default.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof(obj)}},"classCallCheck.js":function(require,exports){"use strict";exports.__esModule=true;exports.default=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}},"possibleConstructorReturn.js":function(require,exports){"use strict";exports.__esModule=true;var _typeof2=require("../helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":(0,_typeof3.default)(call))==="object"||typeof call==="function")?call:self}},"inherits.js":function(require,exports){"use strict";exports.__esModule=true;var _setPrototypeOf=require("../core-js/object/set-prototype-of");var _setPrototypeOf2=_interopRequireDefault(_setPrototypeOf);var _create=require("../core-js/object/create");var _create2=_interopRequireDefault(_create);var _typeof2=require("../helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":(0,_typeof3.default)(superClass)))}subClass.prototype=(0,_create2.default)(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)_setPrototypeOf2.default?(0,_setPrototypeOf2.default)(subClass,superClass):subClass.__proto__=superClass}},"toConsumableArray.js":function(require,exports){"use strict";exports.__esModule=true;var _from=require("../core-js/array/from");var _from2=_interopRequireDefault(_from);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return(0,_from2.default)(arr)}}}},"core-js":{symbol:{"iterator.js":function(require,exports,module){module.exports={default:require("core-js/library/fn/symbol/iterator"),__esModule:true}}},"symbol.js":function(require,exports,module){module.exports={default:require("core-js/library/fn/symbol"),__esModule:true}},object:{"set-prototype-of.js":function(require,exports,module){module.exports={default:require("core-js/library/fn/object/set-prototype-of"),__esModule:true}},"create.js":function(require,exports,module){module.exports={default:require("core-js/library/fn/object/create"),__esModule:true}}},array:{"from.js":function(require,exports,module){module.exports={default:require("core-js/library/fn/array/from"),__esModule:true}}}}},"regenerator-runtime":{"package.json":function(require,exports,module){exports.name="regenerator-runtime";exports.version="0.11.0";exports.main="runtime-module.js"},"runtime-module.js":function(require,exports,module){var g=function(){return this}()||Function("return this")();var hadRuntime=g.regeneratorRuntime&&Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime")>=0;var oldRuntime=hadRuntime&&g.regeneratorRuntime;g.regeneratorRuntime=undefined;module.exports=require("./runtime");if(hadRuntime){g.regeneratorRuntime=oldRuntime}else{try{delete g.regeneratorRuntime}catch(e){g.regeneratorRuntime=undefined}}},"runtime.js":function(require,exports,module){!function(global){"use strict";var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var undefined;var $Symbol=typeof Symbol==="function"?Symbol:{};var iteratorSymbol=$Symbol.iterator||"@@iterator";var asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator";var toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";var inModule=typeof module==="object";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){module.exports=runtime}return}runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator;var generator=Object.create(protoGenerator.prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator}runtime.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf;var NativeIteratorPrototype=getProto&&getProto(getProto(values([])));if(NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)){IteratorPrototype=NativeIteratorPrototype}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction";function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false};runtime.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype)}else{genFun.__proto__=GeneratorFunctionPrototype;if(!(toStringTagSymbol in genFun)){genFun[toStringTagSymbol]="GeneratorFunction"}}genFun.prototype=Object.create(Gp);return genFun};runtime.awrap=function(arg){return{__await:arg}};function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type==="throw"){reject(record.arg)}else{var result=record.arg;var value=result.value;if(value&&typeof value==="object"&&hasOwn.call(value,"__await")){return Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)})}return Promise.resolve(value).then(function(unwrapped){result.value=unwrapped;resolve(result)},reject)}}var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}this._invoke=enqueue}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this};runtime.AsyncIterator=AsyncIterator;runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running")}if(state===GenStateCompleted){if(method==="throw"){throw arg}return doneResult()}context.method=method;context.arg=arg;while(true){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if(context.method==="next"){context.sent=context._sent=context.arg}else if(context.method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw context.arg}context.dispatchException(context.arg)}else if(context.method==="return"){context.abrupt("return",context.arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;if(record.arg===ContinueSentinel){continue}return{value:record.arg,done:context.done}}else if(record.type==="throw"){state=GenStateCompleted;context.method="throw";context.arg=record.arg}}}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){context.delegate=null;if(context.method==="throw"){if(delegate.iterator.return){context.method="return";context.arg=undefined;maybeInvokeDelegate(delegate,context);if(context.method==="throw"){return ContinueSentinel}}context.method="throw";context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if(record.type==="throw"){context.method="throw";context.arg=record.arg;context.delegate=null;return ContinueSentinel}var info=record.arg;if(!info){context.method="throw";context.arg=new TypeError("iterator result is not an object");context.delegate=null;return ContinueSentinel}if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc;if(context.method!=="return"){context.method="next";context.arg=undefined}}else{return info}context.delegate=null;return ContinueSentinel}defineIteratorMethods(Gp);Gp[toStringTagSymbol]="Generator";Gp[iteratorSymbol]=function(){return this};Gp.toString=function(){return"[object Generator]"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true)}runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next==="function"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined;next.done=true;return next};return next.next=next}}return{next:doneResult}}runtime.values=values;function doneResult(){return{value:undefined,done:true}}Context.prototype={constructor:Context,reset:function(skipTempReset){this.prev=0;this.next=0;this.sent=this._sent=undefined;this.done=false;this.delegate=null;this.method="next";this.arg=undefined;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)==="t"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined}}}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;if(caught){context.method="next";context.arg=undefined}return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.method="next";this.next=finallyEntry.finallyLoc;return ContinueSentinel}return this.complete(record)},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg}if(record.type==="break"||record.type==="continue"){this.next=record.arg}else if(record.type==="return"){this.rval=this.arg=record.arg;this.method="return";this.next="end"}else if(record.type==="normal"&&afterLoc){this.next=afterLoc}return ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel}}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};if(this.method==="next"){this.arg=undefined}return ContinueSentinel}}}(function(){return this}()||Function("return this")())}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/modules/client.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.modules=exports,{meteorInstall:meteorInstall})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var meteorInstall=Package.modules.meteorInstall;var Promise;var require=meteorInstall({node_modules:{meteor:{promise:{"client.js":function(require,exports){require("meteor-promise").makeCompatible(exports.Promise=require("./common.js").Promise)},"common.js":function(require,exports){var global=this;if(typeof global.Promise==="function"){exports.Promise=global.Promise}else{exports.Promise=require("promise/lib/es6-extensions")}exports.Promise.prototype.done=function(onFulfilled,onRejected){var self=this;if(arguments.length>0){self=this.then.apply(this,arguments)}self.then(null,function(err){Meteor._setImmediate(function(){throw err})})}},node_modules:{"meteor-promise":{"package.json":function(require,exports){exports.name="meteor-promise";exports.version="0.8.6";exports.browser="promise_client.js";exports.main="promise_server.js"},"promise_client.js":function(require,exports){exports.makeCompatible=function(Promise){var es6PromiseThen=Promise.prototype.then;Promise.prototype.then=function(onResolved,onRejected){if(typeof Meteor==="object"&&typeof Meteor.bindEnvironment==="function"){return es6PromiseThen.call(this,onResolved&&Meteor.bindEnvironment(onResolved,raise),onRejected&&Meteor.bindEnvironment(onRejected,raise))}return es6PromiseThen.call(this,onResolved,onRejected)}};function raise(exception){throw exception}}},promise:{lib:{"es6-extensions.js":function(require,exports,module){"use strict";var Promise=require("./core.js");module.exports=Promise;var TRUE=valuePromise(true);var FALSE=valuePromise(false);var NULL=valuePromise(null);var UNDEFINED=valuePromise(undefined);var ZERO=valuePromise(0);var EMPTYSTRING=valuePromise("");function valuePromise(value){var p=new Promise(Promise._44);p._83=1;p._18=value;return p}Promise.resolve=function(value){if(value instanceof Promise)return value;if(value===null)return NULL;if(value===undefined)return UNDEFINED;if(value===true)return TRUE;if(value===false)return FALSE;if(value===0)return ZERO;if(value==="")return EMPTYSTRING;if(typeof value==="object"||typeof value==="function"){try{var then=value.then;if(typeof then==="function"){return new Promise(then.bind(value))}}catch(ex){return new Promise(function(resolve,reject){reject(ex)})}}return valuePromise(value)};Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){if(args.length===0)return resolve([]);var remaining=args.length;function res(i,val){if(val&&(typeof val==="object"||typeof val==="function")){if(val instanceof Promise&&val.then===Promise.prototype.then){while(val._83===3){val=val._18}if(val._83===1)return res(i,val._18);if(val._83===2)reject(val._18);val.then(function(val){res(i,val)},reject);return}else{var then=val.then;if(typeof then==="function"){var p=new Promise(then.bind(val));p.then(function(val){res(i,val)},reject);return}}}args[i]=val;if(--remaining===0){resolve(args)}}for(var i=0;i<args.length;i++){res(i,args[i])}})};Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})};Promise.race=function(values){return new Promise(function(resolve,reject){values.forEach(function(value){Promise.resolve(value).then(resolve,reject)})})};Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)}},"core.js":function(require,exports,module){"use strict";var asap=require("asap/raw");function noop(){}var LAST_ERROR=null;var IS_ERROR={};function getThen(obj){try{return obj.then}catch(ex){LAST_ERROR=ex;return IS_ERROR}}function tryCallOne(fn,a){try{return fn(a)}catch(ex){LAST_ERROR=ex;return IS_ERROR}}function tryCallTwo(fn,a,b){try{fn(a,b)}catch(ex){LAST_ERROR=ex;return IS_ERROR}}module.exports=Promise;function Promise(fn){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof fn!=="function"){throw new TypeError("Promise constructor's argument is not a function")}this._75=0;this._83=0;this._18=null;this._38=null;if(fn===noop)return;doResolve(fn,this)}Promise._47=null;Promise._71=null;Promise._44=noop;Promise.prototype.then=function(onFulfilled,onRejected){if(this.constructor!==Promise){return safeThen(this,onFulfilled,onRejected)}var res=new Promise(noop);handle(this,new Handler(onFulfilled,onRejected,res));return res};function safeThen(self,onFulfilled,onRejected){return new self.constructor(function(resolve,reject){var res=new Promise(noop);res.then(resolve,reject);handle(self,new Handler(onFulfilled,onRejected,res))})}function handle(self,deferred){while(self._83===3){self=self._18}if(Promise._47){Promise._47(self)}if(self._83===0){if(self._75===0){self._75=1;self._38=deferred;return}if(self._75===1){self._75=2;self._38=[self._38,deferred];return}self._38.push(deferred);return}handleResolved(self,deferred)}function handleResolved(self,deferred){asap(function(){var cb=self._83===1?deferred.onFulfilled:deferred.onRejected;if(cb===null){if(self._83===1){resolve(deferred.promise,self._18)}else{reject(deferred.promise,self._18)}return}var ret=tryCallOne(cb,self._18);if(ret===IS_ERROR){reject(deferred.promise,LAST_ERROR)}else{resolve(deferred.promise,ret)}})}function resolve(self,newValue){if(newValue===self){return reject(self,new TypeError("A promise cannot be resolved with itself."))}if(newValue&&(typeof newValue==="object"||typeof newValue==="function")){var then=getThen(newValue);if(then===IS_ERROR){return reject(self,LAST_ERROR)}if(then===self.then&&newValue instanceof Promise){self._83=3;self._18=newValue;finale(self);return}else if(typeof then==="function"){doResolve(then.bind(newValue),self);return}}self._83=1;self._18=newValue;finale(self)}function reject(self,newValue){self._83=2;self._18=newValue;if(Promise._71){Promise._71(self,newValue)}finale(self)}function finale(self){if(self._75===1){handle(self,self._38);self._38=null}if(self._75===2){for(var i=0;i<self._38.length;i++){handle(self,self._38[i])}self._38=null}}function Handler(onFulfilled,onRejected,promise){this.onFulfilled=typeof onFulfilled==="function"?onFulfilled:null;this.onRejected=typeof onRejected==="function"?onRejected:null;this.promise=promise}function doResolve(fn,promise){var done=false;var res=tryCallTwo(fn,function(value){if(done)return;done=true;resolve(promise,value)},function(reason){if(done)return;done=true;reject(promise,reason)});if(!done&&res===IS_ERROR){done=true;reject(promise,LAST_ERROR)}}}}},asap:{"raw.js":function(require,exports,module){"use strict";var domain;var hasSetImmediate=typeof setImmediate==="function";module.exports=rawAsap;function rawAsap(task){if(!queue.length){requestFlush();flushing=true}queue[queue.length]=task}var queue=[];var flushing=false;var index=0;var capacity=1024;function flush(){while(index<queue.length){var currentIndex=index;index=index+1;queue[currentIndex].call();if(index>capacity){for(var scan=0,newLength=queue.length-index;scan<newLength;scan++){queue[scan]=queue[scan+index]}queue.length-=index;index=0}}queue.length=0;index=0;flushing=false}rawAsap.requestFlush=requestFlush;function requestFlush(){var parentDomain=process.domain;if(parentDomain){if(!domain){domain=require("domain")}domain.active=process.domain=null}if(flushing&&hasSetImmediate){setImmediate(flush)}else{process.nextTick(flush)}if(parentDomain){domain.active=process.domain=parentDomain}}}}}}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/promise/client.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.promise=exports,{Promise:Promise})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var meteorInstall=Package.modules.meteorInstall;var Promise=Package.promise.Promise;var Symbol,Map,Set;var require=meteorInstall({node_modules:{meteor:{"ecmascript-runtime-client":{"runtime.js":function(require,exports,module){try{require("core-js/modules/es6.symbol");require("core-js/modules/es6.map");require("core-js/modules/es6.set");var core=function(){try{return require("core-js/modules/_core")}catch(e){return require("core-js/modules/$.core")}}()}catch(e){throw new Error(["The core-js npm package could not be found in your node_modules ","directory. Please run the following command to install it:","","  meteor npm install --save core-js",""].join("\n"))}Symbol=exports.Symbol=core.Symbol;Map=exports.Map=core.Map;Set=exports.Set=core.Set;require("core-js/es6/array");require("core-js/es6/function");require("core-js/es6/math");require("core-js/es6/object");require("core-js/es6/regexp");require("core-js/es6/string");require("core-js/es6/weak-map");require("core-js/es6/weak-set");require("core-js/es7/array");require("core-js/es7/object");require("core-js/modules/es6.number.epsilon");require("core-js/modules/es6.number.is-finite");require("core-js/modules/es6.number.is-integer");require("core-js/modules/es6.number.is-nan");require("core-js/modules/es6.number.is-safe-integer");require("core-js/modules/es6.number.max-safe-integer");require("core-js/modules/es6.number.min-safe-integer");require("core-js/modules/es6.number.parse-float");require("core-js/modules/es6.number.parse-int");require("core-js/modules/es6.typed.uint8-array");require("core-js/modules/es6.typed.uint32-array")}}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/ecmascript-runtime-client/runtime.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["ecmascript-runtime-client"]=exports,{Symbol:Symbol,Map:Map,Set:Set})})();(function(){if(typeof Package==="undefined")Package={};Package["ecmascript-runtime"]={}})();(function(){if(typeof Package==="undefined")Package={};Package.ecmascript={}})();(function(){if(typeof Package==="undefined")Package={};Package["babel-compiler"]={}})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var meteorInstall=Package.modules.meteorInstall;var Promise=Package.promise.Promise;var meteorBabelHelpers;var require=meteorInstall({node_modules:{meteor:{"babel-runtime":{"babel-runtime.js":function(require,exports){exports.meteorBabelHelpers=require("meteor-babel-helpers");exports.checkHelper=function checkHelper(id){return false};try{var babelRuntimeVersion=require("babel-runtime/package.json").version;var regeneratorRuntime=require("babel-runtime/regenerator")}catch(e){throw new Error(["The babel-runtime npm package could not be found in your node_modules ","directory. Please run the following command to install it:","","  meteor npm install --save babel-runtime",""].join("\n"))}if(parseInt(babelRuntimeVersion,10)<6){throw new Error(["The version of babel-runtime installed in your node_modules directory ","("+babelRuntimeVersion+") is out of date. Please upgrade it by running ","","  meteor npm install --save babel-runtime","","in your application directory.",""].join("\n"))}if(regeneratorRuntime&&typeof Promise==="function"&&typeof Promise.asyncApply==="function"){var realAsync=regeneratorRuntime.async;regeneratorRuntime.async=function(){return Promise.asyncApply(realAsync,regeneratorRuntime,arguments)}}},node_modules:{"meteor-babel-helpers":{"package.json":function(require,exports){exports.name="meteor-babel-helpers";exports.version="0.0.3";exports.main="index.js"},"index.js":function(require,exports,module){function canDefineNonEnumerableProperties(){var testObj={};var testPropName="t";try{Object.defineProperty(testObj,testPropName,{enumerable:false,value:testObj});for(var k in testObj){if(k===testPropName){return false}}}catch(e){return false}return testObj[testPropName]===testObj}function sanitizeEasy(value){return value}function sanitizeHard(obj){if(Array.isArray(obj)){var newObj={};var keys=Object.keys(obj);var keyCount=keys.length;for(var i=0;i<keyCount;++i){var key=keys[i];newObj[key]=obj[key]}return newObj}return obj}meteorBabelHelpers=module.exports={sanitizeForInObject:canDefineNonEnumerableProperties()?sanitizeEasy:sanitizeHard,_sanitizeForInObjectHard:sanitizeHard}}}}}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/babel-runtime/babel-runtime.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["babel-runtime"]=exports,{meteorBabelHelpers:meteorBabelHelpers})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var Base64=Package.base64.Base64;var meteorInstall=Package.modules.meteorInstall;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Symbol=Package["ecmascript-runtime-client"].Symbol;var Map=Package["ecmascript-runtime-client"].Map;var Set=Package["ecmascript-runtime-client"].Set;var v,EJSON;var require=meteorInstall({node_modules:{meteor:{ejson:{"ejson.js":function(require,exports,module){var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({EJSON:function(){return EJSON}});var EJSON={};var customTypes={};var hasOwn=function(obj,prop){return{}.hasOwnProperty.call(obj,prop)};var isArguments=function(obj){return obj!=null&&hasOwn(obj,"callee")};var isInfOrNan=function(obj){return Number.isNaN(obj)||obj===Infinity||obj===-Infinity};EJSON.addType=function(name,factory){if(hasOwn(customTypes,name)){throw new Error("Type "+name+" already present")}customTypes[name]=factory};var builtinConverters=[{matchJSONValue:function(obj){return hasOwn(obj,"$date")&&Object.keys(obj).length===1},matchObject:function(obj){return obj instanceof Date},toJSONValue:function(obj){return{$date:obj.getTime()}},fromJSONValue:function(obj){return new Date(obj.$date)}},{matchJSONValue:function(obj){return hasOwn(obj,"$regexp")&&hasOwn(obj,"$flags")&&Object.keys(obj).length===2},matchObject:function(obj){return obj instanceof RegExp},toJSONValue:function(regexp){return{$regexp:regexp.source,$flags:regexp.flags}},fromJSONValue:function(obj){return new RegExp(obj.$regexp,obj.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(obj){return hasOwn(obj,"$InfNaN")&&Object.keys(obj).length===1},matchObject:isInfOrNan,toJSONValue:function(obj){var sign=void 0;if(Number.isNaN(obj)){sign=0}else if(obj===Infinity){sign=1}else{sign=-1}return{$InfNaN:sign}},fromJSONValue:function(obj){return obj.$InfNaN/0}},{matchJSONValue:function(obj){return hasOwn(obj,"$binary")&&Object.keys(obj).length===1},matchObject:function(obj){return typeof Uint8Array!=="undefined"&&obj instanceof Uint8Array||obj&&hasOwn(obj,"$Uint8ArrayPolyfill")},toJSONValue:function(obj){return{$binary:Base64.encode(obj)}},fromJSONValue:function(obj){return Base64.decode(obj.$binary)}},{matchJSONValue:function(obj){return hasOwn(obj,"$escape")&&Object.keys(obj).length===1},matchObject:function(obj){var match=false;if(obj){var keyCount=Object.keys(obj).length;if(keyCount===1||keyCount===2){match=builtinConverters.some(function(converter){return converter.matchJSONValue(obj)})}}return match},toJSONValue:function(obj){var newObj={};Object.keys(obj).forEach(function(key){newObj[key]=EJSON.toJSONValue(obj[key])});return{$escape:newObj}},fromJSONValue:function(obj){var newObj={};Object.keys(obj.$escape).forEach(function(key){newObj[key]=EJSON.fromJSONValue(obj.$escape[key])});return newObj}},{matchJSONValue:function(obj){return hasOwn(obj,"$type")&&hasOwn(obj,"$value")&&Object.keys(obj).length===2},matchObject:function(obj){return EJSON._isCustomType(obj)},toJSONValue:function(obj){var jsonValue=Meteor._noYieldsAllowed(function(){return obj.toJSONValue()});return{$type:obj.typeName(),$value:jsonValue}},fromJSONValue:function(obj){var typeName=obj.$type;if(!hasOwn(customTypes,typeName)){throw new Error("Custom EJSON type "+typeName+" is not defined")}var converter=customTypes[typeName];return Meteor._noYieldsAllowed(function(){return converter(obj.$value)})}}];EJSON._isCustomType=function(obj){return obj&&typeof obj.toJSONValue==="function"&&typeof obj.typeName==="function"&&hasOwn(customTypes,obj.typeName())};EJSON._getTypes=function(){return customTypes};EJSON._getConverters=function(){return builtinConverters};var toJSONValueHelper=function(item){for(var i=0;i<builtinConverters.length;i++){var converter=builtinConverters[i];if(converter.matchObject(item)){return converter.toJSONValue(item)}}return undefined};var adjustTypesToJSONValue=function(obj){if(obj===null){return null}var maybeChanged=toJSONValueHelper(obj);if(maybeChanged!==undefined){return maybeChanged}if((typeof obj==="undefined"?"undefined":(0,_typeof3.default)(obj))!=="object"){return obj}Object.keys(obj).forEach(function(key){var value=obj[key];if((typeof value==="undefined"?"undefined":(0,_typeof3.default)(value))!=="object"&&value!==undefined&&!isInfOrNan(value)){return}var changed=toJSONValueHelper(value);if(changed){obj[key]=changed;return}adjustTypesToJSONValue(value)});return obj};EJSON._adjustTypesToJSONValue=adjustTypesToJSONValue;EJSON.toJSONValue=function(item){var changed=toJSONValueHelper(item);if(changed!==undefined){return changed}var newItem=item;if((typeof item==="undefined"?"undefined":(0,_typeof3.default)(item))==="object"){newItem=EJSON.clone(item);adjustTypesToJSONValue(newItem)}return newItem};var fromJSONValueHelper=function(value){if((typeof value==="undefined"?"undefined":(0,_typeof3.default)(value))==="object"&&value!==null){var keys=Object.keys(value);if(keys.length<=2&&keys.every(function(k){return typeof k==="string"&&k.substr(0,1)==="$"})){for(var i=0;i<builtinConverters.length;i++){var converter=builtinConverters[i];if(converter.matchJSONValue(value)){return converter.fromJSONValue(value)}}}}return value};var adjustTypesFromJSONValue=function(obj){if(obj===null){return null}var maybeChanged=fromJSONValueHelper(obj);if(maybeChanged!==obj){return maybeChanged}if((typeof obj==="undefined"?"undefined":(0,_typeof3.default)(obj))!=="object"){return obj}Object.keys(obj).forEach(function(key){var value=obj[key];if((typeof value==="undefined"?"undefined":(0,_typeof3.default)(value))==="object"){var changed=fromJSONValueHelper(value);if(value!==changed){obj[key]=changed;return}adjustTypesFromJSONValue(value)}});return obj};EJSON._adjustTypesFromJSONValue=adjustTypesFromJSONValue;EJSON.fromJSONValue=function(item){var changed=fromJSONValueHelper(item);if(changed===item&&(typeof item==="undefined"?"undefined":(0,_typeof3.default)(item))==="object"){changed=EJSON.clone(item);adjustTypesFromJSONValue(changed)}return changed};EJSON.stringify=function(item,options){var serialized=void 0;var json=EJSON.toJSONValue(item);if(options&&(options.canonical||options.indent)){var canonicalStringify=void 0;module.watch(require("./stringify"),{default:function(v){canonicalStringify=v}},0);serialized=canonicalStringify(json,options)}else{serialized=JSON.stringify(json)}return serialized};EJSON.parse=function(item){if(typeof item!=="string"){throw new Error("EJSON.parse argument should be a string")}return EJSON.fromJSONValue(JSON.parse(item))};EJSON.isBinary=function(obj){return!!(typeof Uint8Array!=="undefined"&&obj instanceof Uint8Array||obj&&obj.$Uint8ArrayPolyfill)};EJSON.equals=function(a,b,options){var i=void 0;var keyOrderSensitive=!!(options&&options.keyOrderSensitive);if(a===b){return true}if(Number.isNaN(a)&&Number.isNaN(b)){return true}if(!a||!b){return false}if(!((typeof a==="undefined"?"undefined":(0,_typeof3.default)(a))==="object"&&(typeof b==="undefined"?"undefined":(0,_typeof3.default)(b))==="object")){return false}if(a instanceof Date&&b instanceof Date){return a.valueOf()===b.valueOf()}if(EJSON.isBinary(a)&&EJSON.isBinary(b)){if(a.length!==b.length){return false}for(i=0;i<a.length;i++){if(a[i]!==b[i]){return false}}return true}if(typeof a.equals==="function"){return a.equals(b,options)}if(typeof b.equals==="function"){return b.equals(a,options)}if(a instanceof Array){if(!(b instanceof Array)){return false}if(a.length!==b.length){return false}for(i=0;i<a.length;i++){if(!EJSON.equals(a[i],b[i],options)){return false}}return true}switch(EJSON._isCustomType(a)+EJSON._isCustomType(b)){case 1:return false;case 2:return EJSON.equals(EJSON.toJSONValue(a),EJSON.toJSONValue(b));default:}var ret=void 0;var aKeys=Object.keys(a);var bKeys=Object.keys(b);if(keyOrderSensitive){i=0;ret=aKeys.every(function(key){if(i>=bKeys.length){return false}if(key!==bKeys[i]){return false}if(!EJSON.equals(a[key],b[bKeys[i]],options)){return false}i++;return true})}else{i=0;ret=aKeys.every(function(key){if(!hasOwn(b,key)){return false}if(!EJSON.equals(a[key],b[key],options)){return false}i++;return true})}return ret&&i===bKeys.length};EJSON.clone=function(v){var ret=void 0;if((typeof v==="undefined"?"undefined":(0,_typeof3.default)(v))!=="object"){return v}if(v===null){return null}if(v instanceof Date){return new Date(v.getTime())}if(v instanceof RegExp){return v}if(EJSON.isBinary(v)){ret=EJSON.newBinary(v.length);for(var i=0;i<v.length;i++){ret[i]=v[i]}return ret}if(Array.isArray(v)){return v.map(function(value){return EJSON.clone(value)})}if(isArguments(v)){return Array.from(v).map(function(value){return EJSON.clone(value)})}if(typeof v.clone==="function"){return v.clone()}if(EJSON._isCustomType(v)){return EJSON.fromJSONValue(EJSON.clone(EJSON.toJSONValue(v)),true)}ret={};Object.keys(v).forEach(function(key){ret[key]=EJSON.clone(v[key])});return ret};EJSON.newBinary=Base64.newBinary},"stringify.js":function(require,exports,module){var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function quote(string){return JSON.stringify(string)}var str=function(key,holder,singleIndent,outerIndent,canonical){var value=holder[key];switch(typeof value==="undefined"?"undefined":(0,_typeof3.default)(value)){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":return String(value);case"object":if(!value){return"null"}var innerIndent=outerIndent+singleIndent;var partial=[];if(Array.isArray(value)||{}.hasOwnProperty.call(value,"callee")){var length=value.length;for(var i=0;i<length;i+=1){partial[i]=str(i,value,singleIndent,innerIndent,canonical)||"null"}var _v=void 0;if(partial.length===0){_v="[]"}else if(innerIndent){_v="[\n"+innerIndent+partial.join(",\n"+innerIndent)+"\n"+outerIndent+"]"}else{_v="["+partial.join(",")+"]"}return _v}var keys=Object.keys(value);if(canonical){keys=keys.sort()}keys.forEach(function(k){v=str(k,value,singleIndent,innerIndent,canonical);if(v){partial.push(quote(k)+(innerIndent?": ":":")+v)}});if(partial.length===0){v="{}"}else if(innerIndent){v="{\n"+innerIndent+partial.join(",\n"+innerIndent)+"\n"+outerIndent+"}"}else{v="{"+partial.join(",")+"}"}return v;default:}};var canonicalStringify=function(value,options){var allOptions=Object.assign({indent:"",canonical:false},options);if(allOptions.indent===true){allOptions.indent="  "}else if(typeof allOptions.indent==="number"){var newIndent="";for(var i=0;i<allOptions.indent;i++){newIndent+=" "}allOptions.indent=newIndent}return str("",{"":value},allOptions.indent,"",allOptions.canonical)};module.exportDefault(canonicalStringify)}}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/ejson/ejson.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.ejson=exports,{EJSON:EJSON})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var meteorInstall=Package.modules.meteorInstall;var _=Package.underscore._;var EJSON=Package.ejson.EJSON;var check,Match;var require=meteorInstall({node_modules:{meteor:{check:{"match.js":function(require,exports){var currentArgumentChecker=new Meteor.EnvironmentVariable;var isPlainObject=require("./isPlainObject.js").isPlainObject;var check=exports.check=function(value,pattern){var argChecker=currentArgumentChecker.getOrNullIfOutsideFiber();if(argChecker)argChecker.checking(value);var result=testSubtree(value,pattern);if(result){var err=new Match.Error(result.message);if(result.path){err.message+=" in field "+result.path;err.path=result.path}throw err}};var Match=exports.Match={Optional:function(pattern){return new Optional(pattern)},Maybe:function(pattern){return new Maybe(pattern)},OneOf:function(){return new OneOf(_.toArray(arguments))},Any:["__any__"],Where:function(condition){return new Where(condition)},ObjectIncluding:function(pattern){return new ObjectIncluding(pattern)},ObjectWithValues:function(pattern){return new ObjectWithValues(pattern)},Integer:["__integer__"],Error:Meteor.makeErrorType("Match.Error",function(msg){this.message="Match error: "+msg;this.path="";this.sanitizedError=new Meteor.Error(400,"Match failed")}),test:function(value,pattern){return!testSubtree(value,pattern)},_failIfArgumentsAreNotAllChecked:function(f,context,args,description){var argChecker=new ArgumentChecker(args,description);var result=currentArgumentChecker.withValue(argChecker,function(){return f.apply(context,args)});argChecker.throwUnlessAllArgumentsHaveBeenChecked();return result}};var Optional=function(pattern){this.pattern=pattern};var Maybe=function(pattern){this.pattern=pattern};var OneOf=function(choices){if(_.isEmpty(choices))throw new Error("Must provide at least one choice to Match.OneOf");this.choices=choices};var Where=function(condition){this.condition=condition};var ObjectIncluding=function(pattern){this.pattern=pattern};var ObjectWithValues=function(pattern){this.pattern=pattern};var stringForErrorMessage=function(value,options){options=options||{};if(value===null)return"null";if(options.onlyShowType){return typeof value}if(typeof value!=="object"){return EJSON.stringify(value)}try{JSON.stringify(value)}catch(stringifyError){if(stringifyError.name==="TypeError"){return typeof value}}return EJSON.stringify(value)};var typeofChecks=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[Function,"function"],[undefined,"undefined"]];var testSubtree=function(value,pattern){if(pattern===Match.Any)return false;for(var i=0;i<typeofChecks.length;++i){if(pattern===typeofChecks[i][0]){if(typeof value===typeofChecks[i][1])return false;return{message:"Expected "+typeofChecks[i][1]+", got "+stringForErrorMessage(value,{onlyShowType:true}),path:""}}}if(pattern===null){if(value===null){return false}return{message:"Expected null, got "+stringForErrorMessage(value),path:""}}if(typeof pattern==="string"||typeof pattern==="number"||typeof pattern==="boolean"){if(value===pattern)return false;return{message:"Expected "+pattern+", got "+stringForErrorMessage(value),path:""}}if(pattern===Match.Integer){if(typeof value==="number"&&(value|0)===value)return false;return{message:"Expected Integer, got "+stringForErrorMessage(value),path:""}}if(pattern===Object)pattern=Match.ObjectIncluding({});if(pattern instanceof Array){if(pattern.length!==1){return{message:"Bad pattern: arrays must have one type element"+stringForErrorMessage(pattern),path:""}}if(!_.isArray(value)&&!_.isArguments(value)){return{message:"Expected array, got "+stringForErrorMessage(value),path:""}}for(var i=0,length=value.length;i<length;i++){var result=testSubtree(value[i],pattern[0]);if(result){result.path=_prependPath(i,result.path);return result}}return false}if(pattern instanceof Where){var result;try{result=pattern.condition(value)}catch(err){if(!(err instanceof Match.Error))throw err;return{message:err.message,path:err.path}}if(result)return false;return{message:"Failed Match.Where validation",path:""}}if(pattern instanceof Maybe){pattern=Match.OneOf(undefined,null,pattern.pattern)}else if(pattern instanceof Optional){pattern=Match.OneOf(undefined,pattern.pattern)}if(pattern instanceof OneOf){for(var i=0;i<pattern.choices.length;++i){var result=testSubtree(value,pattern.choices[i]);if(!result){return false}}return{message:"Failed Match.OneOf, Match.Maybe or Match.Optional validation",path:""}}if(pattern instanceof Function){if(value instanceof pattern)return false;return{message:"Expected "+(pattern.name||"particular constructor"),path:""}}var unknownKeysAllowed=false;var unknownKeyPattern;if(pattern instanceof ObjectIncluding){unknownKeysAllowed=true;pattern=pattern.pattern}if(pattern instanceof ObjectWithValues){unknownKeysAllowed=true;unknownKeyPattern=[pattern.pattern];pattern={}}if(typeof pattern!=="object"){return{message:"Bad pattern: unknown pattern type",path:""}}if(typeof value!=="object"){return{message:"Expected object, got "+typeof value,path:""}}if(value===null){return{message:"Expected object, got null",path:""}}if(!isPlainObject(value)){return{message:"Expected plain object",path:""}}var requiredPatterns={};var optionalPatterns={};_.each(pattern,function(subPattern,key){if(subPattern instanceof Optional||subPattern instanceof Maybe)optionalPatterns[key]=subPattern.pattern;else requiredPatterns[key]=subPattern});var allKeys=function(obj){var keys=[];if(_.isObject(obj)){for(var key in obj)keys.push(key)}return keys};for(var keys=allKeys(value),i=0,length=keys.length;i<length;i++){var key=keys[i];var subValue=value[key];if(_.has(requiredPatterns,key)){var result=testSubtree(subValue,requiredPatterns[key]);if(result){result.path=_prependPath(key,result.path);return result}delete requiredPatterns[key]}else if(_.has(optionalPatterns,key)){var result=testSubtree(subValue,optionalPatterns[key]);if(result){result.path=_prependPath(key,result.path);return result}}else{if(!unknownKeysAllowed){return{message:"Unknown key",path:key}}if(unknownKeyPattern){var result=testSubtree(subValue,unknownKeyPattern[0]);if(result){result.path=_prependPath(key,result.path);return result}}}}var keys=_.keys(requiredPatterns);if(keys.length){return{message:"Missing key '"+keys[0]+"'",path:""}}};var ArgumentChecker=function(args,description){var self=this;self.args=_.clone(args);self.args.reverse();self.description=description};_.extend(ArgumentChecker.prototype,{checking:function(value){var self=this;if(self._checkingOneValue(value))return;if(_.isArray(value)||_.isArguments(value)){_.each(value,_.bind(self._checkingOneValue,self))}},_checkingOneValue:function(value){var self=this;for(var i=0;i<self.args.length;++i){if(value===self.args[i]||_.isNaN(value)&&_.isNaN(self.args[i])){self.args.splice(i,1);return true}}return false},throwUnlessAllArgumentsHaveBeenChecked:function(){var self=this;if(!_.isEmpty(self.args))throw new Error("Did not check() all arguments during "+self.description)}});var _jsKeywords=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"];var _prependPath=function(key,base){if(typeof key==="number"||key.match(/^[0-9]+$/))key="["+key+"]";else if(!key.match(/^[a-z_$][0-9a-z_$]*$/i)||_.contains(_jsKeywords,key))key=JSON.stringify([key]);if(base&&base[0]!=="[")return key+"."+base;return key+base}},"isPlainObject.js":function(require,exports){var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var fnToString=hasOwn.toString;var ObjectFunctionString=fnToString.call(Object);var getProto=Object.getPrototypeOf;exports.isPlainObject=function(obj){var proto,Ctor;if(!obj||toString.call(obj)!=="[object Object]"){return false}proto=getProto(obj);if(!proto){return true}Ctor=hasOwn.call(proto,"constructor")&&proto.constructor;return typeof Ctor==="function"&&fnToString.call(Ctor)===ObjectFunctionString}}}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/check/match.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.check=exports,{check:check,Match:Match})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var meteorInstall=Package.modules.meteorInstall;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Symbol=Package["ecmascript-runtime-client"].Symbol;var Map=Package["ecmascript-runtime-client"].Map;var Set=Package["ecmascript-runtime-client"].Set;var Random;var require=meteorInstall({node_modules:{meteor:{random:{"random.js":function(require){if(Meteor.isServer)var nodeCrypto=Npm.require("crypto");var Alea=function(){function Mash(){var n=4022871197;var mash=function(data){data=data.toString();for(var i=0;i<data.length;i++){n+=data.charCodeAt(i);var h=.02519603282416938*n;n=h>>>0;h-=n;h*=n;n=h>>>0;h-=n;n+=h*4294967296}return(n>>>0)*2.3283064365386963e-10};mash.version="Mash 0.9";return mash}return function(args){var s0=0;var s1=0;var s2=0;var c=1;if(args.length==0){args=[+new Date]}var mash=Mash();s0=mash(" ");s1=mash(" ");s2=mash(" ");for(var i=0;i<args.length;i++){s0-=mash(args[i]);if(s0<0){s0+=1}s1-=mash(args[i]);if(s1<0){s1+=1}s2-=mash(args[i]);if(s2<0){s2+=1}}mash=null;var random=function(){var t=2091639*s0+c*2.3283064365386963e-10;s0=s1;s1=s2;return s2=t-(c=t|0)};random.uint32=function(){return random()*4294967296};random.fract53=function(){return random()+(random()*2097152|0)*1.1102230246251565e-16};random.version="Alea 0.9";random.args=args;return random}(Array.prototype.slice.call(arguments))};var UNMISTAKABLE_CHARS="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz";var BASE64_CHARS="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"+"0123456789-_";var RandomGenerator=function(type,options){var self=this;self.type=type;if(!RandomGenerator.Type[type]){throw new Error("Unknown random generator type: "+type)}if(type===RandomGenerator.Type.ALEA){if(!options.seeds){throw new Error("No seeds were provided for Alea PRNG")}self.alea=Alea.apply(null,options.seeds)}};RandomGenerator.Type={NODE_CRYPTO:"NODE_CRYPTO",BROWSER_CRYPTO:"BROWSER_CRYPTO",ALEA:"ALEA"};RandomGenerator.prototype.fraction=function(){var self=this;if(self.type===RandomGenerator.Type.ALEA){return self.alea()}else if(self.type===RandomGenerator.Type.NODE_CRYPTO){var numerator=parseInt(self.hexString(8),16);return numerator*2.3283064365386963e-10}else if(self.type===RandomGenerator.Type.BROWSER_CRYPTO){var array=new Uint32Array(1);window.crypto.getRandomValues(array);return array[0]*2.3283064365386963e-10}else{throw new Error("Unknown random generator type: "+self.type)}};RandomGenerator.prototype.hexString=function(digits){var self=this;if(self.type===RandomGenerator.Type.NODE_CRYPTO){var numBytes=Math.ceil(digits/2);var bytes;try{bytes=nodeCrypto.randomBytes(numBytes)}catch(e){bytes=nodeCrypto.pseudoRandomBytes(numBytes)}var result=bytes.toString("hex");return result.substring(0,digits)}else{return this._randomString(digits,"0123456789abcdef")}};RandomGenerator.prototype._randomString=function(charsCount,alphabet){var self=this;var digits=[];for(var i=0;i<charsCount;i++){digits[i]=self.choice(alphabet)}return digits.join("")};RandomGenerator.prototype.id=function(charsCount){var self=this;if(charsCount===undefined)charsCount=17;return self._randomString(charsCount,UNMISTAKABLE_CHARS)};RandomGenerator.prototype.secret=function(charsCount){var self=this;if(charsCount===undefined)charsCount=43;return self._randomString(charsCount,BASE64_CHARS)};RandomGenerator.prototype.choice=function(arrayOrString){var index=Math.floor(this.fraction()*arrayOrString.length);if(typeof arrayOrString==="string")return arrayOrString.substr(index,1);else return arrayOrString[index]};var height=typeof window!=="undefined"&&window.innerHeight||typeof document!=="undefined"&&document.documentElement&&document.documentElement.clientHeight||typeof document!=="undefined"&&document.body&&document.body.clientHeight||1;var width=typeof window!=="undefined"&&window.innerWidth||typeof document!=="undefined"&&document.documentElement&&document.documentElement.clientWidth||typeof document!=="undefined"&&document.body&&document.body.clientWidth||1;var agent=typeof navigator!=="undefined"&&navigator.userAgent||"";function createAleaGeneratorWithGeneratedSeed(){return new RandomGenerator(RandomGenerator.Type.ALEA,{seeds:[new Date,height,width,agent,Math.random()]})}if(Meteor.isServer){Random=new RandomGenerator(RandomGenerator.Type.NODE_CRYPTO)}else{if(typeof window!=="undefined"&&window.crypto&&window.crypto.getRandomValues){Random=new RandomGenerator(RandomGenerator.Type.BROWSER_CRYPTO)}else{Random=createAleaGeneratorWithGeneratedSeed()}}Random.createWithSeeds=function(){for(var _len=arguments.length,seeds=Array(_len),_key=0;_key<_len;_key++){seeds[_key]=arguments[_key]}if(seeds.length===0){throw new Error("No seeds were provided")}return new RandomGenerator(RandomGenerator.Type.ALEA,{seeds:seeds})};Random.insecure=createAleaGeneratorWithGeneratedSeed()},"deprecated.js":function(){Meteor.uuid=function(){var HEX_DIGITS="0123456789abcdef";var s=[];for(var i=0;i<36;i++){s[i]=Random.choice(HEX_DIGITS)}s[14]="4";s[19]=HEX_DIGITS.substr(parseInt(s[19],16)&3|8,1);s[8]=s[13]=s[18]=s[23]="-";var uuid=s.join("");return uuid}}}}}},{extensions:[".js",".json"]});require("./node_modules/meteor/random/random.js");require("./node_modules/meteor/random/deprecated.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.random={},{Random:Random})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var EJSON=Package.ejson.EJSON;var IdMap;(function(){IdMap=function(idStringify,idParse){var self=this;self._map={};self._idStringify=idStringify||JSON.stringify;self._idParse=idParse||JSON.parse};_.extend(IdMap.prototype,{get:function(id){var self=this;var key=self._idStringify(id);return self._map[key]},set:function(id,value){var self=this;var key=self._idStringify(id);self._map[key]=value},remove:function(id){var self=this;var key=self._idStringify(id);delete self._map[key]},has:function(id){var self=this;var key=self._idStringify(id);return _.has(self._map,key)},empty:function(){var self=this;return _.isEmpty(self._map)},clear:function(){var self=this;self._map={}},forEach:function(iterator){var self=this;var keys=_.keys(self._map);for(var i=0;i<keys.length;i++){var breakIfFalse=iterator.call(null,self._map[keys[i]],self._idParse(keys[i]));if(breakIfFalse===false)return}},size:function(){var self=this;return _.size(self._map)},setDefault:function(id,def){var self=this;var key=self._idStringify(id);if(_.has(self._map,key))return self._map[key];self._map[key]=def;return def},clone:function(){var self=this;var clone=new IdMap(self._idStringify,self._idParse);self.forEach(function(value,id){clone.set(id,EJSON.clone(value))});return clone}})}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["id-map"]={},{IdMap:IdMap})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var Random=Package.random.Random;var Retry;(function(){Retry=function(options){var self=this;_.extend(self,_.defaults(_.clone(options||{}),{baseTimeout:1e3,exponent:2.2,maxTimeout:5*6e4,minTimeout:10,minCount:2,fuzz:.5}));self.retryTimer=null};_.extend(Retry.prototype,{clear:function(){var self=this;if(self.retryTimer)clearTimeout(self.retryTimer);self.retryTimer=null},_timeout:function(count){var self=this;if(count<self.minCount)return self.minTimeout;var timeout=Math.min(self.maxTimeout,self.baseTimeout*Math.pow(self.exponent,count));timeout=timeout*(Random.fraction()*self.fuzz+(1-self.fuzz/2));return timeout},retryLater:function(count,fn){var self=this;var timeout=self._timeout(count);if(self.retryTimer)clearTimeout(self.retryTimer);self.retryTimer=Meteor.setTimeout(fn,timeout);return timeout}})}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.retry={},{Retry:Retry})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var check=Package.check.check;var Match=Package.check.Match;var Random=Package.random.Random;var EJSON=Package.ejson.EJSON;var _=Package.underscore._;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var Retry=Package.retry.Retry;var DDPCommon;(function(){DDPCommon={}}).call(this);(function(){DDPCommon.Heartbeat=function(options){var self=this;self.heartbeatInterval=options.heartbeatInterval;self.heartbeatTimeout=options.heartbeatTimeout;self._sendPing=options.sendPing;self._onTimeout=options.onTimeout;self._seenPacket=false;self._heartbeatIntervalHandle=null;self._heartbeatTimeoutHandle=null};_.extend(DDPCommon.Heartbeat.prototype,{stop:function(){var self=this;self._clearHeartbeatIntervalTimer();self._clearHeartbeatTimeoutTimer()},start:function(){var self=this;self.stop();self._startHeartbeatIntervalTimer()},_startHeartbeatIntervalTimer:function(){var self=this;self._heartbeatIntervalHandle=Meteor.setInterval(_.bind(self._heartbeatIntervalFired,self),self.heartbeatInterval)},_startHeartbeatTimeoutTimer:function(){var self=this;self._heartbeatTimeoutHandle=Meteor.setTimeout(_.bind(self._heartbeatTimeoutFired,self),self.heartbeatTimeout)},_clearHeartbeatIntervalTimer:function(){var self=this;if(self._heartbeatIntervalHandle){Meteor.clearInterval(self._heartbeatIntervalHandle);self._heartbeatIntervalHandle=null}},_clearHeartbeatTimeoutTimer:function(){var self=this;if(self._heartbeatTimeoutHandle){Meteor.clearTimeout(self._heartbeatTimeoutHandle);self._heartbeatTimeoutHandle=null}},_heartbeatIntervalFired:function(){var self=this;if(!self._seenPacket&&!self._heartbeatTimeoutHandle){self._sendPing();self._startHeartbeatTimeoutTimer()}self._seenPacket=false},_heartbeatTimeoutFired:function(){var self=this;self._heartbeatTimeoutHandle=null;self._onTimeout()},messageReceived:function(){var self=this;self._seenPacket=true;if(self._heartbeatTimeoutHandle){self._clearHeartbeatTimeoutTimer()}}})}).call(this);(function(){DDPCommon.SUPPORTED_DDP_VERSIONS=["1","pre2","pre1"];DDPCommon.parseDDP=function(stringMessage){try{var msg=JSON.parse(stringMessage)}catch(e){Meteor._debug("Discarding message with invalid JSON",stringMessage);return null}if(msg===null||typeof msg!=="object"){Meteor._debug("Discarding non-object DDP message",stringMessage);return null}if(_.has(msg,"cleared")){if(!_.has(msg,"fields"))msg.fields={};_.each(msg.cleared,function(clearKey){msg.fields[clearKey]=undefined});delete msg.cleared}_.each(["fields","params","result"],function(field){if(_.has(msg,field))msg[field]=EJSON._adjustTypesFromJSONValue(msg[field])});return msg};DDPCommon.stringifyDDP=function(msg){var copy=EJSON.clone(msg);if(_.has(msg,"fields")){var cleared=[];_.each(msg.fields,function(value,key){if(value===undefined){cleared.push(key);delete copy.fields[key]}});if(!_.isEmpty(cleared))copy.cleared=cleared;if(_.isEmpty(copy.fields))delete copy.fields}_.each(["fields","params","result"],function(field){if(_.has(copy,field))copy[field]=EJSON._adjustTypesToJSONValue(copy[field])});if(msg.id&&typeof msg.id!=="string"){throw new Error("Message id is not a string")}return JSON.stringify(copy)}}).call(this);(function(){DDPCommon.MethodInvocation=function(options){var self=this;this.isSimulation=options.isSimulation;this._unblock=options.unblock||function(){};this._calledUnblock=false;this.userId=options.userId;this._setUserId=options.setUserId||function(){};this.connection=options.connection;this.randomSeed=options.randomSeed;this.randomStream=null};_.extend(DDPCommon.MethodInvocation.prototype,{unblock:function(){var self=this;self._calledUnblock=true;self._unblock()},setUserId:function(userId){var self=this;if(self._calledUnblock)throw new Error("Can't call setUserId in a method after calling unblock");self.userId=userId;self._setUserId(userId)}})}).call(this);(function(){DDPCommon.RandomStream=function(options){var self=this;this.seed=[].concat(options.seed||randomToken());this.sequences={}};function randomToken(){return Random.hexString(20)}DDPCommon.RandomStream.get=function(scope,name){if(!name){name="default"}if(!scope){return Random.insecure}var randomStream=scope.randomStream;if(!randomStream){scope.randomStream=randomStream=new DDPCommon.RandomStream({seed:scope.randomSeed})}return randomStream._sequence(name)};DDPCommon.makeRpcSeed=function(enclosing,methodName){var stream=DDPCommon.RandomStream.get(enclosing,"/rpc/"+methodName);return stream.hexString(20)};_.extend(DDPCommon.RandomStream.prototype,{_sequence:function(name){var self=this;var sequence=self.sequences[name]||null;if(sequence===null){var sequenceSeed=self.seed.concat(name);for(var i=0;i<sequenceSeed.length;i++){if(_.isFunction(sequenceSeed[i])){sequenceSeed[i]=sequenceSeed[i]()}}self.sequences[name]=sequence=Random.createWithSeeds.apply(null,sequenceSeed)}return sequence}})}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["ddp-common"]={},{DDPCommon:DDPCommon})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var EJSON=Package.ejson.EJSON;var DiffSequence;(function(){DiffSequence={};DiffSequence.diffQueryChanges=function(ordered,oldResults,newResults,observer,options){if(ordered)DiffSequence.diffQueryOrderedChanges(oldResults,newResults,observer,options);else DiffSequence.diffQueryUnorderedChanges(oldResults,newResults,observer,options)};DiffSequence.diffQueryUnorderedChanges=function(oldResults,newResults,observer,options){options=options||{};var projectionFn=options.projectionFn||EJSON.clone;if(observer.movedBefore){throw new Error("_diffQueryUnordered called with a movedBefore observer!")}newResults.forEach(function(newDoc,id){var oldDoc=oldResults.get(id);if(oldDoc){if(observer.changed&&!EJSON.equals(oldDoc,newDoc)){var projectedNew=projectionFn(newDoc);var projectedOld=projectionFn(oldDoc);var changedFields=DiffSequence.makeChangedFields(projectedNew,projectedOld);if(!_.isEmpty(changedFields)){observer.changed(id,changedFields)}}}else if(observer.added){var fields=projectionFn(newDoc);delete fields._id;observer.added(newDoc._id,fields)}});if(observer.removed){oldResults.forEach(function(oldDoc,id){if(!newResults.has(id))observer.removed(id)})}};DiffSequence.diffQueryOrderedChanges=function(old_results,new_results,observer,options){options=options||{};var projectionFn=options.projectionFn||EJSON.clone;var new_presence_of_id={};_.each(new_results,function(doc){if(new_presence_of_id[doc._id])Meteor._debug("Duplicate _id in new_results");new_presence_of_id[doc._id]=true});var old_index_of_id={};_.each(old_results,function(doc,i){if(doc._id in old_index_of_id)Meteor._debug("Duplicate _id in old_results");old_index_of_id[doc._id]=i});var unmoved=[];var max_seq_len=0;var N=new_results.length;var seq_ends=new Array(N);var ptrs=new Array(N);var old_idx_seq=function(i_new){return old_index_of_id[new_results[i_new]._id]};for(var i=0;i<N;i++){if(old_index_of_id[new_results[i]._id]!==undefined){var j=max_seq_len;while(j>0){if(old_idx_seq(seq_ends[j-1])<old_idx_seq(i))break;j--}ptrs[i]=j===0?-1:seq_ends[j-1];seq_ends[j]=i;if(j+1>max_seq_len)max_seq_len=j+1}}var idx=max_seq_len===0?-1:seq_ends[max_seq_len-1];while(idx>=0){unmoved.push(idx);idx=ptrs[idx]}unmoved.reverse();unmoved.push(new_results.length);_.each(old_results,function(doc){if(!new_presence_of_id[doc._id])observer.removed&&observer.removed(doc._id)});var startOfGroup=0;_.each(unmoved,function(endOfGroup){var groupId=new_results[endOfGroup]?new_results[endOfGroup]._id:null;var oldDoc,newDoc,fields,projectedNew,projectedOld;for(var i=startOfGroup;i<endOfGroup;i++){newDoc=new_results[i];if(!_.has(old_index_of_id,newDoc._id)){fields=projectionFn(newDoc);delete fields._id;observer.addedBefore&&observer.addedBefore(newDoc._id,fields,groupId);observer.added&&observer.added(newDoc._id,fields)}else{oldDoc=old_results[old_index_of_id[newDoc._id]];projectedNew=projectionFn(newDoc);projectedOld=projectionFn(oldDoc);fields=DiffSequence.makeChangedFields(projectedNew,projectedOld);if(!_.isEmpty(fields)){observer.changed&&observer.changed(newDoc._id,fields)}observer.movedBefore&&observer.movedBefore(newDoc._id,groupId)}}if(groupId){newDoc=new_results[endOfGroup];oldDoc=old_results[old_index_of_id[newDoc._id]];projectedNew=projectionFn(newDoc);projectedOld=projectionFn(oldDoc);fields=DiffSequence.makeChangedFields(projectedNew,projectedOld);if(!_.isEmpty(fields)){observer.changed&&observer.changed(newDoc._id,fields)}}startOfGroup=endOfGroup+1})};DiffSequence.diffObjects=function(left,right,callbacks){_.each(left,function(leftValue,key){if(_.has(right,key))callbacks.both&&callbacks.both(key,leftValue,right[key]);else callbacks.leftOnly&&callbacks.leftOnly(key,leftValue)});if(callbacks.rightOnly){_.each(right,function(rightValue,key){if(!_.has(left,key))callbacks.rightOnly(key,rightValue)})}};DiffSequence.makeChangedFields=function(newDoc,oldDoc){var fields={};DiffSequence.diffObjects(oldDoc,newDoc,{leftOnly:function(key,value){fields[key]=undefined},rightOnly:function(key,value){fields[key]=value},both:function(key,leftValue,rightValue){if(!EJSON.equals(leftValue,rightValue))fields[key]=rightValue}});return fields};DiffSequence.applyChanges=function(doc,changeFields){_.each(changeFields,function(value,key){if(value===undefined)delete doc[key];else doc[key]=value})}}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["diff-sequence"]={},{DiffSequence:DiffSequence})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var EJSON=Package.ejson.EJSON;var IdMap=Package["id-map"].IdMap;var Random=Package.random.Random;var MongoID;(function(){MongoID={};MongoID._looksLikeObjectID=function(str){return str.length===24&&str.match(/^[0-9a-f]*$/)};MongoID.ObjectID=function(hexString){var self=this;if(hexString){hexString=hexString.toLowerCase();if(!MongoID._looksLikeObjectID(hexString)){throw new Error("Invalid hexadecimal string for creating an ObjectID")}self._str=hexString}else{self._str=Random.hexString(24)}};MongoID.ObjectID.prototype.toString=function(){var self=this;return'ObjectID("'+self._str+'")'};MongoID.ObjectID.prototype.equals=function(other){var self=this;return other instanceof MongoID.ObjectID&&self.valueOf()===other.valueOf()};MongoID.ObjectID.prototype.clone=function(){var self=this;return new MongoID.ObjectID(self._str)};MongoID.ObjectID.prototype.typeName=function(){return"oid"};MongoID.ObjectID.prototype.getTimestamp=function(){var self=this;return parseInt(self._str.substr(0,8),16)};MongoID.ObjectID.prototype.valueOf=MongoID.ObjectID.prototype.toJSONValue=MongoID.ObjectID.prototype.toHexString=function(){return this._str};EJSON.addType("oid",function(str){return new MongoID.ObjectID(str)});MongoID.idStringify=function(id){if(id instanceof MongoID.ObjectID){return id.valueOf()}else if(typeof id==="string"){if(id===""){return id}else if(id.substr(0,1)==="-"||id.substr(0,1)==="~"||MongoID._looksLikeObjectID(id)||id.substr(0,1)==="{"){return"-"+id}else{return id}}else if(id===undefined){return"-"}else if(typeof id==="object"&&id!==null){throw new Error("Meteor does not currently support objects other than ObjectID as ids")}else{return"~"+JSON.stringify(id)}};MongoID.idParse=function(id){if(id===""){return id}else if(id==="-"){return undefined}else if(id.substr(0,1)==="-"){return id.substr(1)}else if(id.substr(0,1)==="~"){return JSON.parse(id.substr(1))}else if(MongoID._looksLikeObjectID(id)){return new MongoID.ObjectID(id)}else{return id}}}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["mongo-id"]={},{MongoID:MongoID})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var check=Package.check.check;var Match=Package.check.Match;var Random=Package.random.Random;var EJSON=Package.ejson.EJSON;var _=Package.underscore._;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var Retry=Package.retry.Retry;var IdMap=Package["id-map"].IdMap;var Hook=Package["callback-hook"].Hook;var DDPCommon=Package["ddp-common"].DDPCommon;var DiffSequence=Package["diff-sequence"].DiffSequence;var MongoID=Package["mongo-id"].MongoID;var meteorInstall=Package.modules.meteorInstall;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Symbol=Package["ecmascript-runtime-client"].Symbol;var Map=Package["ecmascript-runtime-client"].Map;var Set=Package["ecmascript-runtime-client"].Set;var SockJS,toSockjsUrl,toWebsocketUrl,allConnections,DDP;var require=meteorInstall({node_modules:{meteor:{"ddp-client":{"sockjs-0.3.4.js":function(require){var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}SockJS=function(){var _document=document;var _window=window;var utils={};var REventTarget=function(){};REventTarget.prototype.addEventListener=function(eventType,listener){if(!this._listeners){this._listeners={}}if(!(eventType in this._listeners)){this._listeners[eventType]=[]}var arr=this._listeners[eventType];if(utils.arrIndexOf(arr,listener)===-1){arr.push(listener)}return};REventTarget.prototype.removeEventListener=function(eventType,listener){if(!(this._listeners&&eventType in this._listeners)){return}var arr=this._listeners[eventType];var idx=utils.arrIndexOf(arr,listener);if(idx!==-1){if(arr.length>1){this._listeners[eventType]=arr.slice(0,idx).concat(arr.slice(idx+1))}else{delete this._listeners[eventType]}return}return};REventTarget.prototype.dispatchEvent=function(event){var t=event.type;var args=Array.prototype.slice.call(arguments,0);if(this["on"+t]){this["on"+t].apply(this,args)}if(this._listeners&&t in this._listeners){for(var i=0;i<this._listeners[t].length;i++){this._listeners[t][i].apply(this,args)}}};var SimpleEvent=function(type,obj){this.type=type;if(typeof obj!=="undefined"){for(var k in meteorBabelHelpers.sanitizeForInObject(obj)){if(!obj.hasOwnProperty(k))continue;this[k]=obj[k]}}};SimpleEvent.prototype.toString=function(){var r=[];for(var k in meteorBabelHelpers.sanitizeForInObject(this)){if(!this.hasOwnProperty(k))continue;var v=this[k];if(typeof v==="function")v="[function]";r.push(k+"="+v)}return"SimpleEvent("+r.join(", ")+")"};var EventEmitter=function(events){var that=this;that._events=events||[];that._listeners={}};EventEmitter.prototype.emit=function(type){var that=this;that._verifyType(type);if(that._nuked)return;var args=Array.prototype.slice.call(arguments,1);if(that["on"+type]){that["on"+type].apply(that,args)}if(type in that._listeners){for(var i=0;i<that._listeners[type].length;i++){that._listeners[type][i].apply(that,args)}}};EventEmitter.prototype.on=function(type,callback){var that=this;that._verifyType(type);if(that._nuked)return;if(!(type in that._listeners)){that._listeners[type]=[]}that._listeners[type].push(callback)};EventEmitter.prototype._verifyType=function(type){var that=this;if(utils.arrIndexOf(that._events,type)===-1){utils.log("Event "+JSON.stringify(type)+" not listed "+JSON.stringify(that._events)+" in "+that)}};EventEmitter.prototype.nuke=function(){var that=this;that._nuked=true;for(var i=0;i<that._events.length;i++){delete that[that._events[i]]}that._listeners={}};var random_string_chars="abcdefghijklmnopqrstuvwxyz0123456789_";utils.random_string=function(length,max){max=max||random_string_chars.length;var i,ret=[];for(i=0;i<length;i++){ret.push(random_string_chars.substr(Math.floor(Math.random()*max),1))}return ret.join("")};utils.random_number=function(max){return Math.floor(Math.random()*max)};utils.random_number_string=function(max){var t=(""+(max-1)).length;var p=Array(t+1).join("0");return(p+utils.random_number(max)).slice(-t)};utils.getOrigin=function(url){url+="/";var parts=url.split("/").slice(0,3);return parts.join("/")};utils.isSameOriginUrl=function(url_a,url_b){if(!url_b)url_b=_window.location.href;return url_a.split("/").slice(0,3).join("/")===url_b.split("/").slice(0,3).join("/")};utils.isSameOriginScheme=function(url_a,url_b){if(!url_b)url_b=_window.location.href;return url_a.split(":")[0]===url_b.split(":")[0]};utils.getParentDomain=function(url){if(/^[0-9.]*$/.test(url))return url;if(/^\[/.test(url))return url;if(!/[.]/.test(url))return url;var parts=url.split(".").slice(1);return parts.join(".")};utils.objectExtend=function(dst,src){for(var k in meteorBabelHelpers.sanitizeForInObject(src)){if(src.hasOwnProperty(k)){dst[k]=src[k]}}return dst};var WPrefix="_jp";utils.polluteGlobalNamespace=function(){if(!(WPrefix in _window)){_window[WPrefix]={}}};utils.closeFrame=function(code,reason){return"c"+JSON.stringify([code,reason])};utils.userSetCode=function(code){return code===1e3||code>=3e3&&code<=4999};utils.countRTO=function(rtt){var rto;if(rtt>100){rto=3*rtt}else{rto=rtt+200}return rto};utils.log=function(){if(_window.console&&console.log&&console.log.apply){console.log.apply(console,arguments)}};utils.bind=function(fun,that){if(fun.bind){return fun.bind(that)}else{return function(){return fun.apply(that,arguments)}}};utils.flatUrl=function(url){return url.indexOf("?")===-1&&url.indexOf("#")===-1};utils.amendUrl=function(url,relativeTo){var baseUrl;if(relativeTo===undefined){baseUrl=_document.location}else{var protocolMatch=/^([a-z0-9.+-]+:)/i.exec(relativeTo);if(protocolMatch){var protocol=protocolMatch[0].toLowerCase();var rest=relativeTo.substring(protocol.length);var hostMatch=/[a-z0-9\.-]+(:[0-9]+)?/.exec(rest);if(hostMatch)var host=hostMatch[0]}if(!protocol||!host)throw new Error("relativeTo must be an absolute url");baseUrl={protocol:protocol,host:host}}if(!url){throw new Error("Wrong url for SockJS")}if(!utils.flatUrl(url)){throw new Error("Only basic urls are supported in SockJS")}if(url.indexOf("//")===0){url=baseUrl.protocol+url}if(url.indexOf("/")===0){url=baseUrl.protocol+"//"+baseUrl.host+url}url=url.replace(/[/]+$/,"");var parts=url.split("/");if(parts[0]==="http:"&&/:80$/.test(parts[2])||parts[0]==="https:"&&/:443$/.test(parts[2])){parts[2]=parts[2].replace(/:(80|443)$/,"")}url=parts.join("/");return url};utils.arrIndexOf=function(arr,obj){for(var i=0;i<arr.length;i++){if(arr[i]===obj){return i}}return-1};utils.arrSkip=function(arr,obj){var idx=utils.arrIndexOf(arr,obj);if(idx===-1){return arr.slice()}else{var dst=arr.slice(0,idx);return dst.concat(arr.slice(idx+1))}};utils.isArray=Array.isArray||function(value){return{}.toString.call(value).indexOf("Array")>=0};utils.delay=function(t,fun){if(typeof t==="function"){fun=t;t=0}return setTimeout(fun,t)};var json_escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,json_lookup={"\0":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\v":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","\ufeff":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"};var extra_escapable=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,extra_lookup;var JSONQuote=JSON&&JSON.stringify||function(string){json_escapable.lastIndex=0;if(json_escapable.test(string)){string=string.replace(json_escapable,function(a){return json_lookup[a]})}return'"'+string+'"'};var unroll_lookup=function(escapable){var i;var unrolled={};var c=[];for(i=0;i<65536;i++){c.push(String.fromCharCode(i))}escapable.lastIndex=0;c.join("").replace(escapable,function(a){unrolled[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);return""});escapable.lastIndex=0;return unrolled};utils.quote=function(string){var quoted=JSONQuote(string);extra_escapable.lastIndex=0;if(!extra_escapable.test(quoted)){return quoted}if(!extra_lookup)extra_lookup=unroll_lookup(extra_escapable);return quoted.replace(extra_escapable,function(a){return extra_lookup[a]})};var _all_protocols=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];utils.probeProtocols=function(){var probed={};for(var i=0;i<_all_protocols.length;i++){var protocol=_all_protocols[i];probed[protocol]=SockJS[protocol]&&SockJS[protocol].enabled()}return probed};utils.detectProtocols=function(probed,protocols_whitelist,info){var pe={},protocols=[];if(!protocols_whitelist)protocols_whitelist=_all_protocols;for(var i=0;i<protocols_whitelist.length;i++){var protocol=protocols_whitelist[i];pe[protocol]=probed[protocol]}var maybe_push=function(protos){var proto=protos.shift();if(pe[proto]){protocols.push(proto)}else{if(protos.length>0){maybe_push(protos)}}};if(info.websocket!==false){maybe_push(["websocket"])}if(pe["xhr-streaming"]&&!info.null_origin){protocols.push("xhr-streaming")}else{if(pe["xdr-streaming"]&&!info.cookie_needed&&!info.null_origin){protocols.push("xdr-streaming")}else{maybe_push(["iframe-eventsource","iframe-htmlfile"])}}if(pe["xhr-polling"]&&!info.null_origin){protocols.push("xhr-polling")}else{if(pe["xdr-polling"]&&!info.cookie_needed&&!info.null_origin){protocols.push("xdr-polling")}else{maybe_push(["iframe-xhr-polling","jsonp-polling"])}}return protocols};var MPrefix="_sockjs_global";utils.createHook=function(){var window_id="a"+utils.random_string(8);if(!(MPrefix in _window)){var map={};_window[MPrefix]=function(window_id){if(!(window_id in map)){map[window_id]={id:window_id,del:function(){delete map[window_id]}}}return map[window_id]}}return _window[MPrefix](window_id)};utils.attachMessage=function(listener){utils.attachEvent("message",listener)};utils.attachEvent=function(event,listener){if(typeof _window.addEventListener!=="undefined"){_window.addEventListener(event,listener,false)}else{_document.attachEvent("on"+event,listener);_window.attachEvent("on"+event,listener)}};utils.detachMessage=function(listener){utils.detachEvent("message",listener)};utils.detachEvent=function(event,listener){if(typeof _window.addEventListener!=="undefined"){_window.removeEventListener(event,listener,false)}else{_document.detachEvent("on"+event,listener);_window.detachEvent("on"+event,listener)}};var on_unload={};var after_unload=false;var trigger_unload_callbacks=function(){for(var ref in meteorBabelHelpers.sanitizeForInObject(on_unload)){on_unload[ref]();delete on_unload[ref]}};var unload_triggered=function(){if(after_unload)return;after_unload=true;trigger_unload_callbacks()};utils.attachEvent("unload",unload_triggered);utils.unload_add=function(listener){var ref=utils.random_string(8);on_unload[ref]=listener;if(after_unload){utils.delay(trigger_unload_callbacks)}return ref};utils.unload_del=function(ref){if(ref in on_unload)delete on_unload[ref]};utils.createIframe=function(iframe_url,error_callback){var iframe=_document.createElement("iframe");var tref,unload_ref;var unattach=function(){clearTimeout(tref);try{iframe.onload=null}catch(x){}iframe.onerror=null};var cleanup=function(){if(iframe){unattach();setTimeout(function(){if(iframe){iframe.parentNode.removeChild(iframe)}iframe=null},0);utils.unload_del(unload_ref)}};var onerror=function(r){if(iframe){cleanup();error_callback(r)}};var post=function(msg,origin){try{if(iframe&&iframe.contentWindow){iframe.contentWindow.postMessage(msg,origin)}}catch(x){}};iframe.src=iframe_url;iframe.style.display="none";iframe.style.position="absolute";iframe.onerror=function(){onerror("onerror")};iframe.onload=function(){clearTimeout(tref);tref=setTimeout(function(){onerror("onload timeout")},2e3)};_document.body.appendChild(iframe);tref=setTimeout(function(){onerror("timeout")},15e3);unload_ref=utils.unload_add(cleanup);return{post:post,cleanup:cleanup,loaded:unattach}};utils.createHtmlfile=function(iframe_url,error_callback){var doc=new ActiveXObject("htmlfile");var tref,unload_ref;var iframe;var unattach=function(){clearTimeout(tref)};var cleanup=function(){if(doc){unattach();utils.unload_del(unload_ref);iframe.parentNode.removeChild(iframe);iframe=doc=null;CollectGarbage()}};var onerror=function(r){if(doc){cleanup();error_callback(r)}};var post=function(msg,origin){try{if(iframe&&iframe.contentWindow){iframe.contentWindow.postMessage(msg,origin)}}catch(x){}};doc.open();doc.write("<html><s"+"cript>"+'document.domain="'+document.domain+'";'+"</s"+"cript></html>");doc.close();doc.parentWindow[WPrefix]=_window[WPrefix];var c=doc.createElement("div");doc.body.appendChild(c);iframe=doc.createElement("iframe");c.appendChild(iframe);iframe.src=iframe_url;tref=setTimeout(function(){onerror("timeout")},15e3);unload_ref=utils.unload_add(cleanup);return{post:post,cleanup:cleanup,loaded:unattach}};var AbstractXHRObject=function(){};AbstractXHRObject.prototype=new EventEmitter(["chunk","finish"]);AbstractXHRObject.prototype._start=function(method,url,payload,opts){var that=this;try{that.xhr=new XMLHttpRequest}catch(x){}if(!that.xhr){try{that.xhr=new _window.ActiveXObject("Microsoft.XMLHTTP")}catch(x){}}if(_window.ActiveXObject||_window.XDomainRequest){url+=(url.indexOf("?")===-1?"?":"&")+"t="+ +new Date}that.unload_ref=utils.unload_add(function(){that._cleanup(true)});try{that.xhr.open(method,url,true)}catch(e){that.emit("finish",0,"");that._cleanup();return}if(!opts||!opts.no_credentials){that.xhr.withCredentials="true"}if(opts&&opts.headers){for(var key in meteorBabelHelpers.sanitizeForInObject(opts.headers)){that.xhr.setRequestHeader(key,opts.headers[key])}}that.xhr.onreadystatechange=function(){if(that.xhr){var x=that.xhr;switch(x.readyState){case 3:try{var status=x.status;var text=x.responseText}catch(x){};if(status===1223)status=204;if(text&&text.length>0){that.emit("chunk",status,text)}break;case 4:var status=x.status;if(status===1223)status=204;that.emit("finish",status,x.responseText);that._cleanup(false);break}}};that.xhr.send(payload)};AbstractXHRObject.prototype._cleanup=function(abort){var that=this;if(!that.xhr)return;utils.unload_del(that.unload_ref);that.xhr.onreadystatechange=function(){};if(abort){try{that.xhr.abort()}catch(x){}}that.unload_ref=that.xhr=null};AbstractXHRObject.prototype.close=function(){var that=this;that.nuke();that._cleanup(true)};var XHRCorsObject=utils.XHRCorsObject=function(){var that=this,args=arguments;utils.delay(function(){that._start.apply(that,args)})};XHRCorsObject.prototype=new AbstractXHRObject;var XHRLocalObject=utils.XHRLocalObject=function(method,url,payload){var that=this;utils.delay(function(){that._start(method,url,payload,{no_credentials:true})})};XHRLocalObject.prototype=new AbstractXHRObject;var XDRObject=utils.XDRObject=function(method,url,payload){var that=this;utils.delay(function(){that._start(method,url,payload)})};XDRObject.prototype=new EventEmitter(["chunk","finish"]);XDRObject.prototype._start=function(method,url,payload){var that=this;var xdr=new XDomainRequest;url+=(url.indexOf("?")===-1?"?":"&")+"t="+ +new Date;var onerror=xdr.ontimeout=xdr.onerror=function(){that.emit("finish",0,"");that._cleanup(false)};xdr.onprogress=function(){that.emit("chunk",200,xdr.responseText)};xdr.onload=function(){that.emit("finish",200,xdr.responseText);that._cleanup(false)};that.xdr=xdr;that.unload_ref=utils.unload_add(function(){that._cleanup(true)});try{that.xdr.open(method,url);that.xdr.send(payload)}catch(x){onerror()}};XDRObject.prototype._cleanup=function(abort){var that=this;if(!that.xdr)return;utils.unload_del(that.unload_ref);that.xdr.ontimeout=that.xdr.onerror=that.xdr.onprogress=that.xdr.onload=null;if(abort){try{that.xdr.abort()}catch(x){}}that.unload_ref=that.xdr=null};XDRObject.prototype.close=function(){var that=this;that.nuke();that._cleanup(true)};utils.isXHRCorsCapable=function(){if(_window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest){return 1}if(_window.XDomainRequest&&_document.domain){return 2}if(IframeTransport.enabled()){return 3}return 4};var SockJS=function(url,dep_protocols_whitelist,options){if(!(this instanceof SockJS)){return new SockJS(url,dep_protocols_whitelist,options)}var that=this,protocols_whitelist;that._options={devel:false,debug:false,protocols_whitelist:[],info:undefined,rtt:undefined};if(options){utils.objectExtend(that._options,options)}that._base_url=utils.amendUrl(url);that._server=that._options.server||utils.random_number_string(1e3);if(that._options.protocols_whitelist&&that._options.protocols_whitelist.length){protocols_whitelist=that._options.protocols_whitelist}else{if(typeof dep_protocols_whitelist==="string"&&dep_protocols_whitelist.length>0){protocols_whitelist=[dep_protocols_whitelist]}else if(utils.isArray(dep_protocols_whitelist)){protocols_whitelist=dep_protocols_whitelist}else{protocols_whitelist=null}if(protocols_whitelist){that._debug('Deprecated API: Use "protocols_whitelist" option '+"instead of supplying protocol list as a second "+"parameter to SockJS constructor.")}}that._protocols=[];that.protocol=null;that.readyState=SockJS.CONNECTING;that._ir=createInfoReceiver(that._base_url);that._ir.onfinish=function(info,rtt){that._ir=null;if(info){if(that._options.info){info=utils.objectExtend(info,that._options.info)}if(that._options.rtt){rtt=that._options.rtt}that._applyInfo(info,rtt,protocols_whitelist);that._didClose()}else{that._didClose(1002,"Can't connect to server",true)}}};SockJS.prototype=new REventTarget;SockJS.version="0.3.4";SockJS.CONNECTING=0;SockJS.OPEN=1;SockJS.CLOSING=2;SockJS.CLOSED=3;SockJS.prototype._debug=function(){if(this._options.debug)utils.log.apply(utils,arguments)};SockJS.prototype._dispatchOpen=function(){var that=this;if(that.readyState===SockJS.CONNECTING){if(that._transport_tref){clearTimeout(that._transport_tref);that._transport_tref=null}that.readyState=SockJS.OPEN;that.dispatchEvent(new SimpleEvent("open"))}else{that._didClose(1006,"Server lost session")}};SockJS.prototype._dispatchMessage=function(data){var that=this;if(that.readyState!==SockJS.OPEN)return;that.dispatchEvent(new SimpleEvent("message",{data:data}))};SockJS.prototype._dispatchHeartbeat=function(data){var that=this;if(that.readyState!==SockJS.OPEN)return;that.dispatchEvent(new SimpleEvent("heartbeat",{}))};SockJS.prototype._didClose=function(code,reason,force){var that=this;if(that.readyState!==SockJS.CONNECTING&&that.readyState!==SockJS.OPEN&&that.readyState!==SockJS.CLOSING)throw new Error("INVALID_STATE_ERR");if(that._ir){that._ir.nuke();that._ir=null}if(that._transport){that._transport.doCleanup();that._transport=null}var close_event=new SimpleEvent("close",{code:code,reason:reason,wasClean:utils.userSetCode(code)});if(!utils.userSetCode(code)&&that.readyState===SockJS.CONNECTING&&!force){if(that._try_next_protocol(close_event)){return}close_event=new SimpleEvent("close",{code:2e3,reason:"All transports failed",wasClean:false,last_event:close_event})}that.readyState=SockJS.CLOSED;utils.delay(function(){that.dispatchEvent(close_event)})};SockJS.prototype._didMessage=function(data){var that=this;var type=data.slice(0,1);switch(type){case"o":that._dispatchOpen();break;case"a":var payload=JSON.parse(data.slice(1)||"[]");for(var i=0;i<payload.length;i++){that._dispatchMessage(payload[i])}break;case"m":var payload=JSON.parse(data.slice(1)||"null");that._dispatchMessage(payload);break;case"c":var payload=JSON.parse(data.slice(1)||"[]");that._didClose(payload[0],payload[1]);break;case"h":that._dispatchHeartbeat();break}};SockJS.prototype._try_next_protocol=function(close_event){var that=this;if(that.protocol){that._debug("Closed transport:",that.protocol,""+close_event);that.protocol=null}if(that._transport_tref){clearTimeout(that._transport_tref);that._transport_tref=null}while(1){var protocol=that.protocol=that._protocols.shift();if(!protocol){return false}if(SockJS[protocol]&&SockJS[protocol].need_body===true&&(!_document.body||typeof _document.readyState!=="undefined"&&_document.readyState!=="complete")){that._protocols.unshift(protocol);that.protocol="waiting-for-load";utils.attachEvent("load",function(){that._try_next_protocol()});return true}if(!SockJS[protocol]||!SockJS[protocol].enabled(that._options)){that._debug("Skipping transport:",protocol)}else{var roundTrips=SockJS[protocol].roundTrips||1;var to=(that._options.rto||0)*roundTrips||5e3;that._transport_tref=utils.delay(to,function(){if(that.readyState===SockJS.CONNECTING){that._didClose(2007,"Transport timeouted")}});var connid=utils.random_string(8);var trans_url=that._base_url+"/"+that._server+"/"+connid;that._debug("Opening transport:",protocol," url:"+trans_url," RTO:"+that._options.rto);that._transport=new SockJS[protocol](that,trans_url,that._base_url);return true}}};SockJS.prototype.close=function(code,reason){var that=this;if(code&&!utils.userSetCode(code))throw new Error("INVALID_ACCESS_ERR");if(that.readyState!==SockJS.CONNECTING&&that.readyState!==SockJS.OPEN){return false}that.readyState=SockJS.CLOSING;that._didClose(code||1e3,reason||"Normal closure");return true};SockJS.prototype.send=function(data){var that=this;if(that.readyState===SockJS.CONNECTING)throw new Error("INVALID_STATE_ERR");if(that.readyState===SockJS.OPEN){that._transport.doSend(utils.quote(""+data))}return true};SockJS.prototype._applyInfo=function(info,rtt,protocols_whitelist){var that=this;that._options.info=info;that._options.rtt=rtt;that._options.rto=utils.countRTO(rtt);that._options.info.null_origin=!_document.domain;if(info.base_url)that._base_url=utils.amendUrl(info.base_url,that._base_url);var probed=utils.probeProtocols();that._protocols=utils.detectProtocols(probed,protocols_whitelist,info);if(!utils.isSameOriginScheme(that._base_url)&&2===utils.isXHRCorsCapable()){that._protocols=["jsonp-polling"]}};var WebSocketTransport=SockJS.websocket=function(ri,trans_url){var that=this;var url=trans_url+"/websocket";if(url.slice(0,5)==="https"){url="wss"+url.slice(5)}else{url="ws"+url.slice(4)}that.ri=ri;that.url=url;var Constructor=_window.WebSocket||_window.MozWebSocket;that.ws=new Constructor(that.url);that.ws.onmessage=function(e){that.ri._didMessage(e.data)};that.unload_ref=utils.unload_add(function(){that.ws.close()});that.ws.onclose=function(){that.ri._didMessage(utils.closeFrame(1006,"WebSocket connection broken"))}};WebSocketTransport.prototype.doSend=function(data){this.ws.send("["+data+"]")};WebSocketTransport.prototype.doCleanup=function(){var that=this;var ws=that.ws;if(ws){ws.onmessage=ws.onclose=null;ws.close();utils.unload_del(that.unload_ref);that.unload_ref=that.ri=that.ws=null}};WebSocketTransport.enabled=function(){return!!(_window.WebSocket||_window.MozWebSocket)};WebSocketTransport.roundTrips=2;var BufferedSender=function(){};BufferedSender.prototype.send_constructor=function(sender){var that=this;that.send_buffer=[];that.sender=sender};BufferedSender.prototype.doSend=function(message){var that=this;that.send_buffer.push(message);if(!that.send_stop){that.send_schedule()}};BufferedSender.prototype.send_schedule_wait=function(){var that=this;var tref;that.send_stop=function(){that.send_stop=null;clearTimeout(tref)};tref=utils.delay(25,function(){that.send_stop=null;that.send_schedule()})};BufferedSender.prototype.send_schedule=function(){var that=this;if(that.send_buffer.length>0){var payload="["+that.send_buffer.join(",")+"]";that.send_stop=that.sender(that.trans_url,payload,function(success,abort_reason){that.send_stop=null;if(success===false){that.ri._didClose(1006,"Sending error "+abort_reason)}else{that.send_schedule_wait()}});that.send_buffer=[]}};BufferedSender.prototype.send_destructor=function(){var that=this;if(that._send_stop){that._send_stop()}that._send_stop=null};var jsonPGenericSender=function(url,payload,callback){var that=this;if(!("_send_form"in that)){var form=that._send_form=_document.createElement("form");var area=that._send_area=_document.createElement("textarea");area.name="d";form.style.display="none";form.style.position="absolute";form.method="POST";form.enctype="application/x-www-form-urlencoded";form.acceptCharset="UTF-8";form.appendChild(area);_document.body.appendChild(form)}var form=that._send_form;var area=that._send_area;var id="a"+utils.random_string(8);form.target=id;form.action=url+"/jsonp_send?i="+id;var iframe;try{iframe=_document.createElement('<iframe name="'+id+'">')}catch(x){iframe=_document.createElement("iframe");iframe.name=id}iframe.id=id;form.appendChild(iframe);iframe.style.display="none";try{area.value=payload}catch(e){utils.log("Your browser is seriously broken. Go home! "+e.message)}form.submit();var completed=function(e){if(!iframe.onerror)return;iframe.onreadystatechange=iframe.onerror=iframe.onload=null;utils.delay(500,function(){iframe.parentNode.removeChild(iframe);iframe=null});area.value="";callback(true)};iframe.onerror=iframe.onload=completed;iframe.onreadystatechange=function(e){if(iframe.readyState=="complete")completed()};return completed};var createAjaxSender=function(AjaxObject){return function(url,payload,callback){var xo=new AjaxObject("POST",url+"/xhr_send",payload);xo.onfinish=function(status,text){callback(status===200||status===204,"http status "+status)};return function(abort_reason){callback(false,abort_reason)}}};var jsonPGenericReceiver=function(url,callback){var tref;var script=_document.createElement("script");var script2;var close_script=function(frame){if(script2){script2.parentNode.removeChild(script2);script2=null}if(script){clearTimeout(tref);script.parentNode.removeChild(script);script.onreadystatechange=script.onerror=script.onload=script.onclick=null;script=null;callback(frame);callback=null}};var loaded_okay=false;var error_timer=null;script.id="a"+utils.random_string(8);script.src=url;script.type="text/javascript";script.charset="UTF-8";script.onerror=function(e){if(!error_timer){error_timer=setTimeout(function(){if(!loaded_okay){close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))}},1e3)}};script.onload=function(e){close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (onload)"))};script.onreadystatechange=function(e){if(/loaded|closed/.test(script.readyState)){if(script&&script.htmlFor&&script.onclick){loaded_okay=true;try{script.onclick()}catch(x){}}if(script){close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}}};if(typeof script.async==="undefined"&&_document.attachEvent){if(!/opera/i.test(navigator.userAgent)){try{script.htmlFor=script.id;script.event="onclick"}catch(x){}script.async=true}else{script2=_document.createElement("script");script2.text="try{var a = document.getElementById('"+script.id+"'); if(a)a.onerror();}catch(x){};";script.async=script2.async=false}}if(typeof script.async!=="undefined"){script.async=true}tref=setTimeout(function(){close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var head=_document.getElementsByTagName("head")[0];head.insertBefore(script,head.firstChild);if(script2){head.insertBefore(script2,head.firstChild)}return close_script};var JsonPTransport=SockJS["jsonp-polling"]=function(ri,trans_url){utils.polluteGlobalNamespace();var that=this;that.ri=ri;that.trans_url=trans_url;that.send_constructor(jsonPGenericSender);that._schedule_recv()};JsonPTransport.prototype=new BufferedSender;JsonPTransport.prototype._schedule_recv=function(){var that=this;var callback=function(data){that._recv_stop=null;if(data){if(!that._is_closing){that.ri._didMessage(data)}}if(!that._is_closing){that._schedule_recv()}};that._recv_stop=jsonPReceiverWrapper(that.trans_url+"/jsonp",jsonPGenericReceiver,callback)};JsonPTransport.enabled=function(){return true};JsonPTransport.need_body=true;JsonPTransport.prototype.doCleanup=function(){var that=this;that._is_closing=true;if(that._recv_stop){that._recv_stop()}that.ri=that._recv_stop=null;that.send_destructor()};var jsonPReceiverWrapper=function(url,constructReceiver,user_callback){var id="a"+utils.random_string(6);var url_id=url+"?c="+escape(WPrefix+"."+id);var aborting=0;var callback=function(frame){switch(aborting){case 0:delete _window[WPrefix][id];user_callback(frame);break;case 1:user_callback(frame);aborting=2;break;case 2:delete _window[WPrefix][id];break}};var close_script=constructReceiver(url_id,callback);_window[WPrefix][id]=close_script;var stop=function(){if(_window[WPrefix][id]){aborting=1;_window[WPrefix][id](utils.closeFrame(1e3,"JSONP user aborted read"))}};return stop};var AjaxBasedTransport=function(){};AjaxBasedTransport.prototype=new BufferedSender;AjaxBasedTransport.prototype.run=function(ri,trans_url,url_suffix,Receiver,AjaxObject){var that=this;that.ri=ri;that.trans_url=trans_url;that.send_constructor(createAjaxSender(AjaxObject));that.poll=new Polling(ri,Receiver,trans_url+url_suffix,AjaxObject)};AjaxBasedTransport.prototype.doCleanup=function(){var that=this;if(that.poll){that.poll.abort();that.poll=null}};var XhrStreamingTransport=SockJS["xhr-streaming"]=function(ri,trans_url){this.run(ri,trans_url,"/xhr_streaming",XhrReceiver,utils.XHRCorsObject)};XhrStreamingTransport.prototype=new AjaxBasedTransport;XhrStreamingTransport.enabled=function(){return _window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)};XhrStreamingTransport.roundTrips=2;XhrStreamingTransport.need_body=true;var XdrStreamingTransport=SockJS["xdr-streaming"]=function(ri,trans_url){this.run(ri,trans_url,"/xhr_streaming",XhrReceiver,utils.XDRObject)};XdrStreamingTransport.prototype=new AjaxBasedTransport;XdrStreamingTransport.enabled=function(){return!!_window.XDomainRequest};XdrStreamingTransport.roundTrips=2;var XhrPollingTransport=SockJS["xhr-polling"]=function(ri,trans_url){this.run(ri,trans_url,"/xhr",XhrReceiver,utils.XHRCorsObject)};XhrPollingTransport.prototype=new AjaxBasedTransport;XhrPollingTransport.enabled=XhrStreamingTransport.enabled;XhrPollingTransport.roundTrips=2;var XdrPollingTransport=SockJS["xdr-polling"]=function(ri,trans_url){this.run(ri,trans_url,"/xhr",XhrReceiver,utils.XDRObject)};XdrPollingTransport.prototype=new AjaxBasedTransport;XdrPollingTransport.enabled=XdrStreamingTransport.enabled;XdrPollingTransport.roundTrips=2;var IframeTransport=function(){};IframeTransport.prototype.i_constructor=function(ri,trans_url,base_url){var that=this;that.ri=ri;that.origin=utils.getOrigin(base_url);that.base_url=base_url;that.trans_url=trans_url;var iframe_url=base_url+"/iframe.html";if(that.ri._options.devel){iframe_url+="?t="+ +new Date}that.window_id=utils.random_string(8);iframe_url+="#"+that.window_id;that.iframeObj=utils.createIframe(iframe_url,function(r){that.ri._didClose(1006,"Unable to load an iframe ("+r+")")});that.onmessage_cb=utils.bind(that.onmessage,that);utils.attachMessage(that.onmessage_cb)};IframeTransport.prototype.doCleanup=function(){var that=this;if(that.iframeObj){utils.detachMessage(that.onmessage_cb);try{if(that.iframeObj.iframe.contentWindow){that.postMessage("c")}}catch(x){}that.iframeObj.cleanup();that.iframeObj=null;that.onmessage_cb=that.iframeObj=null}};IframeTransport.prototype.onmessage=function(e){var that=this;if(e.origin!==that.origin)return;var window_id=e.data.slice(0,8);var type=e.data.slice(8,9);var data=e.data.slice(9);if(window_id!==that.window_id)return;switch(type){case"s":that.iframeObj.loaded();that.postMessage("s",JSON.stringify([SockJS.version,that.protocol,that.trans_url,that.base_url]));break;case"t":that.ri._didMessage(data);break}};IframeTransport.prototype.postMessage=function(type,data){var that=this;that.iframeObj.post(that.window_id+type+(data||""),that.origin)};IframeTransport.prototype.doSend=function(message){this.postMessage("m",message)};IframeTransport.enabled=function(){var konqueror=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return(typeof _window.postMessage==="function"||(0,_typeof3.default)(_window.postMessage)==="object")&&!konqueror};var curr_window_id;var postMessage=function(type,data){if(parent!==_window){parent.postMessage(curr_window_id+type+(data||""),"*")}else{utils.log("Can't postMessage, no parent window.",type,data)}};var FacadeJS=function(){};FacadeJS.prototype._didClose=function(code,reason){postMessage("t",utils.closeFrame(code,reason))};FacadeJS.prototype._didMessage=function(frame){postMessage("t",frame)};FacadeJS.prototype._doSend=function(data){this._transport.doSend(data)};FacadeJS.prototype._doCleanup=function(){this._transport.doCleanup()};utils.parent_origin=undefined;SockJS.bootstrap_iframe=function(){var facade;curr_window_id=_document.location.hash.slice(1);var onMessage=function(e){if(e.source!==parent)return;if(typeof utils.parent_origin==="undefined")utils.parent_origin=e.origin;if(e.origin!==utils.parent_origin)return;var window_id=e.data.slice(0,8);var type=e.data.slice(8,9);var data=e.data.slice(9);if(window_id!==curr_window_id)return;switch(type){case"s":var p=JSON.parse(data);var version=p[0];var protocol=p[1];var trans_url=p[2];var base_url=p[3];if(version!==SockJS.version){utils.log("Incompatibile SockJS! Main site uses:"+' "'+version+'", the iframe:'+' "'+SockJS.version+'".')}if(!utils.flatUrl(trans_url)||!utils.flatUrl(base_url)){utils.log("Only basic urls are supported in SockJS");return}if(!utils.isSameOriginUrl(trans_url)||!utils.isSameOriginUrl(base_url)){utils.log("Can't connect to different domain from within an "+"iframe. ("+JSON.stringify([_window.location.href,trans_url,base_url])+")");return}facade=new FacadeJS;facade._transport=new FacadeJS[protocol](facade,trans_url,base_url);break;case"m":facade._doSend(data);break;case"c":if(facade)facade._doCleanup();facade=null;break}};utils.attachMessage(onMessage);postMessage("s")};var InfoReceiver=function(base_url,AjaxObject){var that=this;utils.delay(function(){that.doXhr(base_url,AjaxObject)})};InfoReceiver.prototype=new EventEmitter(["finish"]);InfoReceiver.prototype.doXhr=function(base_url,AjaxObject){var that=this;var t0=(new Date).getTime();var xo=new AjaxObject("GET",base_url+"/info?cb="+utils.random_string(10));var tref=utils.delay(8e3,function(){xo.ontimeout()});xo.onfinish=function(status,text){clearTimeout(tref);tref=null;if(status===200){var rtt=(new Date).getTime()-t0;var info=JSON.parse(text);if((typeof info==="undefined"?"undefined":(0,_typeof3.default)(info))!=="object")info={};that.emit("finish",info,rtt)}else{that.emit("finish")}};xo.ontimeout=function(){xo.close();that.emit("finish")}};var InfoReceiverIframe=function(base_url){var that=this;var go=function(){var ifr=new IframeTransport;ifr.protocol="w-iframe-info-receiver";var fun=function(r){if(typeof r==="string"&&r.substr(0,1)==="m"){var d=JSON.parse(r.substr(1));var info=d[0],rtt=d[1];that.emit("finish",info,rtt)}else{that.emit("finish")}ifr.doCleanup();ifr=null};var mock_ri={_options:{},_didClose:fun,_didMessage:fun};ifr.i_constructor(mock_ri,base_url,base_url)};if(!_document.body){utils.attachEvent("load",go)}else{go()}};InfoReceiverIframe.prototype=new EventEmitter(["finish"]);var InfoReceiverFake=function(){var that=this;utils.delay(function(){that.emit("finish",{},2e3)})};InfoReceiverFake.prototype=new EventEmitter(["finish"]);var createInfoReceiver=function(base_url){if(utils.isSameOriginUrl(base_url)){return new InfoReceiver(base_url,utils.XHRLocalObject)}switch(utils.isXHRCorsCapable()){case 1:return new InfoReceiver(base_url,utils.XHRLocalObject);case 2:if(utils.isSameOriginScheme(base_url))return new InfoReceiver(base_url,utils.XDRObject);else return new InfoReceiverFake;case 3:return new InfoReceiverIframe(base_url);default:return new InfoReceiverFake}};var WInfoReceiverIframe=FacadeJS["w-iframe-info-receiver"]=function(ri,_trans_url,base_url){var ir=new InfoReceiver(base_url,utils.XHRLocalObject);ir.onfinish=function(info,rtt){ri._didMessage("m"+JSON.stringify([info,rtt]));ri._didClose()}};WInfoReceiverIframe.prototype.doCleanup=function(){};var EventSourceIframeTransport=SockJS["iframe-eventsource"]=function(){var that=this;that.protocol="w-iframe-eventsource";that.i_constructor.apply(that,arguments)};EventSourceIframeTransport.prototype=new IframeTransport;EventSourceIframeTransport.enabled=function(){return"EventSource"in _window&&IframeTransport.enabled()};EventSourceIframeTransport.need_body=true;EventSourceIframeTransport.roundTrips=3;var EventSourceTransport=FacadeJS["w-iframe-eventsource"]=function(ri,trans_url){this.run(ri,trans_url,"/eventsource",EventSourceReceiver,utils.XHRLocalObject)};EventSourceTransport.prototype=new AjaxBasedTransport;var XhrPollingIframeTransport=SockJS["iframe-xhr-polling"]=function(){var that=this;that.protocol="w-iframe-xhr-polling";that.i_constructor.apply(that,arguments)};XhrPollingIframeTransport.prototype=new IframeTransport;XhrPollingIframeTransport.enabled=function(){return _window.XMLHttpRequest&&IframeTransport.enabled()};XhrPollingIframeTransport.need_body=true;XhrPollingIframeTransport.roundTrips=3;var XhrPollingITransport=FacadeJS["w-iframe-xhr-polling"]=function(ri,trans_url){this.run(ri,trans_url,"/xhr",XhrReceiver,utils.XHRLocalObject)};XhrPollingITransport.prototype=new AjaxBasedTransport;var HtmlFileIframeTransport=SockJS["iframe-htmlfile"]=function(){var that=this;that.protocol="w-iframe-htmlfile";that.i_constructor.apply(that,arguments)};HtmlFileIframeTransport.prototype=new IframeTransport;HtmlFileIframeTransport.enabled=function(){return IframeTransport.enabled()};HtmlFileIframeTransport.need_body=true;HtmlFileIframeTransport.roundTrips=3;var HtmlFileTransport=FacadeJS["w-iframe-htmlfile"]=function(ri,trans_url){this.run(ri,trans_url,"/htmlfile",HtmlfileReceiver,utils.XHRLocalObject)};HtmlFileTransport.prototype=new AjaxBasedTransport;var Polling=function(ri,Receiver,recv_url,AjaxObject){var that=this;that.ri=ri;that.Receiver=Receiver;that.recv_url=recv_url;that.AjaxObject=AjaxObject;that._scheduleRecv()};Polling.prototype._scheduleRecv=function(){var that=this;var poll=that.poll=new that.Receiver(that.recv_url,that.AjaxObject);var msg_counter=0;poll.onmessage=function(e){msg_counter+=1;that.ri._didMessage(e.data)};poll.onclose=function(e){that.poll=poll=poll.onmessage=poll.onclose=null;if(!that.poll_is_closing){if(e.reason==="permanent"){that.ri._didClose(1006,"Polling error ("+e.reason+")")}else{that._scheduleRecv()}}}};Polling.prototype.abort=function(){var that=this;that.poll_is_closing=true;if(that.poll){that.poll.abort()}};var EventSourceReceiver=function(url){var that=this;var es=new EventSource(url);es.onmessage=function(e){that.dispatchEvent(new SimpleEvent("message",{data:unescape(e.data)}))};that.es_close=es.onerror=function(e,abort_reason){var reason=abort_reason?"user":es.readyState!==2?"network":"permanent";that.es_close=es.onmessage=es.onerror=null;es.close();es=null;utils.delay(200,function(){that.dispatchEvent(new SimpleEvent("close",{reason:reason}))})}};EventSourceReceiver.prototype=new REventTarget;EventSourceReceiver.prototype.abort=function(){var that=this;if(that.es_close){that.es_close({},true)}};var _is_ie_htmlfile_capable;var isIeHtmlfileCapable=function(){if(_is_ie_htmlfile_capable===undefined){if("ActiveXObject"in _window){try{_is_ie_htmlfile_capable=!!new ActiveXObject("htmlfile")}catch(x){}}else{_is_ie_htmlfile_capable=false}}return _is_ie_htmlfile_capable};var HtmlfileReceiver=function(url){var that=this;utils.polluteGlobalNamespace();that.id="a"+utils.random_string(6,26);url+=(url.indexOf("?")===-1?"?":"&")+"c="+escape(WPrefix+"."+that.id);var constructor=isIeHtmlfileCapable()?utils.createHtmlfile:utils.createIframe;var iframeObj;_window[WPrefix][that.id]={start:function(){iframeObj.loaded()},message:function(data){that.dispatchEvent(new SimpleEvent("message",{data:data}))},stop:function(){that.iframe_close({},"network")}};that.iframe_close=function(e,abort_reason){iframeObj.cleanup();that.iframe_close=iframeObj=null;delete _window[WPrefix][that.id];that.dispatchEvent(new SimpleEvent("close",{reason:abort_reason}))};iframeObj=constructor(url,function(e){that.iframe_close({},"permanent")})};HtmlfileReceiver.prototype=new REventTarget;HtmlfileReceiver.prototype.abort=function(){var that=this;if(that.iframe_close){that.iframe_close({},"user")}};var XhrReceiver=function(url,AjaxObject){var that=this;var buf_pos=0;that.xo=new AjaxObject("POST",url,null);that.xo.onchunk=function(status,text){if(status!==200)return;while(1){var buf=text.slice(buf_pos);var p=buf.indexOf("\n");if(p===-1)break;buf_pos+=p+1;var msg=buf.slice(0,p);that.dispatchEvent(new SimpleEvent("message",{data:msg}))}};that.xo.onfinish=function(status,text){that.xo.onchunk(status,text);that.xo=null;var reason=status===200?"network":"permanent";that.dispatchEvent(new SimpleEvent("close",{reason:reason}))}};XhrReceiver.prototype=new REventTarget;XhrReceiver.prototype.abort=function(){var that=this;if(that.xo){that.xo.close();that.dispatchEvent(new SimpleEvent("close",{reason:"user"}));that.xo=null}};SockJS.getUtils=function(){return utils};SockJS.getIframeTransport=function(){return IframeTransport};return SockJS}();if("_sockjs_onload"in window)setTimeout(_sockjs_onload,1);if(typeof define==="function"&&define.amd){define("sockjs",[],function(){return SockJS})}},"stream_client_sockjs.js":function(require,exports,module){var DDP=void 0,LivedataTest=void 0;module.watch(require("./namespace.js"),{DDP:function(v){DDP=v},LivedataTest:function(v){LivedataTest=v}},0);LivedataTest.ClientStream=function(url,options){var self=this;self.options=_.extend({retry:true},options);self._initCommon(self.options);self.HEARTBEAT_TIMEOUT=100*1e3;self.rawUrl=url;self.socket=null;self.heartbeatTimer=null;if(typeof window!=="undefined"&&window.addEventListener)window.addEventListener("online",_.bind(self._online,self),false);self._launchConnection()};_.extend(LivedataTest.ClientStream.prototype,{send:function(data){var self=this;if(self.currentStatus.connected){self.socket.send(data)}},_changeUrl:function(url){var self=this;self.rawUrl=url},_connected:function(){var self=this;if(self.connectionTimer){clearTimeout(self.connectionTimer);self.connectionTimer=null}if(self.currentStatus.connected){return}self.currentStatus.status="connected";self.currentStatus.connected=true;self.currentStatus.retryCount=0;self.statusChanged();_.each(self.eventCallbacks.reset,function(callback){callback()})},_cleanup:function(maybeError){var self=this;self._clearConnectionAndHeartbeatTimers();if(self.socket){self.socket.onmessage=self.socket.onclose=self.socket.onerror=self.socket.onheartbeat=function(){};self.socket.close();self.socket=null}_.each(self.eventCallbacks.disconnect,function(callback){callback(maybeError)})},_clearConnectionAndHeartbeatTimers:function(){var self=this;if(self.connectionTimer){clearTimeout(self.connectionTimer);self.connectionTimer=null}if(self.heartbeatTimer){clearTimeout(self.heartbeatTimer);self.heartbeatTimer=null}},_heartbeat_timeout:function(){var self=this;Meteor._debug("Connection timeout. No sockjs heartbeat received.");self._lostConnection(new DDP.ConnectionError("Heartbeat timed out"))},_heartbeat_received:function(){var self=this;if(self._forcedToDisconnect)return;if(self.heartbeatTimer)clearTimeout(self.heartbeatTimer);self.heartbeatTimer=setTimeout(_.bind(self._heartbeat_timeout,self),self.HEARTBEAT_TIMEOUT)},_sockjsProtocolsWhitelist:function(){var protocolsWhitelist=["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];var noWebsockets=navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&/OS 4_|OS 5_/.test(navigator.userAgent);if(!noWebsockets)protocolsWhitelist=["websocket"].concat(protocolsWhitelist);return protocolsWhitelist},_launchConnection:function(){var self=this;self._cleanup();var options=_.extend({protocols_whitelist:self._sockjsProtocolsWhitelist()},self.options._sockjsOptions);self.socket=new SockJS(toSockjsUrl(self.rawUrl),undefined,options);self.socket.onopen=function(data){self._connected()};self.socket.onmessage=function(data){self._heartbeat_received();if(self.currentStatus.connected)_.each(self.eventCallbacks.message,function(callback){callback(data.data)})};self.socket.onclose=function(){self._lostConnection()};self.socket.onerror=function(){Meteor._debug("stream error",_.toArray(arguments),(new Date).toDateString())};self.socket.onheartbeat=function(){self._heartbeat_received()};if(self.connectionTimer)clearTimeout(self.connectionTimer);self.connectionTimer=setTimeout(function(){self._lostConnection(new DDP.ConnectionError("DDP connection timed out"))},self.CONNECT_TIMEOUT)}})},"stream_client_common.js":function(require,exports,module){var DDP=void 0,LivedataTest=void 0;module.watch(require("./namespace.js"),{DDP:function(v){DDP=v},LivedataTest:function(v){LivedataTest=v}},0);var startsWith=function(str,starts){return str.length>=starts.length&&str.substring(0,starts.length)===starts};var endsWith=function(str,ends){return str.length>=ends.length&&str.substring(str.length-ends.length)===ends};var translateUrl=function(url,newSchemeBase,subPath){if(!newSchemeBase){newSchemeBase="http"}var ddpUrlMatch=url.match(/^ddp(i?)\+sockjs:\/\//);var httpUrlMatch=url.match(/^http(s?):\/\//);var newScheme;if(ddpUrlMatch){var urlAfterDDP=url.substr(ddpUrlMatch[0].length);newScheme=ddpUrlMatch[1]==="i"?newSchemeBase:newSchemeBase+"s";var slashPos=urlAfterDDP.indexOf("/");var host=slashPos===-1?urlAfterDDP:urlAfterDDP.substr(0,slashPos);var rest=slashPos===-1?"":urlAfterDDP.substr(slashPos);host=host.replace(/\*/g,function(){return Math.floor(Random.fraction()*10)});return newScheme+"://"+host+rest}else if(httpUrlMatch){newScheme=!httpUrlMatch[1]?newSchemeBase:newSchemeBase+"s";var urlAfterHttp=url.substr(httpUrlMatch[0].length);url=newScheme+"://"+urlAfterHttp}if(url.indexOf("://")===-1&&!startsWith(url,"/")){url=newSchemeBase+"://"+url}url=Meteor._relativeToSiteRootUrl(url);if(endsWith(url,"/"))return url+subPath;else return url+"/"+subPath};toSockjsUrl=function(url){return translateUrl(url,"http","sockjs")};toWebsocketUrl=function(url){var ret=translateUrl(url,"ws","websocket");return ret};LivedataTest.toSockjsUrl=toSockjsUrl;_.extend(LivedataTest.ClientStream.prototype,{on:function(name,callback){var self=this;if(name!=="message"&&name!=="reset"&&name!=="disconnect")throw new Error("unknown event type: "+name);if(!self.eventCallbacks[name])self.eventCallbacks[name]=[];self.eventCallbacks[name].push(callback)},_initCommon:function(options){var self=this;options=options||{};self.CONNECT_TIMEOUT=options.connectTimeoutMs||1e4;self.eventCallbacks={};self._forcedToDisconnect=false;self.currentStatus={status:"connecting",connected:false,retryCount:0};self.statusListeners=typeof Tracker!=="undefined"&&new Tracker.Dependency;self.statusChanged=function(){if(self.statusListeners)self.statusListeners.changed()};self._retry=new Retry;self.connectionTimer=null},reconnect:function(options){var self=this;options=options||{};if(options.url){self._changeUrl(options.url)}if(options._sockjsOptions){self.options._sockjsOptions=options._sockjsOptions}if(self.currentStatus.connected){if(options._force||options.url){self._lostConnection(new DDP.ForcedReconnectError)}return}if(self.currentStatus.status==="connecting"){self._lostConnection()}self._retry.clear();self.currentStatus.retryCount-=1;self._retryNow()},disconnect:function(options){var self=this;options=options||{};if(self._forcedToDisconnect)return;if(options._permanent){self._forcedToDisconnect=true}self._cleanup();self._retry.clear();self.currentStatus={status:options._permanent?"failed":"offline",connected:false,retryCount:0};if(options._permanent&&options._error)self.currentStatus.reason=options._error;self.statusChanged()},_lostConnection:function(maybeError){var self=this;self._cleanup(maybeError);self._retryLater(maybeError)},_online:function(){if(this.currentStatus.status!="offline")this.reconnect()},_retryLater:function(maybeError){var self=this;var timeout=0;if(self.options.retry||maybeError&&maybeError.errorType==="DDP.ForcedReconnectError"){timeout=self._retry.retryLater(self.currentStatus.retryCount,_.bind(self._retryNow,self));self.currentStatus.status="waiting";self.currentStatus.retryTime=(new Date).getTime()+timeout}else{self.currentStatus.status="failed";delete self.currentStatus.retryTime}self.currentStatus.connected=false;self.statusChanged()},_retryNow:function(){var self=this;if(self._forcedToDisconnect)return;self.currentStatus.retryCount+=1;self.currentStatus.status="connecting";self.currentStatus.connected=false;delete self.currentStatus.retryTime;self.statusChanged();self._launchConnection()},status:function(){var self=this;if(self.statusListeners)self.statusListeners.depend();return self.currentStatus}});DDP.ConnectionError=Meteor.makeErrorType("DDP.ConnectionError",function(message){var self=this;self.message=message});DDP.ForcedReconnectError=Meteor.makeErrorType("DDP.ForcedReconnectError",function(){})},"livedata_common.js":function(require,exports,module){var DDP=void 0,LivedataTest=void 0;module.watch(require("./namespace.js"),{DDP:function(v){DDP=v},LivedataTest:function(v){LivedataTest=v}},0);LivedataTest.SUPPORTED_DDP_VERSIONS=DDPCommon.SUPPORTED_DDP_VERSIONS;DDP._CurrentMethodInvocation=new Meteor.EnvironmentVariable;DDP._CurrentPublicationInvocation=new Meteor.EnvironmentVariable;DDP._CurrentInvocation=DDP._CurrentMethodInvocation},"random_stream.js":function(require,exports,module){var DDP=void 0;module.watch(require("./namespace.js"),{DDP:function(v){DDP=v}},0);DDP.randomStream=function(name){var scope=DDP._CurrentMethodInvocation.get();return DDPCommon.RandomStream.get(scope,name)}},"livedata_connection.js":function(require,exports,module){var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DDP=void 0,LivedataTest=void 0;module.watch(require("./namespace.js"),{DDP:function(v){DDP=v},LivedataTest:function(v){LivedataTest=v}},0);var MongoIDMap=void 0;module.watch(require("./id_map.js"),{MongoIDMap:function(v){MongoIDMap=v}},1);if(Meteor.isServer){var Fiber=Npm.require("fibers");var Future=Npm.require("fibers/future")}var Connection=function(url,options){var self=this;options=_.extend({onConnected:function(){},onDDPVersionNegotiationFailure:function(description){Meteor._debug(description)},heartbeatInterval:17500,heartbeatTimeout:15e3,npmFayeOptions:{},reloadWithOutstanding:false,supportedDDPVersions:DDPCommon.SUPPORTED_DDP_VERSIONS,retry:true,respondToPings:true,bufferedWritesInterval:5,bufferedWritesMaxAge:500},options);self.onReconnect=null;if((typeof url==="undefined"?"undefined":(0,_typeof3.default)(url))==="object"){self._stream=url}else{self._stream=new LivedataTest.ClientStream(url,{retry:options.retry,headers:options.headers,_sockjsOptions:options._sockjsOptions,_dontPrintErrors:options._dontPrintErrors,connectTimeoutMs:options.connectTimeoutMs,npmFayeOptions:options.npmFayeOptions})}self._lastSessionId=null;self._versionSuggestion=null;self._version=null;self._stores={};self._methodHandlers={};self._nextMethodId=1;self._supportedDDPVersions=options.supportedDDPVersions;self._heartbeatInterval=options.heartbeatInterval;self._heartbeatTimeout=options.heartbeatTimeout;self._methodInvokers={};self._outstandingMethodBlocks=[];self._documentsWrittenByStub={};self._serverDocuments={};self._afterUpdateCallbacks=[];self._messagesBufferedUntilQuiescence=[];self._methodsBlockingQuiescence={};self._subsBeingRevived={};self._resetStores=false;self._updatesForUnknownStores={};self._retryMigrate=null;self.__flushBufferedWrites=Meteor.bindEnvironment(self._flushBufferedWrites,"flushing DDP buffered writes",self);self._bufferedWrites={};self._bufferedWritesFlushAt=null;self._bufferedWritesFlushHandle=null;self._bufferedWritesInterval=options.bufferedWritesInterval;self._bufferedWritesMaxAge=options.bufferedWritesMaxAge;self._subscriptions={};self._userId=null;self._userIdDeps=new Tracker.Dependency;if(Meteor.isClient&&Package.reload&&!options.reloadWithOutstanding){Package.reload.Reload._onMigrate(function(retry){if(!self._readyToMigrate()){if(self._retryMigrate)throw new Error("Two migrations in progress?");self._retryMigrate=retry;return false}else{return[true]}})}var onMessage=function(raw_msg){try{var msg=DDPCommon.parseDDP(raw_msg)}catch(e){Meteor._debug("Exception while parsing DDP",e);return}if(self._heartbeat){self._heartbeat.messageReceived()}if(msg===null||!msg.msg){if(!(msg&&msg.server_id))Meteor._debug("discarding invalid livedata message",msg);return}if(msg.msg==="connected"){self._version=self._versionSuggestion;self._livedata_connected(msg);options.onConnected()}else if(msg.msg==="failed"){if(_.contains(self._supportedDDPVersions,msg.version)){self._versionSuggestion=msg.version;self._stream.reconnect({_force:true})}else{var description="DDP version negotiation failed; server requested version "+msg.version;self._stream.disconnect({_permanent:true,_error:description});options.onDDPVersionNegotiationFailure(description)}}else if(msg.msg==="ping"&&options.respondToPings){self._send({msg:"pong",id:msg.id})}else if(msg.msg==="pong"){}else if(_.include(["added","changed","removed","ready","updated"],msg.msg))self._livedata_data(msg);else if(msg.msg==="nosub")self._livedata_nosub(msg);else if(msg.msg==="result")self._livedata_result(msg);else if(msg.msg==="error")self._livedata_error(msg);else Meteor._debug("discarding unknown livedata message type",msg)};var onReset=function(){var msg={msg:"connect"};if(self._lastSessionId)msg.session=self._lastSessionId;msg.version=self._versionSuggestion||self._supportedDDPVersions[0];self._versionSuggestion=msg.version;msg.support=self._supportedDDPVersions;self._send(msg);if(self._outstandingMethodBlocks.length>0){var currentMethodBlock=self._outstandingMethodBlocks[0].methods;self._outstandingMethodBlocks[0].methods=currentMethodBlock.filter(function(methodInvoker){if(methodInvoker.sentMessage&&methodInvoker.noRetry){methodInvoker.receiveResult(new Meteor.Error("invocation-failed","Method invocation might have failed due to dropped connection. "+"Failing because `noRetry` option was passed to Meteor.apply."))}return!(methodInvoker.sentMessage&&methodInvoker.noRetry)})}if(!_.isEmpty(self._outstandingMethodBlocks)&&_.isEmpty(self._outstandingMethodBlocks[0].methods)){self._outstandingMethodBlocks.shift()}_.each(self._methodInvokers,function(m){m.sentMessage=false});self._callOnReconnectAndSendAppropriateOutstandingMethods();_.each(self._subscriptions,function(sub,id){self._send({msg:"sub",id:id,name:sub.name,params:sub.params})})};var onDisconnect=function(){if(self._heartbeat){self._heartbeat.stop();self._heartbeat=null}};if(Meteor.isServer){self._stream.on("message",Meteor.bindEnvironment(onMessage,"handling DDP message"));self._stream.on("reset",Meteor.bindEnvironment(onReset,"handling DDP reset"));self._stream.on("disconnect",Meteor.bindEnvironment(onDisconnect,"handling DDP disconnect"))}else{self._stream.on("message",onMessage);self._stream.on("reset",onReset);self._stream.on("disconnect",onDisconnect)}};var MethodInvoker=function(options){var self=this;self.methodId=options.methodId;self.sentMessage=false;self._callback=options.callback;self._connection=options.connection;self._message=options.message;self._onResultReceived=options.onResultReceived||function(){};self._wait=options.wait;self.noRetry=options.noRetry;self._methodResult=null;self._dataVisible=false;self._connection._methodInvokers[self.methodId]=self};_.extend(MethodInvoker.prototype,{sendMessage:function(){var self=this;if(self.gotResult())throw new Error("sendingMethod is called on method with result");self._dataVisible=false;self.sentMessage=true;if(self._wait)self._connection._methodsBlockingQuiescence[self.methodId]=true;self._connection._send(self._message)},_maybeInvokeCallback:function(){var self=this;if(self._methodResult&&self._dataVisible){self._callback(self._methodResult[0],self._methodResult[1]);delete self._connection._methodInvokers[self.methodId];self._connection._outstandingMethodFinished()}},receiveResult:function(err,result){var self=this;if(self.gotResult())throw new Error("Methods should only receive results once");self._methodResult=[err,result];self._onResultReceived(err,result);self._maybeInvokeCallback()},dataVisible:function(){var self=this;self._dataVisible=true;self._maybeInvokeCallback()},gotResult:function(){var self=this;return!!self._methodResult}});_.extend(Connection.prototype,{registerStore:function(name,wrappedStore){var self=this;if(name in self._stores)return false;var store={};_.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals","getDoc","_getCollection"],function(method){store[method]=function(){return wrappedStore[method]?wrappedStore[method].apply(wrappedStore,arguments):undefined}});self._stores[name]=store;var queued=self._updatesForUnknownStores[name];if(queued){store.beginUpdate(queued.length,false);_.each(queued,function(msg){store.update(msg)});store.endUpdate();delete self._updatesForUnknownStores[name]}return true},subscribe:function(name){var self=this;var params=Array.prototype.slice.call(arguments,1);var callbacks={};if(params.length){var lastParam=params[params.length-1];if(_.isFunction(lastParam)){callbacks.onReady=params.pop()}else if(lastParam&&_.any([lastParam.onReady,lastParam.onError,lastParam.onStop],_.isFunction)){callbacks=params.pop()}}var existing=_.find(self._subscriptions,function(sub){return sub.inactive&&sub.name===name&&EJSON.equals(sub.params,params)});var id;if(existing){id=existing.id;existing.inactive=false;if(callbacks.onReady){if(existing.ready){callbacks.onReady()}else{existing.readyCallback=callbacks.onReady}}if(callbacks.onError){existing.errorCallback=callbacks.onError}if(callbacks.onStop){existing.stopCallback=callbacks.onStop}}else{id=Random.id();self._subscriptions[id]={id:id,name:name,params:EJSON.clone(params),inactive:false,ready:false,readyDeps:new Tracker.Dependency,readyCallback:callbacks.onReady,errorCallback:callbacks.onError,stopCallback:callbacks.onStop,connection:self,remove:function(){delete this.connection._subscriptions[this.id];this.ready&&this.readyDeps.changed()},stop:function(){this.connection._send({msg:"unsub",id:id});this.remove();if(callbacks.onStop){callbacks.onStop()}}};self._send({msg:"sub",id:id,name:name,params:params})}var handle={stop:function(){if(!_.has(self._subscriptions,id))return;self._subscriptions[id].stop()},ready:function(){if(!_.has(self._subscriptions,id))return false;var record=self._subscriptions[id];record.readyDeps.depend();return record.ready},subscriptionId:id};if(Tracker.active){Tracker.onInvalidate(function(c){if(_.has(self._subscriptions,id))self._subscriptions[id].inactive=true;Tracker.afterFlush(function(){if(_.has(self._subscriptions,id)&&self._subscriptions[id].inactive)handle.stop()})})}return handle},_subscribeAndWait:function(name,args,options){var self=this;var f=new Future;var ready=false;var handle;args=args||[];args.push({onReady:function(){ready=true;f["return"]()},onError:function(e){if(!ready)f["throw"](e);else options&&options.onLateError&&options.onLateError(e)}});handle=self.subscribe.apply(self,[name].concat(args));f.wait();return handle},methods:function(methods){var self=this;_.each(methods,function(func,name){if(typeof func!=="function")throw new Error("Method '"+name+"' must be a function");if(self._methodHandlers[name])throw new Error("A method named '"+name+"' is already defined");self._methodHandlers[name]=func})},call:function(name){var args=Array.prototype.slice.call(arguments,1);if(args.length&&typeof args[args.length-1]==="function")var callback=args.pop();return this.apply(name,args,callback)},apply:function(name,args,options,callback){var self=this;if(!callback&&typeof options==="function"){callback=options;options={}}options=options||{};if(callback){callback=Meteor.bindEnvironment(callback,"delivering result of invoking '"+name+"'")}args=EJSON.clone(args);var methodId=function(){var id;return function(){if(id===undefined)id=""+self._nextMethodId++;return id}}();var enclosing=DDP._CurrentMethodInvocation.get();var alreadyInSimulation=enclosing&&enclosing.isSimulation;var randomSeed=null;var randomSeedGenerator=function(){if(randomSeed===null){randomSeed=DDPCommon.makeRpcSeed(enclosing,name)}return randomSeed};var stub=self._methodHandlers[name];if(stub){var setUserId=function(userId){self.setUserId(userId)};var invocation=new DDPCommon.MethodInvocation({isSimulation:true,userId:self.userId(),setUserId:setUserId,randomSeed:function(){return randomSeedGenerator()}});if(!alreadyInSimulation)self._saveOriginals();try{var stubReturnValue=DDP._CurrentMethodInvocation.withValue(invocation,function(){if(Meteor.isServer){return Meteor._noYieldsAllowed(function(){return stub.apply(invocation,EJSON.clone(args))})}else{return stub.apply(invocation,EJSON.clone(args))}})}catch(e){var exception=e}if(!alreadyInSimulation)self._retrieveAndStoreOriginals(methodId())}if(alreadyInSimulation){if(callback){callback(exception,stubReturnValue);return undefined}if(exception)throw exception;return stubReturnValue}if(exception){if(options.throwStubExceptions){throw exception}else if(!exception.expected){Meteor._debug("Exception while simulating the effect of invoking '"+name+"'",exception,exception.stack)}}if(!callback){if(Meteor.isClient){callback=function(err){err&&Meteor._debug("Error invoking Method '"+name+"':",err.message)}}else{var future=new Future;callback=future.resolver()}}var message={msg:"method",method:name,params:args,id:methodId()};if(randomSeed!==null){message.randomSeed=randomSeed}var methodInvoker=new MethodInvoker({methodId:methodId(),callback:callback,connection:self,onResultReceived:options.onResultReceived,wait:!!options.wait,message:message,noRetry:!!options.noRetry});if(options.wait){self._outstandingMethodBlocks.push({wait:true,methods:[methodInvoker]})}else{if(_.isEmpty(self._outstandingMethodBlocks)||_.last(self._outstandingMethodBlocks).wait)self._outstandingMethodBlocks.push({wait:false,methods:[]});_.last(self._outstandingMethodBlocks).methods.push(methodInvoker)}if(self._outstandingMethodBlocks.length===1)methodInvoker.sendMessage();if(future){return future.wait()}return options.returnStubValue?stubReturnValue:undefined},_saveOriginals:function(){var self=this;if(!self._waitingForQuiescence())self._flushBufferedWrites();_.each(self._stores,function(s){s.saveOriginals()})},_retrieveAndStoreOriginals:function(methodId){var self=this;if(self._documentsWrittenByStub[methodId])throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");var docsWritten=[];_.each(self._stores,function(s,collection){var originals=s.retrieveOriginals();if(!originals)return;originals.forEach(function(doc,id){docsWritten.push({collection:collection,id:id});if(!_.has(self._serverDocuments,collection))self._serverDocuments[collection]=new MongoIDMap;var serverDoc=self._serverDocuments[collection].setDefault(id,{});if(serverDoc.writtenByStubs){serverDoc.writtenByStubs[methodId]=true}else{serverDoc.document=doc;serverDoc.flushCallbacks=[];serverDoc.writtenByStubs={};serverDoc.writtenByStubs[methodId]=true}})});if(!_.isEmpty(docsWritten)){self._documentsWrittenByStub[methodId]=docsWritten}},_unsubscribeAll:function(){var self=this;_.each(_.clone(self._subscriptions),function(sub,id){if(sub.name!=="meteor_autoupdate_clientVersions"){self._subscriptions[id].stop()}})},_send:function(obj){var self=this;self._stream.send(DDPCommon.stringifyDDP(obj))},_lostConnection:function(error){var self=this;self._stream._lostConnection(error)},status:function(){var self=this;return self._stream.status.apply(self._stream,arguments)},reconnect:function(){var self=this;return self._stream.reconnect.apply(self._stream,arguments)},disconnect:function(){var self=this;return self._stream.disconnect.apply(self._stream,arguments)},close:function(){var self=this;return self._stream.disconnect({_permanent:true})},userId:function(){var self=this;if(self._userIdDeps)self._userIdDeps.depend();return self._userId},setUserId:function(userId){var self=this;if(self._userId===userId)return;self._userId=userId;if(self._userIdDeps)self._userIdDeps.changed()},_waitingForQuiescence:function(){var self=this;return!_.isEmpty(self._subsBeingRevived)||!_.isEmpty(self._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var self=this;return _.any(_.pluck(self._methodInvokers,"sentMessage"))},_livedata_connected:function(msg){var self=this;if(self._version!=="pre1"&&self._heartbeatInterval!==0){self._heartbeat=new DDPCommon.Heartbeat({heartbeatInterval:self._heartbeatInterval,heartbeatTimeout:self._heartbeatTimeout,onTimeout:function(){self._lostConnection(new DDP.ConnectionError("DDP heartbeat timed out"))},sendPing:function(){self._send({msg:"ping"})}});self._heartbeat.start()}if(self._lastSessionId)self._resetStores=true;if(typeof msg.session==="string"){var reconnectedToPreviousSession=self._lastSessionId===msg.session;self._lastSessionId=msg.session}if(reconnectedToPreviousSession){return}self._updatesForUnknownStores={};if(self._resetStores){self._documentsWrittenByStub={};self._serverDocuments={}}self._afterUpdateCallbacks=[];self._subsBeingRevived={};_.each(self._subscriptions,function(sub,id){if(sub.ready)self._subsBeingRevived[id]=true});self._methodsBlockingQuiescence={};if(self._resetStores){_.each(self._methodInvokers,function(invoker){if(invoker.gotResult()){self._afterUpdateCallbacks.push(_.bind(invoker.dataVisible,invoker))}else if(invoker.sentMessage){self._methodsBlockingQuiescence[invoker.methodId]=true}})}self._messagesBufferedUntilQuiescence=[];if(!self._waitingForQuiescence()){if(self._resetStores){_.each(self._stores,function(s){s.beginUpdate(0,true);s.endUpdate()});self._resetStores=false}self._runAfterUpdateCallbacks()}},_processOneDataMessage:function(msg,updates){var self=this;self["_process_"+msg.msg](msg,updates)},_livedata_data:function(msg){var self=this;if(self._waitingForQuiescence()){self._messagesBufferedUntilQuiescence.push(msg);if(msg.msg==="nosub")delete self._subsBeingRevived[msg.id];_.each(msg.subs||[],function(subId){delete self._subsBeingRevived[subId]});_.each(msg.methods||[],function(methodId){delete self._methodsBlockingQuiescence[methodId]});if(self._waitingForQuiescence())return;_.each(self._messagesBufferedUntilQuiescence,function(bufferedMsg){self._processOneDataMessage(bufferedMsg,self._bufferedWrites)});self._messagesBufferedUntilQuiescence=[]}else{self._processOneDataMessage(msg,self._bufferedWrites)}var standardWrite=_.include(["added","changed","removed"],msg.msg);if(self._bufferedWritesInterval===0||!standardWrite){self._flushBufferedWrites();return}if(self._bufferedWritesFlushAt===null){self._bufferedWritesFlushAt=(new Date).valueOf()+self._bufferedWritesMaxAge}else if(self._bufferedWritesFlushAt<(new Date).valueOf()){self._flushBufferedWrites();return}if(self._bufferedWritesFlushHandle){clearTimeout(self._bufferedWritesFlushHandle)}self._bufferedWritesFlushHandle=setTimeout(self.__flushBufferedWrites,self._bufferedWritesInterval)},_flushBufferedWrites:function(){var self=this;if(self._bufferedWritesFlushHandle){clearTimeout(self._bufferedWritesFlushHandle);self._bufferedWritesFlushHandle=null}self._bufferedWritesFlushAt=null;var writes=self._bufferedWrites;self._bufferedWrites={};self._performWrites(writes)},_performWrites:function(updates){var self=this;if(self._resetStores||!_.isEmpty(updates)){_.each(self._stores,function(s,storeName){s.beginUpdate(_.has(updates,storeName)?updates[storeName].length:0,self._resetStores)});self._resetStores=false;_.each(updates,function(updateMessages,storeName){var store=self._stores[storeName];if(store){_.each(updateMessages,function(updateMessage){store.update(updateMessage)})}else{if(!_.has(self._updatesForUnknownStores,storeName))self._updatesForUnknownStores[storeName]=[];Array.prototype.push.apply(self._updatesForUnknownStores[storeName],updateMessages)}});_.each(self._stores,function(s){s.endUpdate()})}self._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var self=this;var callbacks=self._afterUpdateCallbacks;self._afterUpdateCallbacks=[];_.each(callbacks,function(c){c()})},_pushUpdate:function(updates,collection,msg){var self=this;if(!_.has(updates,collection)){updates[collection]=[]}updates[collection].push(msg)},_getServerDoc:function(collection,id){var self=this;if(!_.has(self._serverDocuments,collection))return null;var serverDocsForCollection=self._serverDocuments[collection];return serverDocsForCollection.get(id)||null},_process_added:function(msg,updates){var self=this;var id=MongoID.idParse(msg.id);var serverDoc=self._getServerDoc(msg.collection,id);if(serverDoc){var isExisting=serverDoc.document!==undefined;serverDoc.document=msg.fields||{};serverDoc.document._id=id;if(self._resetStores){var currentDoc=self._stores[msg.collection].getDoc(msg.id);if(currentDoc!==undefined)msg.fields=currentDoc;self._pushUpdate(updates,msg.collection,msg)}else if(isExisting){throw new Error("Server sent add for existing id: "+msg.id)}}else{self._pushUpdate(updates,msg.collection,msg)}},_process_changed:function(msg,updates){var self=this;var serverDoc=self._getServerDoc(msg.collection,MongoID.idParse(msg.id));if(serverDoc){if(serverDoc.document===undefined)throw new Error("Server sent changed for nonexisting id: "+msg.id);DiffSequence.applyChanges(serverDoc.document,msg.fields)}else{self._pushUpdate(updates,msg.collection,msg)}},_process_removed:function(msg,updates){var self=this;var serverDoc=self._getServerDoc(msg.collection,MongoID.idParse(msg.id));if(serverDoc){if(serverDoc.document===undefined)throw new Error("Server sent removed for nonexisting id:"+msg.id);serverDoc.document=undefined}else{self._pushUpdate(updates,msg.collection,{msg:"removed",collection:msg.collection,id:msg.id})}},_process_updated:function(msg,updates){var self=this;_.each(msg.methods,function(methodId){_.each(self._documentsWrittenByStub[methodId],function(written){var serverDoc=self._getServerDoc(written.collection,written.id);if(!serverDoc)throw new Error("Lost serverDoc for "+JSON.stringify(written));if(!serverDoc.writtenByStubs[methodId])throw new Error("Doc "+JSON.stringify(written)+" not written by  method "+methodId);delete serverDoc.writtenByStubs[methodId];if(_.isEmpty(serverDoc.writtenByStubs)){self._pushUpdate(updates,written.collection,{msg:"replace",id:MongoID.idStringify(written.id),replace:serverDoc.document});_.each(serverDoc.flushCallbacks,function(c){c()});self._serverDocuments[written.collection].remove(written.id)}});delete self._documentsWrittenByStub[methodId];var callbackInvoker=self._methodInvokers[methodId];if(!callbackInvoker)throw new Error("No callback invoker for method "+methodId);self._runWhenAllServerDocsAreFlushed(_.bind(callbackInvoker.dataVisible,callbackInvoker))})},_process_ready:function(msg,updates){var self=this;_.each(msg.subs,function(subId){self._runWhenAllServerDocsAreFlushed(function(){var subRecord=self._subscriptions[subId];if(!subRecord)return;if(subRecord.ready)return;subRecord.ready=true;subRecord.readyCallback&&subRecord.readyCallback();subRecord.readyDeps.changed()})})},_runWhenAllServerDocsAreFlushed:function(f){var self=this;var runFAfterUpdates=function(){self._afterUpdateCallbacks.push(f)};var unflushedServerDocCount=0;var onServerDocFlush=function(){--unflushedServerDocCount;if(unflushedServerDocCount===0){runFAfterUpdates()}};_.each(self._serverDocuments,function(collectionDocs){collectionDocs.forEach(function(serverDoc){var writtenByStubForAMethodWithSentMessage=_.any(serverDoc.writtenByStubs,function(dummy,methodId){var invoker=self._methodInvokers[methodId];return invoker&&invoker.sentMessage});if(writtenByStubForAMethodWithSentMessage){++unflushedServerDocCount;serverDoc.flushCallbacks.push(onServerDocFlush)}})});if(unflushedServerDocCount===0){runFAfterUpdates()}},_livedata_nosub:function(msg){var self=this;self._livedata_data(msg);if(!_.has(self._subscriptions,msg.id))return;var errorCallback=self._subscriptions[msg.id].errorCallback;var stopCallback=self._subscriptions[msg.id].stopCallback;self._subscriptions[msg.id].remove();var meteorErrorFromMsg=function(msgArg){return msgArg&&msgArg.error&&new Meteor.Error(msgArg.error.error,msgArg.error.reason,msgArg.error.details)};if(errorCallback&&msg.error){errorCallback(meteorErrorFromMsg(msg))}if(stopCallback){stopCallback(meteorErrorFromMsg(msg))}},_process_nosub:function(){},_livedata_result:function(msg){var self=this;if(!_.isEmpty(self._bufferedWrites)){self._flushBufferedWrites()}if(_.isEmpty(self._outstandingMethodBlocks)){Meteor._debug("Received method result but no methods outstanding");return}var currentMethodBlock=self._outstandingMethodBlocks[0].methods;var m;for(var i=0;i<currentMethodBlock.length;i++){m=currentMethodBlock[i];if(m.methodId===msg.id)break}if(!m){Meteor._debug("Can't match method response to original method call",msg);return}currentMethodBlock.splice(i,1);if(_.has(msg,"error")){m.receiveResult(new Meteor.Error(msg.error.error,msg.error.reason,msg.error.details))}else{m.receiveResult(undefined,msg.result)}},_outstandingMethodFinished:function(){var self=this;if(self._anyMethodsAreOutstanding())return;if(!_.isEmpty(self._outstandingMethodBlocks)){var firstBlock=self._outstandingMethodBlocks.shift();if(!_.isEmpty(firstBlock.methods))throw new Error("No methods outstanding but nonempty block: "+JSON.stringify(firstBlock));if(!_.isEmpty(self._outstandingMethodBlocks))self._sendOutstandingMethods()}self._maybeMigrate()},_sendOutstandingMethods:function(){var self=this;if(_.isEmpty(self._outstandingMethodBlocks))return;_.each(self._outstandingMethodBlocks[0].methods,function(m){m.sendMessage()})},_livedata_error:function(msg){Meteor._debug("Received error from server: ",msg.reason);if(msg.offendingMessage)Meteor._debug("For: ",msg.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var self=this;var oldOutstandingMethodBlocks=self._outstandingMethodBlocks;self._outstandingMethodBlocks=[];self.onReconnect&&self.onReconnect();DDP._reconnectHook.each(function(callback){callback(self);return true});if(_.isEmpty(oldOutstandingMethodBlocks))return;if(_.isEmpty(self._outstandingMethodBlocks)){self._outstandingMethodBlocks=oldOutstandingMethodBlocks;self._sendOutstandingMethods();return}if(!_.last(self._outstandingMethodBlocks).wait&&!oldOutstandingMethodBlocks[0].wait){_.each(oldOutstandingMethodBlocks[0].methods,function(m){_.last(self._outstandingMethodBlocks).methods.push(m);if(self._outstandingMethodBlocks.length===1)m.sendMessage()});oldOutstandingMethodBlocks.shift()}_.each(oldOutstandingMethodBlocks,function(block){self._outstandingMethodBlocks.push(block)})},_readyToMigrate:function(){var self=this;return _.isEmpty(self._methodInvokers)},_maybeMigrate:function(){var self=this;if(self._retryMigrate&&self._readyToMigrate()){self._retryMigrate();self._retryMigrate=null}}});LivedataTest.Connection=Connection;DDP.connect=function(url,options){var ret=new Connection(url,options);allConnections.push(ret);return ret};DDP._reconnectHook=new Hook({bindEnvironment:false});DDP.onReconnect=function(callback){return DDP._reconnectHook.register(callback)};allConnections=[];DDP._allSubscriptionsReady=function(){return _.all(allConnections,function(conn){return _.all(conn._subscriptions,function(sub){return sub.ready})})}},"client_convenience.js":function(require,exports,module){var DDP=void 0;module.watch(require("./namespace.js"),{DDP:function(v){DDP=v}},0);Meteor.refresh=function(notification){};if(Meteor.isClient){var ddpUrl="/";if(typeof __meteor_runtime_config__!=="undefined"){if(__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL)ddpUrl=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL}var retry=new Retry;var onDDPVersionNegotiationFailure=function(description){Meteor._debug(description);if(Package.reload){var migrationData=Package.reload.Reload._migrationData("livedata")||{};var failures=migrationData.DDPVersionNegotiationFailures||0;++failures;Package.reload.Reload._onMigrate("livedata",function(){return[true,{DDPVersionNegotiationFailures:failures}]});retry.retryLater(failures,function(){Package.reload.Reload._reload()})}};Meteor.connection=DDP.connect(ddpUrl,{onDDPVersionNegotiationFailure:onDDPVersionNegotiationFailure});_.each(["subscribe","methods","call","apply","status","reconnect","disconnect"],function(name){Meteor[name]=_.bind(Meteor.connection[name],Meteor.connection)})}else{Meteor.connection=null}Meteor.default_connection=Meteor.connection;Meteor.connect=DDP.connect},"namespace.js":function(require,exports,module){module.export({DDP:function(){return DDP},LivedataTest:function(){return LivedataTest}});var DDP={};var LivedataTest={}},"id_map.js":function(require,exports,module){var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({MongoIDMap:function(){return MongoIDMap}});var MongoIDMap=function(_IdMap){(0,_inherits3.default)(MongoIDMap,_IdMap);function MongoIDMap(){(0,_classCallCheck3.default)(this,MongoIDMap);return(0,_possibleConstructorReturn3.default)(this,_IdMap.call(this,MongoID.idStringify,MongoID.idParse))}return MongoIDMap}(IdMap)}}}}},{extensions:[".js",".json"]});require("./node_modules/meteor/ddp-client/sockjs-0.3.4.js");require("./node_modules/meteor/ddp-client/stream_client_sockjs.js");require("./node_modules/meteor/ddp-client/stream_client_common.js");require("./node_modules/meteor/ddp-client/livedata_common.js");require("./node_modules/meteor/ddp-client/random_stream.js");require("./node_modules/meteor/ddp-client/livedata_connection.js");require("./node_modules/meteor/ddp-client/client_convenience.js");var exports=require("./node_modules/meteor/ddp-client/namespace.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["ddp-client"]=exports,{DDP:DDP})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var OrderedDict;(function(){var element=function(key,value,next,prev){return{key:key,value:value,next:next,prev:prev}};OrderedDict=function(){var self=this;self._dict={};self._first=null;self._last=null;self._size=0;var args=_.toArray(arguments);self._stringify=function(x){return x};if(typeof args[0]==="function")self._stringify=args.shift();_.each(args,function(kv){self.putBefore(kv[0],kv[1],null)})};_.extend(OrderedDict.prototype,{_k:function(key){return" "+this._stringify(key)},empty:function(){var self=this;return!self._first},size:function(){var self=this;return self._size},_linkEltIn:function(elt){var self=this;if(!elt.next){elt.prev=self._last;if(self._last)self._last.next=elt;self._last=elt}else{elt.prev=elt.next.prev;elt.next.prev=elt;if(elt.prev)elt.prev.next=elt}if(self._first===null||self._first===elt.next)self._first=elt},_linkEltOut:function(elt){var self=this;if(elt.next)elt.next.prev=elt.prev;if(elt.prev)elt.prev.next=elt.next;if(elt===self._last)self._last=elt.prev;if(elt===self._first)self._first=elt.next},putBefore:function(key,item,before){var self=this;if(self._dict[self._k(key)])throw new Error("Item "+key+" already present in OrderedDict");var elt=before?element(key,item,self._dict[self._k(before)]):element(key,item,null);if(elt.next===undefined)throw new Error("could not find item to put this one before");self._linkEltIn(elt);self._dict[self._k(key)]=elt;self._size++},append:function(key,item){var self=this;self.putBefore(key,item,null)},remove:function(key){var self=this;var elt=self._dict[self._k(key)];if(elt===undefined)throw new Error("Item "+key+" not present in OrderedDict");self._linkEltOut(elt);self._size--;delete self._dict[self._k(key)];return elt.value},get:function(key){var self=this;if(self.has(key))return self._dict[self._k(key)].value;return undefined},has:function(key){var self=this;return _.has(self._dict,self._k(key))},forEach:function(iter){var self=this;var i=0;var elt=self._first;while(elt!==null){var b=iter(elt.value,elt.key,i);if(b===OrderedDict.BREAK)return;elt=elt.next;i++}},first:function(){var self=this;if(self.empty())return undefined;return self._first.key},firstValue:function(){var self=this;if(self.empty())return undefined;return self._first.value},last:function(){var self=this;if(self.empty())return undefined;return self._last.key},lastValue:function(){var self=this;if(self.empty())return undefined;return self._last.value},prev:function(key){var self=this;if(self.has(key)){var elt=self._dict[self._k(key)];if(elt.prev)return elt.prev.key}return null},next:function(key){var self=this;if(self.has(key)){var elt=self._dict[self._k(key)];if(elt.next)return elt.next.key}return null},moveBefore:function(key,before){var self=this;var elt=self._dict[self._k(key)];var eltBefore=before?self._dict[self._k(before)]:null;if(elt===undefined)throw new Error("Item to move is not present");if(eltBefore===undefined){throw new Error("Could not find element to move this one before")}if(eltBefore===elt.next)return;self._linkEltOut(elt);elt.next=eltBefore;self._linkEltIn(elt)},indexOf:function(key){var self=this;var ret=null;self.forEach(function(v,k,i){if(self._k(k)===self._k(key)){ret=i;return OrderedDict.BREAK}return undefined});return ret},_checkRep:function(){var self=this;_.each(self._dict,function(k,v){if(v.next===v)throw new Error("Next is a loop");if(v.prev===v)throw new Error("Prev is a loop")})}});OrderedDict.BREAK={break:true}}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["ordered-dict"]={},{OrderedDict:OrderedDict})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var meteorInstall=Package.modules.meteorInstall;var GeoJSON;var require=meteorInstall({node_modules:{meteor:{"geojson-utils":{"main.js":function(require,exports){exports.GeoJSON=require("./geojson-utils.js")},"geojson-utils.js":function(require,exports,module){(function(){var gju={};if(typeof module!=="undefined"&&module.exports){module.exports=gju}gju.lineStringsIntersect=function(l1,l2){var intersects=[];for(var i=0;i<=l1.coordinates.length-2;++i){for(var j=0;j<=l2.coordinates.length-2;++j){var a1={x:l1.coordinates[i][1],y:l1.coordinates[i][0]},a2={x:l1.coordinates[i+1][1],y:l1.coordinates[i+1][0]},b1={x:l2.coordinates[j][1],y:l2.coordinates[j][0]},b2={x:l2.coordinates[j+1][1],y:l2.coordinates[j+1][0]},ua_t=(b2.x-b1.x)*(a1.y-b1.y)-(b2.y-b1.y)*(a1.x-b1.x),ub_t=(a2.x-a1.x)*(a1.y-b1.y)-(a2.y-a1.y)*(a1.x-b1.x),u_b=(b2.y-b1.y)*(a2.x-a1.x)-(b2.x-b1.x)*(a2.y-a1.y);if(u_b!=0){var ua=ua_t/u_b,ub=ub_t/u_b;if(0<=ua&&ua<=1&&0<=ub&&ub<=1){intersects.push({type:"Point",coordinates:[a1.x+ua*(a2.x-a1.x),a1.y+ua*(a2.y-a1.y)]})}}}}if(intersects.length==0)intersects=false;return intersects};function boundingBoxAroundPolyCoords(coords){var xAll=[],yAll=[];for(var i=0;i<coords[0].length;i++){xAll.push(coords[0][i][1]);yAll.push(coords[0][i][0])}xAll=xAll.sort(function(a,b){return a-b});yAll=yAll.sort(function(a,b){return a-b});return[[xAll[0],yAll[0]],[xAll[xAll.length-1],yAll[yAll.length-1]]]}gju.pointInBoundingBox=function(point,bounds){return!(point.coordinates[1]<bounds[0][0]||point.coordinates[1]>bounds[1][0]||point.coordinates[0]<bounds[0][1]||point.coordinates[0]>bounds[1][1])};function pnpoly(x,y,coords){var vert=[[0,0]];for(var i=0;i<coords.length;i++){for(var j=0;j<coords[i].length;j++){vert.push(coords[i][j])}vert.push([0,0])}var inside=false;for(var i=0,j=vert.length-1;i<vert.length;j=i++){if(vert[i][0]>y!=vert[j][0]>y&&x<(vert[j][1]-vert[i][1])*(y-vert[i][0])/(vert[j][0]-vert[i][0])+vert[i][1])inside=!inside}return inside}gju.pointInPolygon=function(p,poly){var coords=poly.type=="Polygon"?[poly.coordinates]:poly.coordinates;var insideBox=false;for(var i=0;i<coords.length;i++){if(gju.pointInBoundingBox(p,boundingBoxAroundPolyCoords(coords[i])))insideBox=true}if(!insideBox)return false;var insidePoly=false;for(var i=0;i<coords.length;i++){if(pnpoly(p.coordinates[1],p.coordinates[0],coords[i]))insidePoly=true}return insidePoly};gju.numberToRadius=function(number){return number*Math.PI/180};gju.numberToDegree=function(number){return number*180/Math.PI};gju.drawCircle=function(radiusInMeters,centerPoint,steps){var center=[centerPoint.coordinates[1],centerPoint.coordinates[0]],dist=radiusInMeters/1e3/6371,radCenter=[gju.numberToRadius(center[0]),gju.numberToRadius(center[1])],steps=steps||15,poly=[[center[0],center[1]]];for(var i=0;i<steps;i++){var brng=2*Math.PI*i/steps;var lat=Math.asin(Math.sin(radCenter[0])*Math.cos(dist)+Math.cos(radCenter[0])*Math.sin(dist)*Math.cos(brng));var lng=radCenter[1]+Math.atan2(Math.sin(brng)*Math.sin(dist)*Math.cos(radCenter[0]),Math.cos(dist)-Math.sin(radCenter[0])*Math.sin(lat));poly[i]=[];poly[i][1]=gju.numberToDegree(lat);poly[i][0]=gju.numberToDegree(lng)}return{type:"Polygon",coordinates:[poly]}};gju.rectangleCentroid=function(rectangle){var bbox=rectangle.coordinates[0];var xmin=bbox[0][0],ymin=bbox[0][1],xmax=bbox[2][0],ymax=bbox[2][1];var xwidth=xmax-xmin;var ywidth=ymax-ymin;return{type:"Point",coordinates:[xmin+xwidth/2,ymin+ywidth/2]}};gju.pointDistance=function(pt1,pt2){var lon1=pt1.coordinates[0],lat1=pt1.coordinates[1],lon2=pt2.coordinates[0],lat2=pt2.coordinates[1],dLat=gju.numberToRadius(lat2-lat1),dLon=gju.numberToRadius(lon2-lon1),a=Math.pow(Math.sin(dLat/2),2)+Math.cos(gju.numberToRadius(lat1))*Math.cos(gju.numberToRadius(lat2))*Math.pow(Math.sin(dLon/2),2),c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return 6371*c*1e3},gju.geometryWithinRadius=function(geometry,center,radius){if(geometry.type=="Point"){return gju.pointDistance(geometry,center)<=radius}else if(geometry.type=="LineString"||geometry.type=="Polygon"){var point={};var coordinates;if(geometry.type=="Polygon"){coordinates=geometry.coordinates[0]}else{coordinates=geometry.coordinates}for(var i in coordinates){point.coordinates=coordinates[i];if(gju.pointDistance(point,center)>radius){return false}}}return true};gju.area=function(polygon){var area=0;var points=polygon.coordinates[0];var j=points.length-1;var p1,p2;for(var i=0;i<points.length;j=i++){var p1={x:points[i][1],y:points[i][0]};var p2={x:points[j][1],y:points[j][0]};area+=p1.x*p2.y;area-=p1.y*p2.x}area/=2;return area},gju.centroid=function(polygon){var f,x=0,y=0;var points=polygon.coordinates[0];var j=points.length-1;var p1,p2;for(var i=0;i<points.length;j=i++){var p1={x:points[i][1],y:points[i][0]};var p2={x:points[j][1],y:points[j][0]};f=p1.x*p2.y-p2.x*p1.y;x+=(p1.x+p2.x)*f;y+=(p1.y+p2.y)*f}f=gju.area(polygon)*6;return{type:"Point",coordinates:[y/f,x/f]}},gju.simplify=function(source,kink){kink=kink||20;source=source.map(function(o){return{lng:o.coordinates[0],lat:o.coordinates[1]}});var n_source,n_stack,n_dest,start,end,i,sig;var dev_sqr,max_dev_sqr,band_sqr;var x12,y12,d12,x13,y13,d13,x23,y23,d23;var F=Math.PI/180*.5;var index=new Array;var sig_start=new Array;var sig_end=new Array;if(source.length<3)return source;n_source=source.length;band_sqr=kink*360/(2*Math.PI*6378137);band_sqr*=band_sqr;n_dest=0;sig_start[0]=0;sig_end[0]=n_source-1;n_stack=1;while(n_stack>0){start=sig_start[n_stack-1];end=sig_end[n_stack-1];n_stack--;if(end-start>1){x12=source[end].lng()-source[start].lng();y12=source[end].lat()-source[start].lat();if(Math.abs(x12)>180)x12=360-Math.abs(x12);x12*=Math.cos(F*(source[end].lat()+source[start].lat()));d12=x12*x12+y12*y12;for(i=start+1,sig=start,max_dev_sqr=-1;i<end;i++){x13=source[i].lng()-source[start].lng();y13=source[i].lat()-source[start].lat();if(Math.abs(x13)>180)x13=360-Math.abs(x13);x13*=Math.cos(F*(source[i].lat()+source[start].lat()));d13=x13*x13+y13*y13;x23=source[i].lng()-source[end].lng();y23=source[i].lat()-source[end].lat();if(Math.abs(x23)>180)x23=360-Math.abs(x23);x23*=Math.cos(F*(source[i].lat()+source[end].lat()));d23=x23*x23+y23*y23;if(d13>=d12+d23)dev_sqr=d23;else if(d23>=d12+d13)dev_sqr=d13;else dev_sqr=(x13*y12-y13*x12)*(x13*y12-y13*x12)/d12;if(dev_sqr>max_dev_sqr){sig=i;max_dev_sqr=dev_sqr}}if(max_dev_sqr<band_sqr){index[n_dest]=start;n_dest++}else{n_stack++;sig_start[n_stack-1]=sig;sig_end[n_stack-1]=end;n_stack++;sig_start[n_stack-1]=start;sig_end[n_stack-1]=sig}}else{index[n_dest]=start;n_dest++}}index[n_dest]=n_source-1;n_dest++;var r=new Array;for(var i=0;i<n_dest;i++)r.push(source[index[i]]);return r.map(function(o){return{type:"Point",coordinates:[o.lng,o.lat]}})};gju.destinationPoint=function(pt,brng,dist){dist=dist/6371;brng=gju.numberToRadius(brng);var lat1=gju.numberToRadius(pt.coordinates[0]);var lon1=gju.numberToRadius(pt.coordinates[1]);var lat2=Math.asin(Math.sin(lat1)*Math.cos(dist)+Math.cos(lat1)*Math.sin(dist)*Math.cos(brng));var lon2=lon1+Math.atan2(Math.sin(brng)*Math.sin(dist)*Math.cos(lat1),Math.cos(dist)-Math.sin(lat1)*Math.sin(lat2));lon2=(lon2+3*Math.PI)%(2*Math.PI)-Math.PI;return{type:"Point",coordinates:[gju.numberToDegree(lat2),gju.numberToDegree(lon2)]}}})()}}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/geojson-utils/main.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["geojson-utils"]=exports,{GeoJSON:GeoJSON})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var DiffSequence=Package["diff-sequence"].DiffSequence;var EJSON=Package.ejson.EJSON;var GeoJSON=Package["geojson-utils"].GeoJSON;var IdMap=Package["id-map"].IdMap;var MongoID=Package["mongo-id"].MongoID;var OrderedDict=Package["ordered-dict"].OrderedDict;var Random=Package.random.Random;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var meteorInstall=Package.modules.meteorInstall;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Symbol=Package["ecmascript-runtime-client"].Symbol;var Map=Package["ecmascript-runtime-client"].Map;var Set=Package["ecmascript-runtime-client"].Set;var MinimongoTest,MinimongoError,LocalCollection,Minimongo;var require=meteorInstall({node_modules:{meteor:{minimongo:{"minimongo_client.js":function(require,exports,module){module.watch(require("./minimongo_common.js"))},"common.js":function(require,exports,module){var _toConsumableArray2=require("babel-runtime/helpers/toConsumableArray");var _toConsumableArray3=_interopRequireDefault(_toConsumableArray2);var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({hasOwn:function(){return hasOwn},ELEMENT_OPERATORS:function(){return ELEMENT_OPERATORS},compileDocumentSelector:function(){return compileDocumentSelector},equalityElementMatcher:function(){return equalityElementMatcher},expandArraysInBranches:function(){return expandArraysInBranches},isIndexable:function(){return isIndexable},isNumericKey:function(){return isNumericKey},isOperatorObject:function(){return isOperatorObject},makeLookupFunction:function(){return makeLookupFunction},nothingMatcher:function(){return nothingMatcher},pathsToTree:function(){return pathsToTree},populateDocumentWithQueryFields:function(){return populateDocumentWithQueryFields},projectionDetails:function(){return projectionDetails},regexpElementMatcher:function(){return regexpElementMatcher}});var LocalCollection=void 0;module.watch(require("./local_collection.js"),{default:function(v){LocalCollection=v}},0);var hasOwn=Object.prototype.hasOwnProperty;var ELEMENT_OPERATORS={$lt:makeInequality(function(cmpValue){return cmpValue<0}),$gt:makeInequality(function(cmpValue){return cmpValue>0}),$lte:makeInequality(function(cmpValue){return cmpValue<=0}),$gte:makeInequality(function(cmpValue){return cmpValue>=0}),$mod:{compileElementSelector:function(operand){if(!(Array.isArray(operand)&&operand.length===2&&typeof operand[0]==="number"&&typeof operand[1]==="number")){throw Error("argument to $mod must be an array of two numbers")}var divisor=operand[0];var remainder=operand[1];return function(value){return typeof value==="number"&&value%divisor===remainder}}},$in:{compileElementSelector:function(operand){if(!Array.isArray(operand)){throw Error("$in needs an array")}var elementMatchers=operand.map(function(option){if(option instanceof RegExp){return regexpElementMatcher(option)}if(isOperatorObject(option)){throw Error("cannot nest $ under $in")}return equalityElementMatcher(option)});return function(value){if(value===undefined){value=null}return elementMatchers.some(function(matcher){return matcher(value)})}}},$size:{dontExpandLeafArrays:true,compileElementSelector:function(operand){if(typeof operand==="string"){operand=0}else if(typeof operand!=="number"){throw Error("$size needs a number")}return function(value){return Array.isArray(value)&&value.length===operand}}},$type:{dontIncludeLeafArrays:true,compileElementSelector:function(operand){if(typeof operand!=="number"){throw Error("$type needs a number")}return function(value){return value!==undefined&&LocalCollection._f._type(value)===operand}}},$bitsAllSet:{compileElementSelector:function(operand){var mask=getOperandBitmask(operand,"$bitsAllSet");return function(value){var bitmask=getValueBitmask(value,mask.length);return bitmask&&mask.every(function(byte,i){return(bitmask[i]&byte)===byte})}}},$bitsAnySet:{compileElementSelector:function(operand){var mask=getOperandBitmask(operand,"$bitsAnySet");return function(value){var bitmask=getValueBitmask(value,mask.length);return bitmask&&mask.some(function(byte,i){return(~bitmask[i]&byte)!==byte})}}},$bitsAllClear:{compileElementSelector:function(operand){var mask=getOperandBitmask(operand,"$bitsAllClear");return function(value){var bitmask=getValueBitmask(value,mask.length);return bitmask&&mask.every(function(byte,i){return!(bitmask[i]&byte)})}}},$bitsAnyClear:{compileElementSelector:function(operand){var mask=getOperandBitmask(operand,"$bitsAnyClear");return function(value){var bitmask=getValueBitmask(value,mask.length);return bitmask&&mask.some(function(byte,i){return(bitmask[i]&byte)!==byte})}}},$regex:{compileElementSelector:function(operand,valueSelector){if(!(typeof operand==="string"||operand instanceof RegExp)){throw Error("$regex has to be a string or RegExp")}var regexp=void 0;if(valueSelector.$options!==undefined){if(/[^gim]/.test(valueSelector.$options)){throw new Error("Only the i, m, and g regexp options are supported")}var source=operand instanceof RegExp?operand.source:operand;regexp=new RegExp(source,valueSelector.$options)}else if(operand instanceof RegExp){regexp=operand}else{regexp=new RegExp(operand)}return regexpElementMatcher(regexp)}},$elemMatch:{dontExpandLeafArrays:true,compileElementSelector:function(operand,valueSelector,matcher){if(!LocalCollection._isPlainObject(operand)){throw Error("$elemMatch need an object")}var isDocMatcher=!isOperatorObject(Object.keys(operand).filter(function(key){return!hasOwn.call(LOGICAL_OPERATORS,key)}).reduce(function(a,b){var _Object$assign;return Object.assign(a,(_Object$assign={},_Object$assign[b]=operand[b],_Object$assign))},{}),true);var subMatcher=void 0;if(isDocMatcher){subMatcher=compileDocumentSelector(operand,matcher,{inElemMatch:true})}else{subMatcher=compileValueSelector(operand,matcher)}return function(value){if(!Array.isArray(value)){return false}for(var i=0;i<value.length;++i){var arrayElement=value[i];var arg=void 0;if(isDocMatcher){if(!isIndexable(arrayElement)){return false}arg=arrayElement}else{arg=[{value:arrayElement,dontIterate:true}]}if(subMatcher(arg).result){return i}}return false}}}};var LOGICAL_OPERATORS={$and:function(subSelector,matcher,inElemMatch){return andDocumentMatchers(compileArrayOfDocumentSelectors(subSelector,matcher,inElemMatch))},$or:function(subSelector,matcher,inElemMatch){var matchers=compileArrayOfDocumentSelectors(subSelector,matcher,inElemMatch);if(matchers.length===1){return matchers[0]}return function(doc){var result=matchers.some(function(fn){return fn(doc).result});return{result:result}}},$nor:function(subSelector,matcher,inElemMatch){var matchers=compileArrayOfDocumentSelectors(subSelector,matcher,inElemMatch);return function(doc){var result=matchers.every(function(fn){return!fn(doc).result});return{result:result}}},$where:function(selectorValue,matcher){matcher._recordPathUsed("");matcher._hasWhere=true;if(!(selectorValue instanceof Function)){selectorValue=Function("obj","return "+selectorValue)}return function(doc){return{result:selectorValue.call(doc,doc)}}},$comment:function(){return function(){return{result:true}}}};var VALUE_OPERATORS={$eq:function(operand){return convertElementMatcherToBranchedMatcher(equalityElementMatcher(operand))},$not:function(operand,valueSelector,matcher){return invertBranchedMatcher(compileValueSelector(operand,matcher))},$ne:function(operand){return invertBranchedMatcher(convertElementMatcherToBranchedMatcher(equalityElementMatcher(operand)))},$nin:function(operand){return invertBranchedMatcher(convertElementMatcherToBranchedMatcher(ELEMENT_OPERATORS.$in.compileElementSelector(operand)))},$exists:function(operand){var exists=convertElementMatcherToBranchedMatcher(function(value){return value!==undefined});return operand?exists:invertBranchedMatcher(exists)},$options:function(operand,valueSelector){if(!hasOwn.call(valueSelector,"$regex")){throw Error("$options needs a $regex")}return everythingMatcher},$maxDistance:function(operand,valueSelector){if(!valueSelector.$near){throw Error("$maxDistance needs a $near")}return everythingMatcher},$all:function(operand,valueSelector,matcher){if(!Array.isArray(operand)){throw Error("$all requires array")}if(operand.length===0){return nothingMatcher}var branchedMatchers=operand.map(function(criterion){if(isOperatorObject(criterion)){throw Error("no $ expressions in $all")}return compileValueSelector(criterion,matcher)});return andBranchedMatchers(branchedMatchers)},$near:function(operand,valueSelector,matcher,isRoot){if(!isRoot){throw Error("$near can't be inside another $ operator")}matcher._hasGeoQuery=true;var maxDistance=void 0,point=void 0,distance=void 0;if(LocalCollection._isPlainObject(operand)&&hasOwn.call(operand,"$geometry")){maxDistance=operand.$maxDistance;point=operand.$geometry;distance=function(value){if(!value){return null}if(!value.type){return GeoJSON.pointDistance(point,{type:"Point",coordinates:pointToArray(value)})}if(value.type==="Point"){return GeoJSON.pointDistance(point,value)}return GeoJSON.geometryWithinRadius(value,point,maxDistance)?0:maxDistance+1}}else{maxDistance=valueSelector.$maxDistance;if(!isIndexable(operand)){throw Error("$near argument must be coordinate pair or GeoJSON")}point=pointToArray(operand);distance=function(value){if(!isIndexable(value)){return null}return distanceCoordinatePairs(point,value)}}return function(branchedValues){var result={result:false};expandArraysInBranches(branchedValues).every(function(branch){var curDistance=void 0;if(!matcher._isUpdate){if(!((0,_typeof3.default)(branch.value)==="object")){return true}curDistance=distance(branch.value);if(curDistance===null||curDistance>maxDistance){return true}if(result.distance!==undefined&&result.distance<=curDistance){return true}}result.result=true;result.distance=curDistance;if(branch.arrayIndices){result.arrayIndices=branch.arrayIndices}else{delete result.arrayIndices}return!matcher._isUpdate});return result}}};function andSomeMatchers(subMatchers){if(subMatchers.length===0){return everythingMatcher}if(subMatchers.length===1){return subMatchers[0]}return function(docOrBranches){var match={};match.result=subMatchers.every(function(fn){var subResult=fn(docOrBranches);if(subResult.result&&subResult.distance!==undefined&&match.distance===undefined){match.distance=subResult.distance}if(subResult.result&&subResult.arrayIndices){match.arrayIndices=subResult.arrayIndices}return subResult.result});if(!match.result){delete match.distance;delete match.arrayIndices}return match}}var andDocumentMatchers=andSomeMatchers;var andBranchedMatchers=andSomeMatchers;function compileArrayOfDocumentSelectors(selectors,matcher,inElemMatch){if(!Array.isArray(selectors)||selectors.length===0){throw Error("$and/$or/$nor must be nonempty array")}return selectors.map(function(subSelector){if(!LocalCollection._isPlainObject(subSelector)){throw Error("$or/$and/$nor entries need to be full objects")}return compileDocumentSelector(subSelector,matcher,{inElemMatch:inElemMatch})})}function compileDocumentSelector(docSelector,matcher){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var docMatchers=Object.keys(docSelector).map(function(key){var subSelector=docSelector[key];if(key.substr(0,1)==="$"){if(!hasOwn.call(LOGICAL_OPERATORS,key)){throw new Error("Unrecognized logical operator: "+key)}matcher._isSimple=false;return LOGICAL_OPERATORS[key](subSelector,matcher,options.inElemMatch)}if(!options.inElemMatch){matcher._recordPathUsed(key)}if(typeof subSelector==="function"){return undefined}var lookUpByIndex=makeLookupFunction(key);var valueMatcher=compileValueSelector(subSelector,matcher,options.isRoot);return function(doc){return valueMatcher(lookUpByIndex(doc))}}).filter(Boolean);return andDocumentMatchers(docMatchers)}function compileValueSelector(valueSelector,matcher,isRoot){if(valueSelector instanceof RegExp){matcher._isSimple=false;return convertElementMatcherToBranchedMatcher(regexpElementMatcher(valueSelector))}if(isOperatorObject(valueSelector)){return operatorBranchedMatcher(valueSelector,matcher,isRoot)}return convertElementMatcherToBranchedMatcher(equalityElementMatcher(valueSelector))}function convertElementMatcherToBranchedMatcher(elementMatcher){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return function(branches){var expanded=options.dontExpandLeafArrays?branches:expandArraysInBranches(branches,options.dontIncludeLeafArrays);var match={};match.result=expanded.some(function(element){var matched=elementMatcher(element.value);if(typeof matched==="number"){if(!element.arrayIndices){element.arrayIndices=[matched]}matched=true}if(matched&&element.arrayIndices){match.arrayIndices=element.arrayIndices}return matched});return match}}function distanceCoordinatePairs(a,b){var pointA=pointToArray(a);var pointB=pointToArray(b);return Math.hypot(pointA[0]-pointB[0],pointA[1]-pointB[1])}function equalityElementMatcher(elementSelector){if(isOperatorObject(elementSelector)){throw Error("Can't create equalityValueSelector for operator object")}if(elementSelector==null){return function(value){return value==null}}return function(value){return LocalCollection._f._equal(elementSelector,value)}}function everythingMatcher(docOrBranchedValues){return{result:true}}function expandArraysInBranches(branches,skipTheArrays){var branchesOut=[];branches.forEach(function(branch){var thisIsArray=Array.isArray(branch.value);if(!(skipTheArrays&&thisIsArray&&!branch.dontIterate)){branchesOut.push({arrayIndices:branch.arrayIndices,value:branch.value})}if(thisIsArray&&!branch.dontIterate){branch.value.forEach(function(value,i){branchesOut.push({arrayIndices:(branch.arrayIndices||[]).concat(i),value:value})})}});return branchesOut}function getOperandBitmask(operand,selector){if(Number.isInteger(operand)&&operand>=0){return new Uint8Array(new Int32Array([operand]).buffer)}if(EJSON.isBinary(operand)){return new Uint8Array(operand.buffer)}if(Array.isArray(operand)&&operand.every(function(x){return Number.isInteger(x)&&x>=0})){var buffer=new ArrayBuffer((Math.max.apply(Math,(0,_toConsumableArray3.default)(operand))>>3)+1);var view=new Uint8Array(buffer);operand.forEach(function(x){view[x>>3]|=1<<(x&7)});return view}throw Error("operand to "+selector+" must be a numeric bitmask (representable as a "+"non-negative 32-bit signed integer), a bindata bitmask or an array with "+"bit positions (non-negative integers)")}function getValueBitmask(value,length){if(Number.isSafeInteger(value)){var buffer=new ArrayBuffer(Math.max(length,2*Uint32Array.BYTES_PER_ELEMENT));var view=new Uint32Array(buffer,0,2);view[0]=value%((1<<16)*(1<<16))|0;view[1]=value/((1<<16)*(1<<16))|0;if(value<0){view=new Uint8Array(buffer,2);view.forEach(function(byte,i){view[i]=255})}return new Uint8Array(buffer)}if(EJSON.isBinary(value)){return new Uint8Array(value.buffer)}return false}function insertIntoDocument(document,key,value){Object.keys(document).forEach(function(existingKey){if(existingKey.length>key.length&&existingKey.indexOf(key+".")===0||key.length>existingKey.length&&key.indexOf(existingKey+".")===0){throw new Error("cannot infer query fields to set, both paths '"+existingKey+"' and "+("'"+key+"' are matched"))}else if(existingKey===key){throw new Error("cannot infer query fields to set, path '"+key+"' is matched twice")}});document[key]=value}function invertBranchedMatcher(branchedMatcher){return function(branchValues){return{result:!branchedMatcher(branchValues).result}}}function isIndexable(obj){return Array.isArray(obj)||LocalCollection._isPlainObject(obj)}function isNumericKey(s){return/^[0-9]+$/.test(s)}function isOperatorObject(valueSelector,inconsistentOK){if(!LocalCollection._isPlainObject(valueSelector)){return false}var theseAreOperators=undefined;Object.keys(valueSelector).forEach(function(selKey){var thisIsOperator=selKey.substr(0,1)==="$";if(theseAreOperators===undefined){theseAreOperators=thisIsOperator}else if(theseAreOperators!==thisIsOperator){if(!inconsistentOK){throw new Error("Inconsistent operator: "+JSON.stringify(valueSelector))}theseAreOperators=false}});return!!theseAreOperators}function makeInequality(cmpValueComparator){return{compileElementSelector:function(operand){if(Array.isArray(operand)){return function(){return false}}if(operand===undefined){operand=null}var operandType=LocalCollection._f._type(operand);return function(value){if(value===undefined){value=null}if(LocalCollection._f._type(value)!==operandType){return false}return cmpValueComparator(LocalCollection._f._cmp(value,operand))}}}}function makeLookupFunction(key){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var parts=key.split(".");var firstPart=parts.length?parts[0]:"";var lookupRest=parts.length>1&&makeLookupFunction(parts.slice(1).join("."));var omitUnnecessaryFields=function(result){if(!result.dontIterate){delete result.dontIterate}if(result.arrayIndices&&!result.arrayIndices.length){delete result.arrayIndices}return result};return function(doc){var arrayIndices=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(Array.isArray(doc)){if(!(isNumericKey(firstPart)&&firstPart<doc.length)){return[]}arrayIndices=arrayIndices.concat(+firstPart,"x")}var firstLevel=doc[firstPart];if(!lookupRest){return[omitUnnecessaryFields({arrayIndices:arrayIndices,dontIterate:Array.isArray(doc)&&Array.isArray(firstLevel),value:firstLevel})]}if(!isIndexable(firstLevel)){if(Array.isArray(doc)){return[]}return[omitUnnecessaryFields({arrayIndices:arrayIndices,value:undefined})]}var result=[];var appendToResult=function(more){result.push.apply(result,(0,_toConsumableArray3.default)(more))};appendToResult(lookupRest(firstLevel,arrayIndices));if(Array.isArray(firstLevel)&&!(isNumericKey(parts[1])&&options.forSort)){firstLevel.forEach(function(branch,arrayIndex){if(LocalCollection._isPlainObject(branch)){appendToResult(lookupRest(branch,arrayIndices.concat(arrayIndex)))}})}return result}}MinimongoTest={makeLookupFunction:makeLookupFunction};MinimongoError=function(message){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(typeof message==="string"&&options.field){message+=" for field '"+options.field+"'"}var error=new Error(message);error.name="MinimongoError";return error};function nothingMatcher(docOrBranchedValues){return{result:false}}function operatorBranchedMatcher(valueSelector,matcher,isRoot){var operatorMatchers=Object.keys(valueSelector).map(function(operator){var operand=valueSelector[operator];var simpleRange=["$lt","$lte","$gt","$gte"].includes(operator)&&typeof operand==="number";var simpleEquality=["$ne","$eq"].includes(operator)&&operand!==Object(operand);var simpleInclusion=["$in","$nin"].includes(operator)&&Array.isArray(operand)&&!operand.some(function(x){return x===Object(x)});if(!(simpleRange||simpleInclusion||simpleEquality)){matcher._isSimple=false}if(hasOwn.call(VALUE_OPERATORS,operator)){return VALUE_OPERATORS[operator](operand,valueSelector,matcher,isRoot)}if(hasOwn.call(ELEMENT_OPERATORS,operator)){var options=ELEMENT_OPERATORS[operator];return convertElementMatcherToBranchedMatcher(options.compileElementSelector(operand,valueSelector,matcher),options)}throw new Error("Unrecognized operator: "+operator)});return andBranchedMatchers(operatorMatchers)}function pathsToTree(paths,newLeafFn,conflictFn){var root=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};paths.forEach(function(path){var pathArray=path.split(".");var tree=root;var success=pathArray.slice(0,-1).every(function(key,i){if(!hasOwn.call(tree,key)){tree[key]={}}else if(tree[key]!==Object(tree[key])){tree[key]=conflictFn(tree[key],pathArray.slice(0,i+1).join("."),path);if(tree[key]!==Object(tree[key])){return false}}tree=tree[key];return true});if(success){var lastKey=pathArray[pathArray.length-1];if(hasOwn.call(tree,lastKey)){tree[lastKey]=conflictFn(tree[lastKey],path,path)}else{tree[lastKey]=newLeafFn(path)}}});return root}function pointToArray(point){return Array.isArray(point)?point.slice():[point.x,point.y]}function populateDocumentWithKeyValue(document,key,value){if(value&&Object.getPrototypeOf(value)===Object.prototype){populateDocumentWithObject(document,key,value)}else if(!(value instanceof RegExp)){insertIntoDocument(document,key,value)}}function populateDocumentWithObject(document,key,value){var keys=Object.keys(value);var unprefixedKeys=keys.filter(function(op){return op[0]!=="$"});if(unprefixedKeys.length>0||!keys.length){if(keys.length!==unprefixedKeys.length){throw new Error("unknown operator: "+unprefixedKeys[0])}validateObject(value,key);insertIntoDocument(document,key,value)}else{Object.keys(value).forEach(function(op){var object=value[op];if(op==="$eq"){populateDocumentWithKeyValue(document,key,object)}else if(op==="$all"){object.forEach(function(element){return populateDocumentWithKeyValue(document,key,element)})}})}}function populateDocumentWithQueryFields(query){var document=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(Object.getPrototypeOf(query)===Object.prototype){Object.keys(query).forEach(function(key){var value=query[key];if(key==="$and"){value.forEach(function(element){return populateDocumentWithQueryFields(element,document)})}else if(key==="$or"){if(value.length===1){populateDocumentWithQueryFields(value[0],document)}}else if(key[0]!=="$"){populateDocumentWithKeyValue(document,key,value)}})}else{if(LocalCollection._selectorIsId(query)){insertIntoDocument(document,"_id",query)}}return document}function projectionDetails(fields){var fieldsKeys=Object.keys(fields).sort();if(!(fieldsKeys.length===1&&fieldsKeys[0]==="_id")&&!(fieldsKeys.includes("_id")&&fields._id)){fieldsKeys=fieldsKeys.filter(function(key){return key!=="_id"})}var including=null;fieldsKeys.forEach(function(keyPath){var rule=!!fields[keyPath];if(including===null){including=rule}if(including!==rule){throw MinimongoError("You cannot currently mix including and excluding fields.")}});var projectionRulesTree=pathsToTree(fieldsKeys,function(path){return including},function(node,path,fullPath){var currentPath=fullPath;var anotherPath=path;throw MinimongoError("both "+currentPath+" and "+anotherPath+" found in fields option, "+"using both of them may trigger unexpected behavior. Did you mean to "+"use only one of them?")});return{including:including,tree:projectionRulesTree}}function regexpElementMatcher(regexp){return function(value){if(value instanceof RegExp){return value.toString()===regexp.toString()}if(typeof value!=="string"){return false}regexp.lastIndex=0;return regexp.test(value)}}function validateKeyInPath(key,path){if(key.includes(".")){throw new Error("The dotted field '"+key+"' in '"+path+"."+key+" is not valid for storage.")}if(key[0]==="$"){throw new Error("The dollar ($) prefixed field  '"+path+"."+key+" is not valid for storage.")}}function validateObject(object,path){if(object&&Object.getPrototypeOf(object)===Object.prototype){Object.keys(object).forEach(function(key){validateKeyInPath(key,path);validateObject(object[key],path+"."+key)})}}},"cursor.js":function(require,exports,module){var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({default:function(){return Cursor}});var LocalCollection=void 0;module.watch(require("./local_collection.js"),{default:function(v){LocalCollection=v}},0);var hasOwn=void 0;module.watch(require("./common.js"),{hasOwn:function(v){hasOwn=v}},1);var Cursor=function(){function Cursor(collection,selector){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};(0,_classCallCheck3.default)(this,Cursor);this.collection=collection;this.sorter=null;this.matcher=new Minimongo.Matcher(selector);if(LocalCollection._selectorIsIdPerhapsAsObject(selector)){this._selectorId=hasOwn.call(selector,"_id")?selector._id:selector}else{this._selectorId=undefined;if(this.matcher.hasGeoQuery()||options.sort){this.sorter=new Minimongo.Sorter(options.sort||[],{matcher:this.matcher})}}this.skip=options.skip||0;this.limit=options.limit;this.fields=options.fields;this._projectionFn=LocalCollection._compileProjection(this.fields||{});this._transform=LocalCollection.wrapTransform(options.transform);if(typeof Tracker!=="undefined"){this.reactive=options.reactive===undefined?true:options.reactive}}Cursor.prototype.count=function(){function count(){if(this.reactive){this._depend({added:true,removed:true},true)}return this._getRawObjects({ordered:true}).length}return count}();Cursor.prototype.fetch=function(){function fetch(){var result=[];this.forEach(function(doc){result.push(doc)});return result}return fetch}();Cursor.prototype[Symbol.iterator]=function(){var _this=this;if(this.reactive){this._depend({addedBefore:true,removed:true,changed:true,movedBefore:true})}var index=0;var objects=this._getRawObjects({ordered:true});return{next:function(){if(index<objects.length){var element=_this._projectionFn(objects[index++]);if(_this._transform)element=_this._transform(element);return{value:element}}return{done:true}}}};Cursor.prototype.forEach=function(){function forEach(callback,thisArg){var _this2=this;if(this.reactive){this._depend({addedBefore:true,removed:true,changed:true,movedBefore:true})}this._getRawObjects({ordered:true}).forEach(function(element,i){element=_this2._projectionFn(element);if(_this2._transform){element=_this2._transform(element)}callback.call(thisArg,element,i,_this2)})}return forEach}();Cursor.prototype.getTransform=function(){function getTransform(){return this._transform}return getTransform}();Cursor.prototype.map=function(){function map(callback,thisArg){var _this3=this;var result=[];this.forEach(function(doc,i){result.push(callback.call(thisArg,doc,i,_this3))});return result}return map}();Cursor.prototype.observe=function(){function observe(options){return LocalCollection._observeFromObserveChanges(this,options)}return observe}();Cursor.prototype.observeChanges=function(){function observeChanges(options){var _this4=this;var ordered=LocalCollection._observeChangesCallbacksAreOrdered(options);if(!options._allow_unordered&&!ordered&&(this.skip||this.limit)){throw new Error("must use ordered observe (ie, 'addedBefore' instead of 'added') "+"with skip or limit")}if(this.fields&&(this.fields._id===0||this.fields._id===false)){throw Error("You may not observe a cursor with {fields: {_id: 0}}")}var distances=this.matcher.hasGeoQuery()&&ordered&&new LocalCollection._IdMap;var query={cursor:this,dirty:false,distances:distances,matcher:this.matcher,ordered:ordered,projectionFn:this._projectionFn,resultsSnapshot:null,sorter:ordered&&this.sorter};var qid=void 0;if(this.reactive){qid=this.collection.next_qid++;this.collection.queries[qid]=query}query.results=this._getRawObjects({ordered:ordered,distances:query.distances});if(this.collection.paused){query.resultsSnapshot=ordered?[]:new LocalCollection._IdMap}var wrapCallback=function(fn){if(!fn){return function(){}}var self=_this4;return function(){var _this5=this;if(self.collection.paused){return}var args=arguments;self.collection._observeQueue.queueTask(function(){fn.apply(_this5,args)})}};query.added=wrapCallback(options.added);query.changed=wrapCallback(options.changed);query.removed=wrapCallback(options.removed);if(ordered){query.addedBefore=wrapCallback(options.addedBefore);query.movedBefore=wrapCallback(options.movedBefore)}if(!options._suppress_initial&&!this.collection.paused){var results=ordered?query.results:query.results._map;Object.keys(results).forEach(function(key){var doc=results[key];var fields=EJSON.clone(doc);delete fields._id;if(ordered){query.addedBefore(doc._id,_this4._projectionFn(fields),null)}query.added(doc._id,_this4._projectionFn(fields))})}var handle=Object.assign(new LocalCollection.ObserveHandle,{collection:this.collection,stop:function(){if(_this4.reactive){delete _this4.collection.queries[qid]}}});if(this.reactive&&Tracker.active){Tracker.onInvalidate(function(){handle.stop()})}this.collection._observeQueue.drain();return handle}return observeChanges}();Cursor.prototype.rewind=function(){function rewind(){}return rewind}();Cursor.prototype._depend=function(){function _depend(changers,_allow_unordered){if(Tracker.active){var dependency=new Tracker.Dependency;var notify=dependency.changed.bind(dependency);dependency.depend();var options={_allow_unordered:_allow_unordered,_suppress_initial:true};["added","addedBefore","changed","movedBefore","removed"].forEach(function(fn){if(changers[fn]){options[fn]=notify}});this.observeChanges(options)}}return _depend}();Cursor.prototype._getCollectionName=function(){function _getCollectionName(){return this.collection.name}return _getCollectionName}();Cursor.prototype._getRawObjects=function(){function _getRawObjects(){var _this6=this;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var results=options.ordered?[]:new LocalCollection._IdMap;if(this._selectorId!==undefined){if(this.skip){return results}var selectedDoc=this.collection._docs.get(this._selectorId);if(selectedDoc){if(options.ordered){results.push(selectedDoc)}else{results.set(this._selectorId,selectedDoc)}}return results}var distances=void 0;if(this.matcher.hasGeoQuery()&&options.ordered){if(options.distances){distances=options.distances;distances.clear()}else{distances=new LocalCollection._IdMap}}this.collection._docs.forEach(function(doc,id){var matchResult=_this6.matcher.documentMatches(doc);if(matchResult.result){if(options.ordered){results.push(doc);if(distances&&matchResult.distance!==undefined){distances.set(id,matchResult.distance)}}else{results.set(id,doc)}}return!_this6.limit||_this6.skip||_this6.sorter||results.length!==_this6.limit});if(!options.ordered){return results}if(this.sorter){results.sort(this.sorter.getComparator({distances:distances}))}if(!this.limit&&!this.skip){return results}return results.slice(this.skip,this.limit?this.limit+this.skip:results.length)}return _getRawObjects}();Cursor.prototype._publishCursor=function(){function _publishCursor(subscription){if(!Package.mongo){throw new Error("Can't publish from Minimongo without the `mongo` package.")}if(!this.collection.name){throw new Error("Can't publish a cursor from a collection without a name.")}return Package.mongo.Mongo.Collection._publishCursor(this,subscription,this.collection.name)}return _publishCursor}();return Cursor}()},"local_collection.js":function(require,exports,module){var _toConsumableArray2=require("babel-runtime/helpers/toConsumableArray");var _toConsumableArray3=_interopRequireDefault(_toConsumableArray2);var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({default:function(){return LocalCollection}});var Cursor=void 0;module.watch(require("./cursor.js"),{default:function(v){Cursor=v}},0);var ObserveHandle=void 0;module.watch(require("./observe_handle.js"),{default:function(v){ObserveHandle=v}},1);var hasOwn=void 0,isIndexable=void 0,isNumericKey=void 0,isOperatorObject=void 0,populateDocumentWithQueryFields=void 0,projectionDetails=void 0;module.watch(require("./common.js"),{hasOwn:function(v){hasOwn=v},isIndexable:function(v){isIndexable=v},isNumericKey:function(v){isNumericKey=v},isOperatorObject:function(v){isOperatorObject=v},populateDocumentWithQueryFields:function(v){populateDocumentWithQueryFields=v},projectionDetails:function(v){projectionDetails=v}},2);var LocalCollection=function(){function LocalCollection(name){(0,_classCallCheck3.default)(this,LocalCollection);this.name=name;this._docs=new LocalCollection._IdMap;this._observeQueue=new Meteor._SynchronousQueue;this.next_qid=1;this.queries=Object.create(null);this._savedOriginals=null;this.paused=false}LocalCollection.prototype.find=function(){function find(selector,options){if(arguments.length===0){selector={}}return new LocalCollection.Cursor(this,selector,options)}return find}();LocalCollection.prototype.findOne=function(){function findOne(selector){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(arguments.length===0){selector={}}options.limit=1;return this.find(selector,options).fetch()[0]}return findOne}();LocalCollection.prototype.insert=function(){function insert(doc,callback){var _this=this;doc=EJSON.clone(doc);assertHasValidFieldNames(doc);if(!hasOwn.call(doc,"_id")){doc._id=LocalCollection._useOID?new MongoID.ObjectID:Random.id()}var id=doc._id;if(this._docs.has(id)){throw MinimongoError("Duplicate _id '"+id+"'")}this._saveOriginal(id,undefined);this._docs.set(id,doc);var queriesToRecompute=[];Object.keys(this.queries).forEach(function(qid){var query=_this.queries[qid];if(query.dirty){return}var matchResult=query.matcher.documentMatches(doc);if(matchResult.result){if(query.distances&&matchResult.distance!==undefined){query.distances.set(id,matchResult.distance)}if(query.cursor.skip||query.cursor.limit){queriesToRecompute.push(qid)}else{LocalCollection._insertInResults(query,doc)}}});queriesToRecompute.forEach(function(qid){if(_this.queries[qid]){_this._recomputeResults(_this.queries[qid])}});this._observeQueue.drain();if(callback){Meteor.defer(function(){callback(null,id)})}return id}return insert}();LocalCollection.prototype.pauseObservers=function(){function pauseObservers(){var _this2=this;if(this.paused){return}this.paused=true;Object.keys(this.queries).forEach(function(qid){var query=_this2.queries[qid];query.resultsSnapshot=EJSON.clone(query.results)})}return pauseObservers}();LocalCollection.prototype.remove=function(){function remove(selector,callback){var _this3=this;if(this.paused&&!this._savedOriginals&&EJSON.equals(selector,{})){var _result=this._docs.size();this._docs.clear();Object.keys(this.queries).forEach(function(qid){var query=_this3.queries[qid];if(query.ordered){query.results=[]}else{query.results.clear()}});if(callback){Meteor.defer(function(){callback(null,_result)})}return _result}var matcher=new Minimongo.Matcher(selector);var remove=[];this._eachPossiblyMatchingDoc(selector,function(doc,id){if(matcher.documentMatches(doc).result){remove.push(id)}});var queriesToRecompute=[];var queryRemove=[];var _loop=function(i){var removeId=remove[i];var removeDoc=_this3._docs.get(removeId);Object.keys(_this3.queries).forEach(function(qid){var query=_this3.queries[qid];if(query.dirty){return}if(query.matcher.documentMatches(removeDoc).result){if(query.cursor.skip||query.cursor.limit){queriesToRecompute.push(qid)}else{queryRemove.push({qid:qid,doc:removeDoc})}}});_this3._saveOriginal(removeId,removeDoc);_this3._docs.remove(removeId)};for(var i=0;i<remove.length;i++){_loop(i)}queryRemove.forEach(function(remove){var query=_this3.queries[remove.qid];if(query){query.distances&&query.distances.remove(remove.doc._id);LocalCollection._removeFromResults(query,remove.doc)}});queriesToRecompute.forEach(function(qid){var query=_this3.queries[qid];if(query){_this3._recomputeResults(query)}});this._observeQueue.drain();var result=remove.length;if(callback){Meteor.defer(function(){callback(null,result)})}return result}return remove}();LocalCollection.prototype.resumeObservers=function(){function resumeObservers(){var _this4=this;if(!this.paused){return}this.paused=false;Object.keys(this.queries).forEach(function(qid){var query=_this4.queries[qid];if(query.dirty){query.dirty=false;_this4._recomputeResults(query,query.resultsSnapshot)}else{LocalCollection._diffQueryChanges(query.ordered,query.resultsSnapshot,query.results,query,{projectionFn:query.projectionFn})}query.resultsSnapshot=null});this._observeQueue.drain()}return resumeObservers}();LocalCollection.prototype.retrieveOriginals=function(){function retrieveOriginals(){if(!this._savedOriginals){throw new Error("Called retrieveOriginals without saveOriginals")}var originals=this._savedOriginals;this._savedOriginals=null;return originals}return retrieveOriginals}();LocalCollection.prototype.saveOriginals=function(){function saveOriginals(){if(this._savedOriginals){throw new Error("Called saveOriginals twice without retrieveOriginals")}this._savedOriginals=new LocalCollection._IdMap}return saveOriginals}();LocalCollection.prototype.update=function(){function update(selector,mod,options,callback){var _this5=this;if(!callback&&options instanceof Function){callback=options;options=null}if(!options){options={}}var matcher=new Minimongo.Matcher(selector,true);var qidToOriginalResults={};var docMap=new LocalCollection._IdMap;var idsMatched=LocalCollection._idsMatchedBySelector(selector);Object.keys(this.queries).forEach(function(qid){var query=_this5.queries[qid];if((query.cursor.skip||query.cursor.limit)&&!_this5.paused){if(query.results instanceof LocalCollection._IdMap){qidToOriginalResults[qid]=query.results.clone();return}if(!(query.results instanceof Array)){throw new Error("Assertion failed: query.results not an array")}var memoizedCloneIfNeeded=function(doc){if(docMap.has(doc._id)){return docMap.get(doc._id)}var docToMemoize=idsMatched&&!idsMatched.some(function(id){return EJSON.equals(id,doc._id)})?doc:EJSON.clone(doc);docMap.set(doc._id,docToMemoize);return docToMemoize};qidToOriginalResults[qid]=query.results.map(memoizedCloneIfNeeded)}});var recomputeQids={};var updateCount=0;this._eachPossiblyMatchingDoc(selector,function(doc,id){var queryResult=matcher.documentMatches(doc);if(queryResult.result){_this5._saveOriginal(id,doc);_this5._modifyAndNotify(doc,mod,recomputeQids,queryResult.arrayIndices);++updateCount;if(!options.multi){return false}}return true});Object.keys(recomputeQids).forEach(function(qid){var query=_this5.queries[qid];if(query){_this5._recomputeResults(query,qidToOriginalResults[qid])}});this._observeQueue.drain();var insertedId=void 0;if(updateCount===0&&options.upsert){var doc=LocalCollection._createUpsertDocument(selector,mod);if(!doc._id&&options.insertedId){doc._id=options.insertedId}insertedId=this.insert(doc);updateCount=1}var result=void 0;if(options._returnObject){result={numberAffected:updateCount};if(insertedId!==undefined){result.insertedId=insertedId}}else{result=updateCount}if(callback){Meteor.defer(function(){callback(null,result)})}return result}return update}();LocalCollection.prototype.upsert=function(){function upsert(selector,mod,options,callback){if(!callback&&typeof options==="function"){callback=options;options={}}return this.update(selector,mod,Object.assign({},options,{upsert:true,_returnObject:true}),callback)}return upsert}();LocalCollection.prototype._eachPossiblyMatchingDoc=function(){function _eachPossiblyMatchingDoc(selector,fn){var _this6=this;var specificIds=LocalCollection._idsMatchedBySelector(selector);if(specificIds){specificIds.some(function(id){var doc=_this6._docs.get(id);if(doc){return fn(doc,id)===false}})}else{this._docs.forEach(fn)}}return _eachPossiblyMatchingDoc}();LocalCollection.prototype._modifyAndNotify=function(){function _modifyAndNotify(doc,mod,recomputeQids,arrayIndices){var _this7=this;var matched_before={};Object.keys(this.queries).forEach(function(qid){var query=_this7.queries[qid];if(query.dirty){return}if(query.ordered){matched_before[qid]=query.matcher.documentMatches(doc).result}else{matched_before[qid]=query.results.has(doc._id)}});var old_doc=EJSON.clone(doc);LocalCollection._modify(doc,mod,{arrayIndices:arrayIndices});Object.keys(this.queries).forEach(function(qid){var query=_this7.queries[qid];if(query.dirty){return}var afterMatch=query.matcher.documentMatches(doc);var after=afterMatch.result;var before=matched_before[qid];if(after&&query.distances&&afterMatch.distance!==undefined){query.distances.set(doc._id,afterMatch.distance)}if(query.cursor.skip||query.cursor.limit){if(before||after){recomputeQids[qid]=true}}else if(before&&!after){LocalCollection._removeFromResults(query,doc)}else if(!before&&after){LocalCollection._insertInResults(query,doc)}else if(before&&after){LocalCollection._updateInResults(query,doc,old_doc)}})}return _modifyAndNotify}();LocalCollection.prototype._recomputeResults=function(){function _recomputeResults(query,oldResults){if(this.paused){query.dirty=true;return}if(!this.paused&&!oldResults){oldResults=query.results}if(query.distances){query.distances.clear()}query.results=query.cursor._getRawObjects({distances:query.distances,ordered:query.ordered});if(!this.paused){LocalCollection._diffQueryChanges(query.ordered,oldResults,query.results,query,{projectionFn:query.projectionFn})}}return _recomputeResults}();LocalCollection.prototype._saveOriginal=function(){function _saveOriginal(id,doc){if(!this._savedOriginals){return}if(this._savedOriginals.has(id)){return}this._savedOriginals.set(id,EJSON.clone(doc))}return _saveOriginal}();return LocalCollection}();LocalCollection.Cursor=Cursor;LocalCollection.ObserveHandle=ObserveHandle;LocalCollection._CachingChangeObserver=function(){function _CachingChangeObserver(){var _this8=this;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};(0,_classCallCheck3.default)(this,_CachingChangeObserver);var orderedFromCallbacks=options.callbacks&&LocalCollection._observeChangesCallbacksAreOrdered(options.callbacks);if(hasOwn.call(options,"ordered")){this.ordered=options.ordered;if(options.callbacks&&options.ordered!==orderedFromCallbacks){throw Error("ordered option doesn't match callbacks")}}else if(options.callbacks){this.ordered=orderedFromCallbacks}else{throw Error("must provide ordered or callbacks")}var callbacks=options.callbacks||{};if(this.ordered){this.docs=new OrderedDict(MongoID.idStringify);this.applyChange={addedBefore:function(id,fields,before){var doc=EJSON.clone(fields);doc._id=id;if(callbacks.addedBefore){callbacks.addedBefore.call(_this8,id,fields,before)}if(callbacks.added){callbacks.added.call(_this8,id,fields)}_this8.docs.putBefore(id,doc,before||null)},movedBefore:function(id,before){var doc=_this8.docs.get(id);if(callbacks.movedBefore){callbacks.movedBefore.call(_this8,id,before)}_this8.docs.moveBefore(id,before||null)}}}else{this.docs=new LocalCollection._IdMap;this.applyChange={added:function(id,fields){var doc=EJSON.clone(fields);if(callbacks.added){callbacks.added.call(_this8,id,fields)}doc._id=id;_this8.docs.set(id,doc)}}}this.applyChange.changed=function(id,fields){var doc=_this8.docs.get(id);if(!doc){throw new Error("Unknown id for changed: "+id)}if(callbacks.changed){callbacks.changed.call(_this8,id,EJSON.clone(fields))}DiffSequence.applyChanges(doc,fields)};this.applyChange.removed=function(id){if(callbacks.removed){callbacks.removed.call(_this8,id)}_this8.docs.remove(id)}}return _CachingChangeObserver}();LocalCollection._IdMap=function(_IdMap2){(0,_inherits3.default)(_IdMap,_IdMap2);function _IdMap(){(0,_classCallCheck3.default)(this,_IdMap);return(0,_possibleConstructorReturn3.default)(this,_IdMap2.call(this,MongoID.idStringify,MongoID.idParse))}return _IdMap}(IdMap);LocalCollection.wrapTransform=function(transform){if(!transform){return null}if(transform.__wrappedTransform__){return transform}var wrapped=function(doc){if(!hasOwn.call(doc,"_id")){throw new Error("can only transform documents with _id")}var id=doc._id;var transformed=Tracker.nonreactive(function(){return transform(doc)});if(!LocalCollection._isPlainObject(transformed)){throw new Error("transform must return object")}if(hasOwn.call(transformed,"_id")){if(!EJSON.equals(transformed._id,id)){throw new Error("transformed document can't have different _id")}}else{transformed._id=id}return transformed};wrapped.__wrappedTransform__=true;return wrapped};LocalCollection._binarySearch=function(cmp,array,value){var first=0;var range=array.length;while(range>0){var halfRange=Math.floor(range/2);if(cmp(value,array[first+halfRange])>=0){first+=halfRange+1;range-=halfRange+1}else{range=halfRange}}return first};LocalCollection._checkSupportedProjection=function(fields){if(fields!==Object(fields)||Array.isArray(fields)){throw MinimongoError("fields option must be an object")}Object.keys(fields).forEach(function(keyPath){if(keyPath.split(".").includes("$")){throw MinimongoError("Minimongo doesn't support $ operator in projections yet.")}var value=fields[keyPath];if((typeof value==="undefined"?"undefined":(0,_typeof3.default)(value))==="object"&&["$elemMatch","$meta","$slice"].some(function(key){return hasOwn.call(value,key)})){throw MinimongoError("Minimongo doesn't support operators in projections yet.")}if(![1,0,true,false].includes(value)){throw MinimongoError("Projection values should be one of 1, 0, true, or false")}})};LocalCollection._compileProjection=function(fields){LocalCollection._checkSupportedProjection(fields);var _idProjection=fields._id===undefined?true:fields._id;var details=projectionDetails(fields);var transform=function(doc,ruleTree){if(Array.isArray(doc)){return doc.map(function(subdoc){return transform(subdoc,ruleTree)})}var result=details.including?{}:EJSON.clone(doc);Object.keys(ruleTree).forEach(function(key){if(!hasOwn.call(doc,key)){return}var rule=ruleTree[key];if(rule===Object(rule)){if(doc[key]===Object(doc[key])){result[key]=transform(doc[key],rule)}}else if(details.including){result[key]=EJSON.clone(doc[key])}else{delete result[key]}});return result};return function(doc){var result=transform(doc,details.tree);if(_idProjection&&hasOwn.call(doc,"_id")){result._id=doc._id}if(!_idProjection&&hasOwn.call(result,"_id")){delete result._id}return result}};LocalCollection._createUpsertDocument=function(selector,modifier){var selectorDocument=populateDocumentWithQueryFields(selector);var isModify=LocalCollection._isModificationMod(modifier);var newDoc={};if(selectorDocument._id){newDoc._id=selectorDocument._id;delete selectorDocument._id}LocalCollection._modify(newDoc,{$set:selectorDocument});LocalCollection._modify(newDoc,modifier,{isInsert:true});if(isModify){return newDoc}var replacement=Object.assign({},modifier);if(newDoc._id){replacement._id=newDoc._id}return replacement};LocalCollection._diffObjects=function(left,right,callbacks){return DiffSequence.diffObjects(left,right,callbacks)};LocalCollection._diffQueryChanges=function(ordered,oldResults,newResults,observer,options){return DiffSequence.diffQueryChanges(ordered,oldResults,newResults,observer,options)};LocalCollection._diffQueryOrderedChanges=function(oldResults,newResults,observer,options){return DiffSequence.diffQueryOrderedChanges(oldResults,newResults,observer,options)};LocalCollection._diffQueryUnorderedChanges=function(oldResults,newResults,observer,options){return DiffSequence.diffQueryUnorderedChanges(oldResults,newResults,observer,options)};LocalCollection._findInOrderedResults=function(query,doc){if(!query.ordered){throw new Error("Can't call _findInOrderedResults on unordered query")}for(var i=0;i<query.results.length;i++){if(query.results[i]===doc){return i}}throw Error("object missing from query")};LocalCollection._idsMatchedBySelector=function(selector){if(LocalCollection._selectorIsId(selector)){return[selector]}if(!selector){return null}if(hasOwn.call(selector,"_id")){if(LocalCollection._selectorIsId(selector._id)){return[selector._id]}if(selector._id&&Array.isArray(selector._id.$in)&&selector._id.$in.length&&selector._id.$in.every(LocalCollection._selectorIsId)){return selector._id.$in}return null}if(Array.isArray(selector.$and)){for(var i=0;i<selector.$and.length;++i){var subIds=LocalCollection._idsMatchedBySelector(selector.$and[i]);if(subIds){return subIds}}}return null};LocalCollection._insertInResults=function(query,doc){var fields=EJSON.clone(doc);delete fields._id;if(query.ordered){if(!query.sorter){query.addedBefore(doc._id,query.projectionFn(fields),null);query.results.push(doc)}else{var i=LocalCollection._insertInSortedList(query.sorter.getComparator({distances:query.distances}),query.results,doc);var next=query.results[i+1];if(next){next=next._id}else{next=null}query.addedBefore(doc._id,query.projectionFn(fields),next)}query.added(doc._id,query.projectionFn(fields))}else{query.added(doc._id,query.projectionFn(fields));query.results.set(doc._id,doc)}};LocalCollection._insertInSortedList=function(cmp,array,value){if(array.length===0){array.push(value);return 0}var i=LocalCollection._binarySearch(cmp,array,value);array.splice(i,0,value);return i};LocalCollection._isModificationMod=function(mod){var isModify=false;var isReplace=false;Object.keys(mod).forEach(function(key){if(key.substr(0,1)==="$"){isModify=true}else{isReplace=true}});if(isModify&&isReplace){throw new Error("Update parameter cannot have both modifier and non-modifier fields.")}return isModify};LocalCollection._isPlainObject=function(x){return x&&LocalCollection._f._type(x)===3};LocalCollection._modify=function(doc,modifier){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!LocalCollection._isPlainObject(modifier)){throw MinimongoError("Modifier must be an object")}modifier=EJSON.clone(modifier);var isModifier=isOperatorObject(modifier);var newDoc=isModifier?EJSON.clone(doc):modifier;if(isModifier){Object.keys(modifier).forEach(function(operator){var setOnInsert=options.isInsert&&operator==="$setOnInsert";var modFunc=MODIFIERS[setOnInsert?"$set":operator];var operand=modifier[operator];if(!modFunc){throw MinimongoError("Invalid modifier specified "+operator)}Object.keys(operand).forEach(function(keypath){var arg=operand[keypath];if(keypath===""){throw MinimongoError("An empty update path is not valid.")}var keyparts=keypath.split(".");if(!keyparts.every(Boolean)){throw MinimongoError("The update path '"+keypath+"' contains an empty field name, "+"which is not allowed.")}var target=findModTarget(newDoc,keyparts,{arrayIndices:options.arrayIndices,forbidArray:operator==="$rename",noCreate:NO_CREATE_MODIFIERS[operator]});modFunc(target,keyparts.pop(),arg,keypath,newDoc)})});if(doc._id&&!EJSON.equals(doc._id,newDoc._id)){throw MinimongoError('After applying the update to the document {_id: "'+doc._id+'", ...},'+" the (immutable) field '_id' was found to have been altered to "+('_id: "'+newDoc._id+'"'))}}else{if(doc._id&&modifier._id&&!EJSON.equals(doc._id,modifier._id)){throw MinimongoError('The _id field cannot be changed from {_id: "'+doc._id+'"} to '+('{_id: "'+modifier._id+'"}'))}assertHasValidFieldNames(modifier)}Object.keys(doc).forEach(function(key){if(key!=="_id"){delete doc[key]}});Object.keys(newDoc).forEach(function(key){doc[key]=newDoc[key]})};LocalCollection._observeFromObserveChanges=function(cursor,observeCallbacks){var transform=cursor.getTransform()||function(doc){return doc};var suppressed=!!observeCallbacks._suppress_initial;var observeChangesCallbacks=void 0;if(LocalCollection._observeCallbacksAreOrdered(observeCallbacks)){var indices=!observeCallbacks._no_indices;observeChangesCallbacks={addedBefore:function(id,fields,before){if(suppressed||!(observeCallbacks.addedAt||observeCallbacks.added)){return}var doc=transform(Object.assign(fields,{_id:id}));if(observeCallbacks.addedAt){observeCallbacks.addedAt(doc,indices?before?this.docs.indexOf(before):this.docs.size():-1,before)}else{observeCallbacks.added(doc)}},changed:function(id,fields){if(!(observeCallbacks.changedAt||observeCallbacks.changed)){return}var doc=EJSON.clone(this.docs.get(id));if(!doc){throw new Error("Unknown id for changed: "+id)}var oldDoc=transform(EJSON.clone(doc));DiffSequence.applyChanges(doc,fields);if(observeCallbacks.changedAt){observeCallbacks.changedAt(transform(doc),oldDoc,indices?this.docs.indexOf(id):-1)}else{observeCallbacks.changed(transform(doc),oldDoc)}},movedBefore:function(id,before){if(!observeCallbacks.movedTo){return}var from=indices?this.docs.indexOf(id):-1;var to=indices?before?this.docs.indexOf(before):this.docs.size():-1;if(to>from){--to}observeCallbacks.movedTo(transform(EJSON.clone(this.docs.get(id))),from,to,before||null)},removed:function(id){if(!(observeCallbacks.removedAt||observeCallbacks.removed)){return}var doc=transform(this.docs.get(id));if(observeCallbacks.removedAt){observeCallbacks.removedAt(doc,indices?this.docs.indexOf(id):-1)}else{observeCallbacks.removed(doc)}}}}else{observeChangesCallbacks={added:function(id,fields){if(!suppressed&&observeCallbacks.added){observeCallbacks.added(transform(Object.assign(fields,{_id:id})))}},changed:function(id,fields){if(observeCallbacks.changed){var oldDoc=this.docs.get(id);var doc=EJSON.clone(oldDoc);DiffSequence.applyChanges(doc,fields);observeCallbacks.changed(transform(doc),transform(EJSON.clone(oldDoc)))}},removed:function(id){if(observeCallbacks.removed){observeCallbacks.removed(transform(this.docs.get(id)))}}}}var changeObserver=new LocalCollection._CachingChangeObserver({callbacks:observeChangesCallbacks});var handle=cursor.observeChanges(changeObserver.applyChange);suppressed=false;return handle};LocalCollection._observeCallbacksAreOrdered=function(callbacks){if(callbacks.added&&callbacks.addedAt){throw new Error("Please specify only one of added() and addedAt()")}if(callbacks.changed&&callbacks.changedAt){throw new Error("Please specify only one of changed() and changedAt()")}if(callbacks.removed&&callbacks.removedAt){throw new Error("Please specify only one of removed() and removedAt()")}return!!(callbacks.addedAt||callbacks.changedAt||callbacks.movedTo||callbacks.removedAt)};LocalCollection._observeChangesCallbacksAreOrdered=function(callbacks){if(callbacks.added&&callbacks.addedBefore){throw new Error("Please specify only one of added() and addedBefore()")}return!!(callbacks.addedBefore||callbacks.movedBefore)};LocalCollection._removeFromResults=function(query,doc){if(query.ordered){var i=LocalCollection._findInOrderedResults(query,doc);query.removed(doc._id);query.results.splice(i,1)}else{var id=doc._id;query.removed(doc._id);query.results.remove(id)}};LocalCollection._selectorIsId=function(selector){return typeof selector==="number"||typeof selector==="string"||selector instanceof MongoID.ObjectID};LocalCollection._selectorIsIdPerhapsAsObject=function(selector){return LocalCollection._selectorIsId(selector)||LocalCollection._selectorIsId(selector&&selector._id)&&Object.keys(selector).length===1};LocalCollection._updateInResults=function(query,doc,old_doc){if(!EJSON.equals(doc._id,old_doc._id)){throw new Error("Can't change a doc's _id while updating")}var projectionFn=query.projectionFn;var changedFields=DiffSequence.makeChangedFields(projectionFn(doc),projectionFn(old_doc));if(!query.ordered){if(Object.keys(changedFields).length){query.changed(doc._id,changedFields);query.results.set(doc._id,doc)}return}var old_idx=LocalCollection._findInOrderedResults(query,doc);if(Object.keys(changedFields).length){query.changed(doc._id,changedFields)}if(!query.sorter){return}query.results.splice(old_idx,1);var new_idx=LocalCollection._insertInSortedList(query.sorter.getComparator({distances:query.distances}),query.results,doc);if(old_idx!==new_idx){var next=query.results[new_idx+1];if(next){next=next._id}else{next=null}query.movedBefore&&query.movedBefore(doc._id,next)}};var MODIFIERS={$currentDate:function(target,field,arg){if((typeof arg==="undefined"?"undefined":(0,_typeof3.default)(arg))==="object"&&hasOwn.call(arg,"$type")){if(arg.$type!=="date"){throw MinimongoError("Minimongo does currently only support the date type in "+"$currentDate modifiers",{field:field})}}else if(arg!==true){throw MinimongoError("Invalid $currentDate modifier",{field:field})}target[field]=new Date},$min:function(target,field,arg){if(typeof arg!=="number"){throw MinimongoError("Modifier $min allowed for numbers only",{field:field})}if(field in target){if(typeof target[field]!=="number"){throw MinimongoError("Cannot apply $min modifier to non-number",{field:field})}if(target[field]>arg){target[field]=arg}}else{target[field]=arg}},$max:function(target,field,arg){if(typeof arg!=="number"){throw MinimongoError("Modifier $max allowed for numbers only",{field:field})}if(field in target){if(typeof target[field]!=="number"){throw MinimongoError("Cannot apply $max modifier to non-number",{field:field})}if(target[field]<arg){target[field]=arg}}else{target[field]=arg}},$inc:function(target,field,arg){if(typeof arg!=="number"){throw MinimongoError("Modifier $inc allowed for numbers only",{field:field})}if(field in target){if(typeof target[field]!=="number"){throw MinimongoError("Cannot apply $inc modifier to non-number",{field:field})}target[field]+=arg}else{target[field]=arg}},$set:function(target,field,arg){if(target!==Object(target)){var error=MinimongoError("Cannot set property on non-object field",{field:field});error.setPropertyError=true;throw error}if(target===null){var _error=MinimongoError("Cannot set property on null",{field:field});_error.setPropertyError=true;throw _error}assertHasValidFieldNames(arg);target[field]=arg},$setOnInsert:function(target,field,arg){},$unset:function(target,field,arg){if(target!==undefined){if(target instanceof Array){if(field in target){target[field]=null}}else{delete target[field]}}},$push:function(target,field,arg){if(target[field]===undefined){target[field]=[]}if(!(target[field]instanceof Array)){throw MinimongoError("Cannot apply $push modifier to non-array",{field:field})}if(!(arg&&arg.$each)){assertHasValidFieldNames(arg);target[field].push(arg);return}var toPush=arg.$each;if(!(toPush instanceof Array)){throw MinimongoError("$each must be an array",{field:field})}assertHasValidFieldNames(toPush);var position=undefined;if("$position"in arg){if(typeof arg.$position!=="number"){throw MinimongoError("$position must be a numeric value",{field:field})}if(arg.$position<0){throw MinimongoError("$position in $push must be zero or positive",{field:field})}position=arg.$position}var slice=undefined;if("$slice"in arg){if(typeof arg.$slice!=="number"){throw MinimongoError("$slice must be a numeric value",{field:field})}slice=arg.$slice}var sortFunction=undefined;if(arg.$sort){if(slice===undefined){throw MinimongoError("$sort requires $slice to be present",{field:field})}sortFunction=new Minimongo.Sorter(arg.$sort).getComparator();toPush.forEach(function(element){if(LocalCollection._f._type(element)!==3){throw MinimongoError("$push like modifiers using $sort require all elements to be "+"objects",{field:field})}})}if(position===undefined){toPush.forEach(function(element){target[field].push(element)})}else{var _target$field;var spliceArguments=[position,0];toPush.forEach(function(element){spliceArguments.push(element)});(_target$field=target[field]).splice.apply(_target$field,spliceArguments)}if(sortFunction){target[field].sort(sortFunction)}if(slice!==undefined){if(slice===0){target[field]=[]}else if(slice<0){target[field]=target[field].slice(slice)}else{target[field]=target[field].slice(0,slice)}}},$pushAll:function(target,field,arg){if(!((typeof arg==="undefined"?"undefined":(0,_typeof3.default)(arg))==="object"&&arg instanceof Array)){throw MinimongoError("Modifier $pushAll/pullAll allowed for arrays only")}assertHasValidFieldNames(arg);var toPush=target[field];if(toPush===undefined){target[field]=arg}else if(!(toPush instanceof Array)){throw MinimongoError("Cannot apply $pushAll modifier to non-array",{field:field})}else{toPush.push.apply(toPush,(0,_toConsumableArray3.default)(arg))}},$addToSet:function(target,field,arg){var isEach=false;if((typeof arg==="undefined"?"undefined":(0,_typeof3.default)(arg))==="object"){var keys=Object.keys(arg);if(keys[0]==="$each"){isEach=true}}var values=isEach?arg.$each:[arg];assertHasValidFieldNames(values);var toAdd=target[field];if(toAdd===undefined){target[field]=values}else if(!(toAdd instanceof Array)){throw MinimongoError("Cannot apply $addToSet modifier to non-array",{field:field})}else{values.forEach(function(value){if(toAdd.some(function(element){return LocalCollection._f._equal(value,element)})){return}toAdd.push(value)})}},$pop:function(target,field,arg){if(target===undefined){return}var toPop=target[field];if(toPop===undefined){return}if(!(toPop instanceof Array)){throw MinimongoError("Cannot apply $pop modifier to non-array",{field:field})}if(typeof arg==="number"&&arg<0){toPop.splice(0,1)}else{toPop.pop()}},$pull:function(target,field,arg){if(target===undefined){return}var toPull=target[field];if(toPull===undefined){return}if(!(toPull instanceof Array)){throw MinimongoError("Cannot apply $pull/pullAll modifier to non-array",{field:field})}var out=void 0;if(arg!=null&&(typeof arg==="undefined"?"undefined":(0,_typeof3.default)(arg))==="object"&&!(arg instanceof Array)){var matcher=new Minimongo.Matcher(arg);out=toPull.filter(function(element){return!matcher.documentMatches(element).result})}else{out=toPull.filter(function(element){return!LocalCollection._f._equal(element,arg)})}target[field]=out},$pullAll:function(target,field,arg){if(!((typeof arg==="undefined"?"undefined":(0,_typeof3.default)(arg))==="object"&&arg instanceof Array)){throw MinimongoError("Modifier $pushAll/pullAll allowed for arrays only",{field:field})}if(target===undefined){return}var toPull=target[field];if(toPull===undefined){return}if(!(toPull instanceof Array)){throw MinimongoError("Cannot apply $pull/pullAll modifier to non-array",{field:field})}target[field]=toPull.filter(function(object){return!arg.some(function(element){return LocalCollection._f._equal(object,element)})})},$rename:function(target,field,arg,keypath,doc){if(keypath===arg){throw MinimongoError("$rename source must differ from target",{field:field})}if(target===null){throw MinimongoError("$rename source field invalid",{field:field})}if(typeof arg!=="string"){throw MinimongoError("$rename target must be a string",{field:field})}if(arg.includes("\0")){throw MinimongoError("The 'to' field for $rename cannot contain an embedded null byte",{field:field})}if(target===undefined){return}var object=target[field];delete target[field];var keyparts=arg.split(".");var target2=findModTarget(doc,keyparts,{forbidArray:true});if(target2===null){throw MinimongoError("$rename target field invalid",{field:field})}target2[keyparts.pop()]=object},$bit:function(target,field,arg){throw MinimongoError("$bit is not supported",{field:field})}};var NO_CREATE_MODIFIERS={$pop:true,$pull:true,$pullAll:true,$rename:true,$unset:true};var invalidCharMsg={$:"start with '$'",".":"contain '.'","\0":"contain null bytes"};function assertHasValidFieldNames(doc){if(doc&&(typeof doc==="undefined"?"undefined":(0,_typeof3.default)(doc))==="object"){JSON.stringify(doc,function(key,value){assertIsValidFieldName(key);return value})}}function assertIsValidFieldName(key){var match=void 0;if(typeof key==="string"&&(match=key.match(/^\$|\.|\0/))){throw MinimongoError("Key "+key+" must not "+invalidCharMsg[match[0]])}}function findModTarget(doc,keyparts){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var usedArrayIndex=false;for(var i=0;i<keyparts.length;i++){var last=i===keyparts.length-1;var keypart=keyparts[i];if(!isIndexable(doc)){if(options.noCreate){return undefined}var error=MinimongoError("cannot use the part '"+keypart+"' to traverse "+doc);error.setPropertyError=true;throw error}if(doc instanceof Array){if(options.forbidArray){return null}if(keypart==="$"){if(usedArrayIndex){throw MinimongoError("Too many positional (i.e. '$') elements")}if(!options.arrayIndices||!options.arrayIndices.length){throw MinimongoError("The positional operator did not find the match needed from the "+"query")}keypart=options.arrayIndices[0];usedArrayIndex=true}else if(isNumericKey(keypart)){keypart=parseInt(keypart)}else{if(options.noCreate){return undefined}throw MinimongoError("can't append to array using string field name ["+keypart+"]")}if(last){keyparts[i]=keypart}if(options.noCreate&&keypart>=doc.length){return undefined}while(doc.length<keypart){doc.push(null)}if(!last){if(doc.length===keypart){doc.push({})}else if((0,_typeof3.default)(doc[keypart])!=="object"){throw MinimongoError("can't modify field '"+keyparts[i+1]+"' of list value "+JSON.stringify(doc[keypart]))}}}else{assertIsValidFieldName(keypart);if(!(keypart in doc)){if(options.noCreate){return undefined}if(!last){doc[keypart]={}}}}if(last){return doc}doc=doc[keypart]}}},"matcher.js":function(require,exports,module){var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({default:function(){return Matcher}});var LocalCollection=void 0;module.watch(require("./local_collection.js"),{default:function(v){LocalCollection=v}},0);var compileDocumentSelector=void 0,hasOwn=void 0,nothingMatcher=void 0;module.watch(require("./common.js"),{compileDocumentSelector:function(v){compileDocumentSelector=v},hasOwn:function(v){hasOwn=v},nothingMatcher:function(v){nothingMatcher=v}},1);var Matcher=function(){function Matcher(selector,isUpdate){(0,_classCallCheck3.default)(this,Matcher);this._paths={};this._hasGeoQuery=false;this._hasWhere=false;this._isSimple=true;this._matchingDocument=undefined;this._selector=null;this._docMatcher=this._compileSelector(selector);this._isUpdate=isUpdate}Matcher.prototype.documentMatches=function(){function documentMatches(doc){if(doc!==Object(doc)){throw Error("documentMatches needs a document")}return this._docMatcher(doc)}return documentMatches}();Matcher.prototype.hasGeoQuery=function(){function hasGeoQuery(){return this._hasGeoQuery}return hasGeoQuery}();Matcher.prototype.hasWhere=function(){function hasWhere(){return this._hasWhere}return hasWhere}();Matcher.prototype.isSimple=function(){function isSimple(){return this._isSimple}return isSimple}();Matcher.prototype._compileSelector=function(){function _compileSelector(selector){if(selector instanceof Function){this._isSimple=false;this._selector=selector;this._recordPathUsed("");return function(doc){return{result:!!selector.call(doc)}}}if(LocalCollection._selectorIsId(selector)){this._selector={_id:selector};this._recordPathUsed("_id");return function(doc){return{result:EJSON.equals(doc._id,selector)}}}if(!selector||hasOwn.call(selector,"_id")&&!selector._id){this._isSimple=false;return nothingMatcher}if(Array.isArray(selector)||EJSON.isBinary(selector)||typeof selector==="boolean"){throw new Error("Invalid selector: "+selector)}this._selector=EJSON.clone(selector);return compileDocumentSelector(selector,this,{isRoot:true})}return _compileSelector}();Matcher.prototype._getPaths=function(){function _getPaths(){return Object.keys(this._paths)}return _getPaths}();Matcher.prototype._recordPathUsed=function(){function _recordPathUsed(path){this._paths[path]=true}return _recordPathUsed}();return Matcher}();LocalCollection._f={_type:function(v){if(typeof v==="number"){return 1}if(typeof v==="string"){return 2}if(typeof v==="boolean"){return 8}if(Array.isArray(v)){return 4}if(v===null){return 10}if(v instanceof RegExp){return 11}if(typeof v==="function"){return 13}if(v instanceof Date){return 9}if(EJSON.isBinary(v)){return 5}if(v instanceof MongoID.ObjectID){return 7}return 3},_equal:function(a,b){return EJSON.equals(a,b,{keyOrderSensitive:true})},_typeorder:function(t){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][t]},_cmp:function(a,b){if(a===undefined){return b===undefined?0:-1}if(b===undefined){return 1}var ta=LocalCollection._f._type(a);var tb=LocalCollection._f._type(b);var oa=LocalCollection._f._typeorder(ta);var ob=LocalCollection._f._typeorder(tb);if(oa!==ob){return oa<ob?-1:1}if(ta!==tb){throw Error("Missing type coercion logic in _cmp")}if(ta===7){ta=tb=2;a=a.toHexString();b=b.toHexString()}if(ta===9){ta=tb=1;a=a.getTime();b=b.getTime()}if(ta===1)return a-b;if(tb===2)return a<b?-1:a===b?0:1;if(ta===3){var toArray=function(object){var result=[];Object.keys(object).forEach(function(key){result.push(key,object[key])});return result};return LocalCollection._f._cmp(toArray(a),toArray(b))}if(ta===4){for(var i=0;;i++){if(i===a.length){return i===b.length?0:-1}if(i===b.length){return 1}var s=LocalCollection._f._cmp(a[i],b[i]);if(s!==0){return s}}}if(ta===5){if(a.length!==b.length){return a.length-b.length}for(var _i=0;_i<a.length;_i++){if(a[_i]<b[_i]){return-1}if(a[_i]>b[_i]){return 1}}return 0}if(ta===8){if(a){return b?0:1}return b?-1:0}if(ta===10)return 0;if(ta===11)throw Error("Sorting not supported on regular expression");if(ta===13)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}}},"minimongo_common.js":function(require,exports,module){var LocalCollection_=void 0;module.watch(require("./local_collection.js"),{default:function(v){LocalCollection_=v}},0);var Matcher=void 0;module.watch(require("./matcher.js"),{default:function(v){Matcher=v}},1);var Sorter=void 0;module.watch(require("./sorter.js"),{default:function(v){Sorter=v}},2);LocalCollection=LocalCollection_;Minimongo={LocalCollection:LocalCollection_,Matcher:Matcher,Sorter:Sorter}},"observe_handle.js":function(require,exports,module){var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({default:function(){return ObserveHandle}});var ObserveHandle=function(){function ObserveHandle(){(0,_classCallCheck3.default)(this,ObserveHandle)}return ObserveHandle}()},"sorter.js":function(require,exports,module){var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({default:function(){return Sorter}});var ELEMENT_OPERATORS=void 0,equalityElementMatcher=void 0,expandArraysInBranches=void 0,hasOwn=void 0,isOperatorObject=void 0,makeLookupFunction=void 0,regexpElementMatcher=void 0;module.watch(require("./common.js"),{ELEMENT_OPERATORS:function(v){ELEMENT_OPERATORS=v},equalityElementMatcher:function(v){equalityElementMatcher=v},expandArraysInBranches:function(v){expandArraysInBranches=v},hasOwn:function(v){hasOwn=v},isOperatorObject:function(v){isOperatorObject=v},makeLookupFunction:function(v){makeLookupFunction=v},regexpElementMatcher:function(v){regexpElementMatcher=v}},0);var Sorter=function(){function Sorter(spec){var _this=this;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};(0,_classCallCheck3.default)(this,Sorter);this._sortSpecParts=[];this._sortFunction=null;var addSpecPart=function(path,ascending){if(!path){throw Error("sort keys must be non-empty")}if(path.charAt(0)==="$"){throw Error("unsupported sort key: "+path)}_this._sortSpecParts.push({ascending:ascending,lookup:makeLookupFunction(path,{forSort:true}),path:path})};if(spec instanceof Array){spec.forEach(function(element){if(typeof element==="string"){addSpecPart(element,true)}else{addSpecPart(element[0],element[1]!=="desc")}})}else if((typeof spec==="undefined"?"undefined":(0,_typeof3.default)(spec))==="object"){Object.keys(spec).forEach(function(key){addSpecPart(key,spec[key]>=0)})}else if(typeof spec==="function"){this._sortFunction=spec}else{throw Error("Bad sort specification: "+JSON.stringify(spec))}if(this._sortFunction){return}if(this.affectedByModifier){var selector={};this._sortSpecParts.forEach(function(spec){selector[spec.path]=1});this._selectorForAffectedByModifier=new Minimongo.Matcher(selector)}this._keyComparator=composeComparators(this._sortSpecParts.map(function(spec,i){return _this._keyFieldComparator(i)}));this._keyFilter=null;if(options.matcher){this._useWithMatcher(options.matcher)}}Sorter.prototype.getComparator=function(){function getComparator(options){if(this._sortSpecParts.length||!options||!options.distances){return this._getBaseComparator()}var distances=options.distances;return function(a,b){if(!distances.has(a._id)){throw Error("Missing distance for "+a._id)}if(!distances.has(b._id)){throw Error("Missing distance for "+b._id)}return distances.get(a._id)-distances.get(b._id)}}return getComparator}();Sorter.prototype._compareKeys=function(){function _compareKeys(key1,key2){if(key1.length!==this._sortSpecParts.length||key2.length!==this._sortSpecParts.length){throw Error("Key has wrong length")}return this._keyComparator(key1,key2)}return _compareKeys}();Sorter.prototype._generateKeysFromDoc=function(){function _generateKeysFromDoc(doc,cb){if(this._sortSpecParts.length===0){throw new Error("can't generate keys without a spec")}var pathFromIndices=function(indices){return indices.join(",")+","};var knownPaths=null;var valuesByIndexAndPath=this._sortSpecParts.map(function(spec){var branches=expandArraysInBranches(spec.lookup(doc),true);if(!branches.length){branches=[{value:null}]}var element=Object.create(null);var usedPaths=false;branches.forEach(function(branch){if(!branch.arrayIndices){if(branches.length>1){throw Error("multiple branches but no array used?")}element[""]=branch.value;return}usedPaths=true;var path=pathFromIndices(branch.arrayIndices);if(hasOwn.call(element,path)){throw Error("duplicate path: "+path)}element[path]=branch.value;if(knownPaths&&!hasOwn.call(knownPaths,path)){throw Error("cannot index parallel arrays")}});if(knownPaths){if(!hasOwn.call(element,"")&&Object.keys(knownPaths).length!==Object.keys(element).length){throw Error("cannot index parallel arrays!")}}else if(usedPaths){knownPaths={};Object.keys(element).forEach(function(path){knownPaths[path]=true})}return element});if(!knownPaths){var soleKey=valuesByIndexAndPath.map(function(values){if(!hasOwn.call(values,"")){throw Error("no value in sole key case?")}return values[""]});cb(soleKey);return}Object.keys(knownPaths).forEach(function(path){var key=valuesByIndexAndPath.map(function(values){if(hasOwn.call(values,"")){return values[""]}if(!hasOwn.call(values,path)){throw Error("missing path?")}return values[path]});cb(key)})}return _generateKeysFromDoc}();Sorter.prototype._getBaseComparator=function(){function _getBaseComparator(){var _this2=this;if(this._sortFunction){return this._sortFunction}if(!this._sortSpecParts.length){return function(doc1,doc2){return 0}}return function(doc1,doc2){var key1=_this2._getMinKeyFromDoc(doc1);var key2=_this2._getMinKeyFromDoc(doc2);return _this2._compareKeys(key1,key2)}}return _getBaseComparator}();Sorter.prototype._getMinKeyFromDoc=function(){function _getMinKeyFromDoc(doc){var _this3=this;var minKey=null;this._generateKeysFromDoc(doc,function(key){if(!_this3._keyCompatibleWithSelector(key)){return}if(minKey===null){minKey=key;return}if(_this3._compareKeys(key,minKey)<0){minKey=key}});if(minKey===null){throw Error("sort selector found no keys in doc?")}return minKey}return _getMinKeyFromDoc}();Sorter.prototype._getPaths=function(){function _getPaths(){return this._sortSpecParts.map(function(part){return part.path})}return _getPaths}();Sorter.prototype._keyCompatibleWithSelector=function(){function _keyCompatibleWithSelector(key){return!this._keyFilter||this._keyFilter(key)}return _keyCompatibleWithSelector}();Sorter.prototype._keyFieldComparator=function(){function _keyFieldComparator(i){var invert=!this._sortSpecParts[i].ascending;return function(key1,key2){var compare=LocalCollection._f._cmp(key1[i],key2[i]);return invert?-compare:compare}}return _keyFieldComparator}();Sorter.prototype._useWithMatcher=function(){function _useWithMatcher(matcher){var _this4=this;if(this._keyFilter){throw Error("called _useWithMatcher twice?")}if(!this._sortSpecParts.length){return}var selector=matcher._selector;if(selector instanceof Function){return}var constraintsByPath={};this._sortSpecParts.forEach(function(spec){constraintsByPath[spec.path]=[]});Object.keys(selector).forEach(function(key){var subSelector=selector[key];var constraints=constraintsByPath[key];if(!constraints){return}if(subSelector instanceof RegExp){if(subSelector.ignoreCase||subSelector.multiline){return}constraints.push(regexpElementMatcher(subSelector));return}if(isOperatorObject(subSelector)){Object.keys(subSelector).forEach(function(operator){var operand=subSelector[operator];if(["$lt","$lte","$gt","$gte"].includes(operator)){constraints.push(ELEMENT_OPERATORS[operator].compileElementSelector(operand))}if(operator==="$regex"&&!subSelector.$options){constraints.push(ELEMENT_OPERATORS.$regex.compileElementSelector(operand,subSelector))}});return}constraints.push(equalityElementMatcher(subSelector))});if(!constraintsByPath[this._sortSpecParts[0].path].length){return}this._keyFilter=function(key){return _this4._sortSpecParts.every(function(specPart,index){return constraintsByPath[specPart.path].every(function(fn){return fn(key[index])})})}}return _useWithMatcher}();return Sorter}();function composeComparators(comparatorArray){return function(a,b){for(var i=0;i<comparatorArray.length;++i){var compare=comparatorArray[i](a,b);if(compare!==0){return compare}}return 0}}}}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/minimongo/minimongo_client.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.minimongo=exports,{LocalCollection:LocalCollection,Minimongo:Minimongo,MinimongoTest:MinimongoTest,MinimongoError:MinimongoError})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var LocalCollection=Package.minimongo.LocalCollection;var Minimongo=Package.minimongo.Minimongo;var check=Package.check.check;var Match=Package.check.Match;var EJSON=Package.ejson.EJSON;var DDP=Package["ddp-client"].DDP;var meteorInstall=Package.modules.meteorInstall;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Symbol=Package["ecmascript-runtime-client"].Symbol;var Map=Package["ecmascript-runtime-client"].Map;var Set=Package["ecmascript-runtime-client"].Set;var AllowDeny;var require=meteorInstall({node_modules:{meteor:{"allow-deny":{"allow-deny.js":function(){var hasOwn=Object.prototype.hasOwnProperty;AllowDeny={CollectionPrototype:{}};var CollectionPrototype=AllowDeny.CollectionPrototype;CollectionPrototype.allow=function(options){addValidator(this,"allow",options)};CollectionPrototype.deny=function(options){addValidator(this,"deny",options)};CollectionPrototype._defineMutationMethods=function(options){var self=this;options=options||{};self._restricted=false;self._insecure=undefined;self._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},upsert:{allow:[],deny:[]},fetch:[],fetchAllFields:false};if(!self._name)return;self._prefix="/"+self._name+"/";if(self._connection&&(self._connection===Meteor.server||Meteor.isClient)){var m={};["insert","update","remove"].forEach(function(method){var methodName=self._prefix+method;if(options.useExisting){var handlerPropName=Meteor.isClient?"_methodHandlers":"method_handlers";if(self._connection[handlerPropName]&&typeof self._connection[handlerPropName][methodName]==="function")return}m[methodName]=function(){check(arguments,[Match.Any]);var args=Array.from(arguments);try{var generatedId=null;if(method==="insert"&&!hasOwn.call(args[0],"_id")){generatedId=self._makeNewID()}if(this.isSimulation){if(generatedId!==null)args[0]._id=generatedId;return self._collection[method].apply(self._collection,args)}if(method!=="insert")throwIfSelectorIsNotId(args[0],method);if(self._restricted){if(self._validators[method].allow.length===0){throw new Meteor.Error(403,"Access denied. No allow validators set on restricted "+"collection for method '"+method+"'.")}var validatedMethodName="_validated"+method.charAt(0).toUpperCase()+method.slice(1);args.unshift(this.userId);method==="insert"&&args.push(generatedId);return self[validatedMethodName].apply(self,args)}else if(self._isInsecure()){if(generatedId!==null)args[0]._id=generatedId;return self._collection[method].apply(self._collection,args)}else{throw new Meteor.Error(403,"Access denied")}}catch(e){if(e.name==="MongoError"||e.name==="MinimongoError"){throw new Meteor.Error(409,e.toString())}else{throw e}}}});self._connection.methods(m)}};CollectionPrototype._updateFetch=function(fields){var self=this;if(!self._validators.fetchAllFields){if(fields){var union=Object.create(null);var add=function(names){return names&&names.forEach(function(name){return union[name]=1})};add(self._validators.fetch);add(fields);self._validators.fetch=Object.keys(union)}else{self._validators.fetchAllFields=true;self._validators.fetch=null}}};CollectionPrototype._isInsecure=function(){var self=this;if(self._insecure===undefined)return!!Package.insecure;return self._insecure};CollectionPrototype._validatedInsert=function(userId,doc,generatedId){var self=this;if(self._validators.insert.deny.some(function(validator){return validator(userId,docToValidate(validator,doc,generatedId))})){throw new Meteor.Error(403,"Access denied")}if(self._validators.insert.allow.every(function(validator){return!validator(userId,docToValidate(validator,doc,generatedId))})){throw new Meteor.Error(403,"Access denied")}if(generatedId!==null)doc._id=generatedId;self._collection.insert.call(self._collection,doc)};CollectionPrototype._validatedUpdate=function(userId,selector,mutator,options){var self=this;check(mutator,Object);options=Object.assign(Object.create(null),options);if(!LocalCollection._selectorIsIdPerhapsAsObject(selector))throw new Error("validated update should be of a single ID");if(options.upsert)throw new Meteor.Error(403,"Access denied. Upserts not "+"allowed in a restricted collection.");var noReplaceError="Access denied. In a restricted collection you can only"+" update documents, not replace them. Use a Mongo update operator, such "+"as '$set'.";var mutatorKeys=Object.keys(mutator);var modifiedFields={};if(mutatorKeys.length===0){throw new Meteor.Error(403,noReplaceError)}mutatorKeys.forEach(function(op){var params=mutator[op];if(op.charAt(0)!=="$"){throw new Meteor.Error(403,noReplaceError)}else if(!hasOwn.call(ALLOWED_UPDATE_OPERATIONS,op)){throw new Meteor.Error(403,"Access denied. Operator "+op+" not allowed in a restricted collection.")}else{Object.keys(params).forEach(function(field){if(field.indexOf(".")!==-1)field=field.substring(0,field.indexOf("."));modifiedFields[field]=true})}});var fields=Object.keys(modifiedFields);var findOptions={transform:null};if(!self._validators.fetchAllFields){findOptions.fields={};self._validators.fetch.forEach(function(fieldName){findOptions.fields[fieldName]=1})}var doc=self._collection.findOne(selector,findOptions);if(!doc)return 0;if(self._validators.update.deny.some(function(validator){var factoriedDoc=transformDoc(validator,doc);return validator(userId,factoriedDoc,fields,mutator)})){throw new Meteor.Error(403,"Access denied")}if(self._validators.update.allow.every(function(validator){var factoriedDoc=transformDoc(validator,doc);return!validator(userId,factoriedDoc,fields,mutator)})){throw new Meteor.Error(403,"Access denied")}options._forbidReplace=true;return self._collection.update.call(self._collection,selector,mutator,options)};var ALLOWED_UPDATE_OPERATIONS={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};CollectionPrototype._validatedRemove=function(userId,selector){var self=this;var findOptions={transform:null};if(!self._validators.fetchAllFields){findOptions.fields={};self._validators.fetch.forEach(function(fieldName){findOptions.fields[fieldName]=1})}var doc=self._collection.findOne(selector,findOptions);if(!doc)return 0;if(self._validators.remove.deny.some(function(validator){return validator(userId,transformDoc(validator,doc))})){throw new Meteor.Error(403,"Access denied")}if(self._validators.remove.allow.every(function(validator){return!validator(userId,transformDoc(validator,doc))})){throw new Meteor.Error(403,"Access denied")}return self._collection.remove.call(self._collection,selector)};CollectionPrototype._callMutatorMethod=function(){function _callMutatorMethod(name,args,callback){if(Meteor.isClient&&!callback&&!alreadyInSimulation()){callback=function(err){if(err)Meteor._debug(name+" failed: "+(err.reason||err.stack))}}var firstArgIsSelector=name==="update"||name==="remove";if(firstArgIsSelector&&!alreadyInSimulation()){throwIfSelectorIsNotId(args[0],name)}var mutatorMethodName=this._prefix+name;return this._connection.apply(mutatorMethodName,args,{returnStubValue:true},callback)}return _callMutatorMethod}();function transformDoc(validator,doc){if(validator.transform)return validator.transform(doc);return doc}function docToValidate(validator,doc,generatedId){var ret=doc;if(validator.transform){ret=EJSON.clone(doc);if(generatedId!==null){ret._id=generatedId}ret=validator.transform(ret)}return ret}function addValidator(collection,allowOrDeny,options){var validKeysRegEx=/^(?:insert|update|remove|fetch|transform)$/;Object.keys(options).forEach(function(key){if(!validKeysRegEx.test(key))throw new Error(allowOrDeny+": Invalid key: "+key)});collection._restricted=true;["insert","update","remove"].forEach(function(name){if(hasOwn.call(options,name)){if(!(options[name]instanceof Function)){throw new Error(allowOrDeny+": Value for `"+name+"` must be a function")}if(options.transform===undefined){options[name].transform=collection._transform}else{options[name].transform=LocalCollection.wrapTransform(options.transform)}collection._validators[name][allowOrDeny].push(options[name])}});if(options.update||options.remove||options.fetch){if(options.fetch&&!(options.fetch instanceof Array)){throw new Error(allowOrDeny+": Value for `fetch` must be an array")}collection._updateFetch(options.fetch)}}function throwIfSelectorIsNotId(selector,methodName){if(!LocalCollection._selectorIsIdPerhapsAsObject(selector)){throw new Meteor.Error(403,"Not permitted. Untrusted code may only "+methodName+" documents by ID.")}}function alreadyInSimulation(){var CurrentInvocation=DDP._CurrentMethodInvocation||DDP._CurrentInvocation;var enclosing=CurrentInvocation.get();return enclosing&&enclosing.isSimulation}}}}}},{extensions:[".js",".json"]});require("./node_modules/meteor/allow-deny/allow-deny.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["allow-deny"]={},{AllowDeny:AllowDeny})})();(function(){if(typeof Package==="undefined")Package={};Package["ddp-rate-limiter"]={}})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var SHA256;(function(){SHA256=function(){function SHA256(s){var chrsz=8;var hexcase=0;function safe_add(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function S(X,n){return X>>>n|X<<32-n}function R(X,n){return X>>>n}function Ch(x,y,z){return x&y^~x&z}function Maj(x,y,z){return x&y^x&z^y&z}function Sigma0256(x){return S(x,2)^S(x,13)^S(x,22)}function Sigma1256(x){return S(x,6)^S(x,11)^S(x,25)}function Gamma0256(x){return S(x,7)^S(x,18)^R(x,3)}function Gamma1256(x){return S(x,17)^S(x,19)^R(x,10)}function core_sha256(m,l){var K=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298);var HASH=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225);var W=new Array(64);var a,b,c,d,e,f,g,h,i,j;var T1,T2;m[l>>5]|=128<<24-l%32;m[(l+64>>9<<4)+15]=l;for(var i=0;i<m.length;i+=16){a=HASH[0];b=HASH[1];c=HASH[2];d=HASH[3];e=HASH[4];f=HASH[5];g=HASH[6];h=HASH[7];for(var j=0;j<64;j++){if(j<16)W[j]=m[j+i];else W[j]=safe_add(safe_add(safe_add(Gamma1256(W[j-2]),W[j-7]),Gamma0256(W[j-15])),W[j-16]);T1=safe_add(safe_add(safe_add(safe_add(h,Sigma1256(e)),Ch(e,f,g)),K[j]),W[j]);T2=safe_add(Sigma0256(a),Maj(a,b,c));h=g;g=f;f=e;e=safe_add(d,T1);d=c;c=b;b=a;a=safe_add(T1,T2)}HASH[0]=safe_add(a,HASH[0]);HASH[1]=safe_add(b,HASH[1]);HASH[2]=safe_add(c,HASH[2]);HASH[3]=safe_add(d,HASH[3]);HASH[4]=safe_add(e,HASH[4]);HASH[5]=safe_add(f,HASH[5]);HASH[6]=safe_add(g,HASH[6]);HASH[7]=safe_add(h,HASH[7])}return HASH}function str2binb(str){var bin=Array();var mask=(1<<chrsz)-1;for(var i=0;i<str.length*chrsz;i+=chrsz){bin[i>>5]|=(str.charCodeAt(i/chrsz)&mask)<<24-i%32}return bin}function Utf8Encode(string){var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext}function binb2hex(binarray){var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef";var str="";for(var i=0;i<binarray.length*4;i++){str+=hex_tab.charAt(binarray[i>>2]>>(3-i%4)*8+4&15)+hex_tab.charAt(binarray[i>>2]>>(3-i%4)*8&15)}return str}s=Utf8Encode(s);return binb2hex(core_sha256(str2binb(s),s.length*chrsz))}return SHA256}()}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.sha={},{SHA256:SHA256})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var Random=Package.random.Random;var check=Package.check.check;var Match=Package.check.Match;var SHA256=Package.sha.SHA256;var _=Package.underscore._;var BigInteger,SRP;(function(){BigInteger=function(){var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;function BigInteger(a,b,c){if(a!=null)if("number"==typeof a)this.fromNumber(a,b,c);else if(b==null&&"string"!=typeof a)this.fromString(a,256);else this.fromString(a,b)}function nbi(){return new BigInteger(null)}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864);w[j++]=v&67108863}return c}function am2(i,x,w,j,c,n){var xl=x&32767,xh=x>>15;while(--n>=0){var l=this[i]&32767;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&32767)<<15)+w[j]+(c&1073741823);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&1073741823}return c}function am3(i,x,w,j,c,n){var xl=x&16383,xh=x>>14;while(--n>=0){var l=this[i]&16383;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&16383)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&268435455}return c}{BigInteger.prototype.am=am3;dbits=28}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array;var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t;r.s=this.s}function bnpFromInt(x){this.t=1;this.s=x<0?-1:0;if(x>0)this[0]=x;else if(x<-1)this[0]=x+DV;else this.t=0}function nbv(i){var r=nbi();r.fromInt(i);return r}function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this.fromRadix(s,b);return}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=k==8?s[i]&255:intAt(s,i);if(x<0){if(s.charAt(i)=="-")mi=true;continue}mi=false;if(sh==0)this[this.t++]=x;else if(sh+k>this.DB){this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh;this[this.t++]=x>>this.DB-sh}else this[this.t-1]|=x<<sh;sh+=k;if(sh>=this.DB)sh-=this.DB}if(k==8&&(s[0]&128)!=0){this.s=-1;if(sh>0)this[this.t-1]|=(1<<this.DB-sh)-1<<sh}this.clamp();if(mi)BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c)--this.t}function bnToString(b){if(this.s<0)return"-"+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-i*this.DB%k;if(i-- >0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d)}while(i>=0){if(p<k){d=(this[i]&(1<<p)-1)<<k-p;d|=this[--i]>>(p+=this.DB-k)}else{d=this[i]>>(p-=k)&km;if(p<=0){p+=this.DB;--i}}if(d>0)m=true;if(m)r+=int2char(d)}}return m?r:"0"}function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;r=i-a.t;if(r!=0)return r;while(--i>=0)if((r=this[i]-a[i])!=0)return r;return 0}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16}if((t=x>>8)!=0){x=t;r+=8}if((t=x>>4)!=0){x=t;r+=4}if((t=x>>2)!=0){x=t;r+=2}if((t=x>>1)!=0){x=t;r+=1}return r}function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n;r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0);r.s=this.s}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=this[i]>>cbs|c;c=(this[i]&bm)<<bs}for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs}if(bs>0)r[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r.clamp()}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB}c-=a.s}r.s=c<0?-1:0;if(c<-1)r[i++]=this.DV+c;else if(c>0)r[i++]=c;r.t=i;r.clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0;r.clamp();if(this.s!=a.s)BigInteger.ZERO.subTo(r,r)}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1}}if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);r.s=0;r.clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q.fromInt(0);if(r!=null)this.copyTo(r);return}if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r)}else{pm.copyTo(y);pt.copyTo(r)}var ys=y.t;var y0=y[ys-1];if(y0==0)return;var yt=y0*(1<<this.F1)+(ys>1?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=q==null?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r)}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys)y[y.t++]=0;while(--j>=0){var qd=r[--i]==y0?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd)r.subTo(t,r)}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO.subTo(q,q)}r.t=ys;r.clamp();if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r)}function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);return r}function Classic(m){this.m=m}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x}function cRevert(x){return x}function cReduce(x){x.divRemTo(this.m,null,x)}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}function cSqrTo(x,r){x.squareTo(r);this.reduce(r)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var y=x&3;y=y*(2-(x&15)*y)&15;y=y*(2-(x&255)*y)&255;y=y*(2-((x&65535)*y&65535))&65535;y=y*(2-x*y%this.DV)%this.DV;return y>0?this.DV-y:-y}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<m.DB-15)-1;this.mt2=2*m.t}function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r}function montReduce(x){while(x.t<=this.mt2)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x[i]&32767;var u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function montSqrTo(x,r){x.squareTo(r);this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,z){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t}}return z.revert(r)}function bnModPowInt(e,m){var z;if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);return this.exp(e,z)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var r=nbi();this.copyTo(r);return r}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return"0";var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z)}return z.intValue().toString(b)+r}function bnpFromRadix(s,b){this.fromInt(0);if(b==null)b=10;var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0)mi=true;continue}w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0}}if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0)}if(mi)BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(a,b,c){if("number"==typeof b){if(a<2)this.fromInt(1);else{this.fromNumber(a,c);if(!this.testBit(a-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(b)){this.dAddOffset(2,0);if(this.bitLength()>a)this.subTo(BigInteger.ONE.shiftLeft(a-1),this)}}}else{var x=new Array,t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=(1<<t)-1;else x[0]=0;this.fromString(x,256)}}function bnToByteArray(){var i=this.t,r=new Array;r[0]=this.s;var p=this.DB-i*this.DB%8,d,k=0;if(i-- >0){if(p<this.DB&&(d=this[i]>>p)!=(this.s&this.DM)>>p)r[k++]=d|this.s<<this.DB-p;while(i>=0){if(p<8){d=(this[i]&(1<<p)-1)<<8-p;d|=this[--i]>>(p+=this.DB-8)}else{d=this[i]>>(p-=8)&255;if(p<=0){p+=this.DB;--i}}if((d&128)!=0)d|=-256;if(k==0&&(this.s&128)!=(d&128))++k;if(k>0||d!=this.s)r[k++]=d}}return r}function bnEquals(a){return this.compareTo(a)==0}function bnMin(a){return this.compareTo(a)<0?this:a}function bnMax(a){return this.compareTo(a)>0?this:a}function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i)r[i]=op(this[i],a[i]);if(a.t<this.t){f=a.s&this.DM;for(i=m;i<this.t;++i)r[i]=op(this[i],f);r.t=this.t}else{f=this.s&this.DM;for(i=m;i<a.t;++i)r[i]=op(f,a[i]);r.t=a.t}r.s=op(this.s,a.s);r.clamp()}function op_and(x,y){return x&y}function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r}function op_or(x,y){return x|y}function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r}function op_xor(x,y){return x^y}function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r}function op_andnot(x,y){return x&~y}function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r[i]=this.DM&~this[i];r.t=this.t;r.s=~this.s;return r}function bnShiftLeft(n){var r=nbi();if(n<0)this.rShiftTo(-n,r);else this.lShiftTo(n,r);return r}function bnShiftRight(n){var r=nbi();if(n<0)this.lShiftTo(-n,r);else this.rShiftTo(n,r);return r}function lbit(x){if(x==0)return-1;var r=0;if((x&65535)==0){x>>=16;r+=16}if((x&255)==0){x>>=8;r+=8}if((x&15)==0){x>>=4;r+=4}if((x&3)==0){x>>=2;r+=2}if((x&1)==0)++r;return r}function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)if(this[i]!=0)return i*this.DB+lbit(this[i]);if(this.s<0)return this.t*this.DB;return-1}function cbit(x){var r=0;while(x!=0){x&=x-1;++r}return r}function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i)r+=cbit(this[i]^x);return r}function bnTestBit(n){var j=Math.floor(n/this.DB);if(j>=this.t)return this.s!=0;return(this[j]&1<<n%this.DB)!=0}function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this.bitwiseTo(r,op,r);return r}function bnSetBit(n){return this.changeBit(n,op_or)}function bnClearBit(n){return this.changeBit(n,op_andnot)}function bnFlipBit(n){return this.changeBit(n,op_xor)}function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]+a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c+=a[i];r[i++]=c&this.DM;c>>=this.DB}c+=a.s}r.s=c<0?-1:0;if(c>0)r[i++]=c;else if(c<-1)r[i++]=this.DV+c;r.t=i;r.clamp()}function bnAdd(a){var r=nbi();this.addTo(a,r);return r}function bnSubtract(a){var r=nbi();this.subTo(a,r);return r}function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r}function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r}function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this.divRemTo(a,q,r);return new Array(q,r)}function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp()}function bnpDAddOffset(n,w){while(this.t<=w)this[this.t++]=0;this[w]+=n;while(this[w]>=this.DV){this[w]-=this.DV;if(++w>=this.t)this[this.t++]=0;++this[w]}}function NullExp(){}function nNop(x){return x}function nMulTo(x,y,r){x.multiplyTo(y,r)}function nSqrTo(x,r){x.squareTo(r)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0)r[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t);for(j=Math.min(a.t,n);i<j;++i)this.am(0,a[i],r,i,0,n-i);r.clamp()}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0)r[i]=0;for(i=Math.max(n-this.t,0);i<a.t;++i)r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n);r.clamp();r.drShiftTo(1,r)}function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);else if(x.compareTo(this.m)<0)return x;else{var r=nbi();x.copyTo(r);this.reduce(r);return r}}function barrettRevert(x){return x}function barrettReduce(x){x.drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0)x.dAddOffset(1,this.m.t+1);x.subTo(this.r2,x);while(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r)}function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0)return r;else if(i<18)k=1;else if(i<48)k=3;else if(i<144)k=4;else if(i<768)k=5;else k=6;if(i<8)z=new Classic(m);else if(m.isEven())z=new Barrett(m);else z=new Montgomery(m);var g=new Array,n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2}}var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e[j])-1;while(j>=0){if(i>=k1)w=e[j]>>i-k1&km;else{w=(e[j]&(1<<i+1)-1)<<k1-i;if(j>0)w|=e[j-1]>>this.DB+i-k1}n=k;while((w&1)==0){w>>=1;--n}if((i-=n)<0){i+=this.DB;--j}if(is1){g[w].copyTo(r);is1=false}else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2}if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t}z.mulTo(r2,g[w],r)}while(j>=0&&(e[j]&1<<i)==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this.DB-1;--j}}}return z.revert(r)}function bnGCD(a){var x=this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;if(i<g)g=i;if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y)}while(x.signum()>0){if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x);if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y);if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x)}else{y.subTo(x,y);y.rShiftTo(1,y)}}if(g>0)y.lShiftTo(g,y);return y}function bnpModInt(n){if(n<=0)return 0;var d=this.DV%n,r=this.s<0?n-1:0;if(this.t>0)if(d==0)r=this[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n;return r}function bnModInverse(m){var ac=m.isEven();if(this.isEven()&&ac||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u);if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b)}a.rShiftTo(1,a)}else if(!b.isEven())b.subTo(m,b);b.rShiftTo(1,b)}while(v.isEven()){v.rShiftTo(1,v);if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d)}c.rShiftTo(1,c)}else if(!d.isEven())d.subTo(m,d);d.rShiftTo(1,d)}if(u.compareTo(v)>=0){u.subTo(v,u);if(ac)a.subTo(c,a);b.subTo(d,b)}else{v.subTo(u,v);if(ac)c.subTo(a,c);d.subTo(b,d)}}if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d.addTo(m,d);else return d;if(d.signum()<0)return d.add(m);else return d}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(x[0]==lowprimes[i])return true;return false}if(x.isEven())return false;i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];m=x.modInt(m);while(i<j)if(m%lowprimes[i++]==0)return false}return x.millerRabin(t)}function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return false;var r=n1.shiftRight(k);t=t+1>>1;if(t>lowprimes.length)t=lowprimes.length;var a=nbi();for(var i=0;i<t;++i){a.fromInt(lowprimes[i]);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0)return false}if(y.compareTo(n1)!=0)return false}}return true}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;return BigInteger}()}).call(this);(function(){SRP={};SRP.generateVerifier=function(password,options){var params=paramsFromOptions(options);var salt=options&&options.salt||Random.secret();var identity;var hashedIdentityAndPassword=options&&options.hashedIdentityAndPassword;if(!hashedIdentityAndPassword){identity=options&&options.identity||Random.secret();hashedIdentityAndPassword=params.hash(identity+":"+password)}var x=params.hash(salt+hashedIdentityAndPassword);var xi=new BigInteger(x,16);var v=params.g.modPow(xi,params.N);return{identity:identity,salt:salt,verifier:v.toString(16)}};SRP.matchVerifier={identity:String,salt:String,verifier:String};var _defaults={hash:function(x){return SHA256(x).toLowerCase()},N:new BigInteger("EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",16),g:new BigInteger("2")};_defaults.k=new BigInteger(_defaults.hash(_defaults.N.toString(16)+_defaults.g.toString(16)),16);var paramsFromOptions=function(options){if(!options)return _defaults;var ret=_.extend({},_defaults);_.each(["N","g","k"],function(p){if(options[p]){if(typeof options[p]==="string")ret[p]=new BigInteger(options[p],16);else if(options[p]instanceof BigInteger)ret[p]=options[p];else throw new Error("Invalid parameter: "+p)}});if(options.hash)ret.hash=function(x){return options.hash(x).toLowerCase()};if(!options.k&&(options.N||options.g||options.hash)){ret.k=ret.hash(ret.N.toString(16)+ret.g.toString(16))}return ret}}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.srp={},{SRP:SRP})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var AllowDeny=Package["allow-deny"].AllowDeny;var Random=Package.random.Random;var EJSON=Package.ejson.EJSON;var _=Package.underscore._;var LocalCollection=Package.minimongo.LocalCollection;var Minimongo=Package.minimongo.Minimongo;var DDP=Package["ddp-client"].DDP;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var DiffSequence=Package["diff-sequence"].DiffSequence;var MongoID=Package["mongo-id"].MongoID;var check=Package.check.check;var Match=Package.check.Match;var meteorInstall=Package.modules.meteorInstall;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Symbol=Package["ecmascript-runtime-client"].Symbol;var Map=Package["ecmascript-runtime-client"].Map;var Set=Package["ecmascript-runtime-client"].Set;var LocalCollectionDriver,Mongo;var require=meteorInstall({node_modules:{meteor:{mongo:{"local_collection_driver.js":function(){LocalCollectionDriver=function(){var self=this;self.noConnCollections={}};var ensureCollection=function(name,collections){if(!(name in collections))collections[name]=new LocalCollection(name);return collections[name]};_.extend(LocalCollectionDriver.prototype,{open:function(name,conn){var self=this;if(!name)return new LocalCollection;if(!conn){return ensureCollection(name,self.noConnCollections)}if(!conn._mongo_livedata_collections)conn._mongo_livedata_collections={};return ensureCollection(name,conn._mongo_livedata_collections)}});LocalCollectionDriver=new LocalCollectionDriver},"collection.js":function(require,exports,module){Mongo={};Mongo.Collection=function(name,options){var self=this;if(!(self instanceof Mongo.Collection))throw new Error('use "new" to construct a Mongo.Collection');if(!name&&name!==null){Meteor._debug("Warning: creating anonymous collection. It will not be "+"saved or synchronized over the network. (Pass null for "+"the collection name to turn off this warning.)");name=null}if(name!==null&&typeof name!=="string"){throw new Error("First argument to new Mongo.Collection must be a string or null")}if(options&&options.methods){options={connection:options}}if(options&&options.manager&&!options.connection){options.connection=options.manager}options=_.extend({connection:undefined,idGeneration:"STRING",transform:null,_driver:undefined,_preventAutopublish:false},options);switch(options.idGeneration){case"MONGO":self._makeNewID=function(){var src=name?DDP.randomStream("/collection/"+name):Random.insecure;return new Mongo.ObjectID(src.hexString(24))};break;case"STRING":default:self._makeNewID=function(){var src=name?DDP.randomStream("/collection/"+name):Random.insecure;return src.id()};break}self._transform=LocalCollection.wrapTransform(options.transform);if(!name||options.connection===null)self._connection=null;else if(options.connection)self._connection=options.connection;else if(Meteor.isClient)self._connection=Meteor.connection;else self._connection=Meteor.server;if(!options._driver){if(name&&self._connection===Meteor.server&&typeof MongoInternals!=="undefined"&&MongoInternals.defaultRemoteCollectionDriver){options._driver=MongoInternals.defaultRemoteCollectionDriver()}else{options._driver=LocalCollectionDriver}}self._collection=options._driver.open(name,self._connection);self._name=name;self._driver=options._driver;if(self._connection&&self._connection.registerStore){var ok=self._connection.registerStore(name,{beginUpdate:function(batchSize,reset){if(batchSize>1||reset)self._collection.pauseObservers();if(reset)self._collection.remove({})},update:function(msg){var mongoId=MongoID.idParse(msg.id);var doc=self._collection.findOne(mongoId);if(msg.msg==="replace"){var replace=msg.replace;if(!replace){if(doc)self._collection.remove(mongoId)}else if(!doc){self._collection.insert(replace)}else{self._collection.update(mongoId,replace)}return}else if(msg.msg==="added"){if(doc){throw new Error("Expected not to find a document already present for an add")}self._collection.insert(_.extend({_id:mongoId},msg.fields))}else if(msg.msg==="removed"){if(!doc)throw new Error("Expected to find a document already present for removed");self._collection.remove(mongoId)}else if(msg.msg==="changed"){if(!doc)throw new Error("Expected to find a document to change");if(!_.isEmpty(msg.fields)){var modifier={};_.each(msg.fields,function(value,key){if(value===undefined){if(!modifier.$unset)modifier.$unset={};modifier.$unset[key]=1}else{if(!modifier.$set)modifier.$set={};modifier.$set[key]=value}});self._collection.update(mongoId,modifier)}}else{throw new Error("I don't know how to deal with this message")}},endUpdate:function(){self._collection.resumeObservers()},saveOriginals:function(){self._collection.saveOriginals()},retrieveOriginals:function(){return self._collection.retrieveOriginals()},getDoc:function(id){return self.findOne(id)},_getCollection:function(){return self}});if(!ok){var message='There is already a collection named "'+name+'"';if(options._suppressSameNameError===true){console.warn?console.warn(message):console.log(message)}else{throw new Error(message)}}}if(options.defineMutationMethods!==false){try{self._defineMutationMethods({useExisting:options._suppressSameNameError===true})}catch(error){if(error.message==="A method named '/"+name+"/insert' is already defined")throw new Error('There is already a collection named "'+name+'"');throw error}}if(Package.autopublish&&!options._preventAutopublish&&self._connection&&self._connection.publish){self._connection.publish(null,function(){return self.find()},{is_auto:true})}};_.extend(Mongo.Collection.prototype,{_getFindSelector:function(args){if(args.length==0)return{};else return args[0]},_getFindOptions:function(args){var self=this;if(args.length<2){return{transform:self._transform}}else{check(args[1],Match.Optional(Match.ObjectIncluding({fields:Match.Optional(Match.OneOf(Object,undefined)),sort:Match.Optional(Match.OneOf(Object,Array,Function,undefined)),limit:Match.Optional(Match.OneOf(Number,undefined)),skip:Match.Optional(Match.OneOf(Number,undefined))})));return _.extend({transform:self._transform},args[1])}},find:function(){var self=this;var argArray=_.toArray(arguments);return self._collection.find(self._getFindSelector(argArray),self._getFindOptions(argArray))},findOne:function(){var self=this;var argArray=_.toArray(arguments);return self._collection.findOne(self._getFindSelector(argArray),self._getFindOptions(argArray))}});Mongo.Collection._publishCursor=function(cursor,sub,collection){var observeHandle=cursor.observeChanges({added:function(id,fields){sub.added(collection,id,fields)},changed:function(id,fields){sub.changed(collection,id,fields)},removed:function(id){sub.removed(collection,id)}});sub.onStop(function(){observeHandle.stop()});return observeHandle};Mongo.Collection._rewriteSelector=function(selector){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},fallbackId=_ref.fallbackId;if(LocalCollection._selectorIsId(selector))selector={_id:selector};if(_.isArray(selector)){throw new Error("Mongo selector can't be an array.")}if(!selector||"_id"in selector&&!selector._id){return{_id:fallbackId||Random.id()}}return selector};Mongo.Collection.prototype.insert=function(){function insert(doc,callback){if(!doc){throw new Error("insert requires an argument")}doc=_.extend({},doc);if("_id"in doc){if(!doc._id||!(typeof doc._id==="string"||doc._id instanceof Mongo.ObjectID)){throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs")}}else{var generateId=true;if(this._isRemoteCollection()){var enclosing=DDP._CurrentMethodInvocation.get();if(!enclosing){generateId=false}}if(generateId){doc._id=this._makeNewID()}}var chooseReturnValueFromCollectionResult=function(result){if(doc._id){return doc._id}doc._id=result;return result};var wrappedCallback=wrapCallback(callback,chooseReturnValueFromCollectionResult);if(this._isRemoteCollection()){var result=this._callMutatorMethod("insert",[doc],wrappedCallback);return chooseReturnValueFromCollectionResult(result)}try{var _result=this._collection.insert(doc,wrappedCallback);return chooseReturnValueFromCollectionResult(_result)}catch(e){if(callback){callback(e);return null}throw e}}return insert}();Mongo.Collection.prototype.update=function(){function update(selector,modifier){for(var _len=arguments.length,optionsAndCallback=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){optionsAndCallback[_key-2]=arguments[_key]}var callback=popCallbackFromArgs(optionsAndCallback);var options=_.clone(optionsAndCallback[0])||{};var insertedId=void 0;if(options&&options.upsert){if(options.insertedId){if(!(typeof options.insertedId==="string"||options.insertedId instanceof Mongo.ObjectID))throw new Error("insertedId must be string or ObjectID");insertedId=options.insertedId}else if(!selector||!selector._id){insertedId=this._makeNewID();options.generatedId=true;options.insertedId=insertedId}}selector=Mongo.Collection._rewriteSelector(selector,{fallbackId:insertedId});var wrappedCallback=wrapCallback(callback);if(this._isRemoteCollection()){var args=[selector,modifier,options];return this._callMutatorMethod("update",args,wrappedCallback)}try{return this._collection.update(selector,modifier,options,wrappedCallback)}catch(e){if(callback){callback(e);return null}throw e}}return update}();Mongo.Collection.prototype.remove=function(){function remove(selector,callback){selector=Mongo.Collection._rewriteSelector(selector);var wrappedCallback=wrapCallback(callback);if(this._isRemoteCollection()){return this._callMutatorMethod("remove",[selector],wrappedCallback)}try{return this._collection.remove(selector,wrappedCallback)}catch(e){if(callback){callback(e);return null}throw e}}return remove}();Mongo.Collection.prototype._isRemoteCollection=function(){function _isRemoteCollection(){return this._connection&&this._connection!==Meteor.server}return _isRemoteCollection}();function wrapCallback(callback,convertResult){if(!callback){return}convertResult=convertResult||_.identity;return function(error,result){callback(error,!error&&convertResult(result))}}Mongo.Collection.prototype.upsert=function(){function upsert(selector,modifier,options,callback){if(!callback&&typeof options==="function"){callback=options;options={}}var updateOptions=_.extend({},options,{_returnObject:true,upsert:true});return this.update(selector,modifier,updateOptions,callback)}return upsert}();Mongo.Collection.prototype._ensureIndex=function(index,options){var self=this;if(!self._collection._ensureIndex)throw new Error("Can only call _ensureIndex on server collections");self._collection._ensureIndex(index,options)};Mongo.Collection.prototype._dropIndex=function(index){var self=this;if(!self._collection._dropIndex)throw new Error("Can only call _dropIndex on server collections");self._collection._dropIndex(index)};Mongo.Collection.prototype._dropCollection=function(){var self=this;if(!self._collection.dropCollection)throw new Error("Can only call _dropCollection on server collections");self._collection.dropCollection()};Mongo.Collection.prototype._createCappedCollection=function(byteSize,maxDocuments){var self=this;if(!self._collection._createCappedCollection)throw new Error("Can only call _createCappedCollection on server collections");self._collection._createCappedCollection(byteSize,maxDocuments)};Mongo.Collection.prototype.rawCollection=function(){var self=this;if(!self._collection.rawCollection){throw new Error("Can only call rawCollection on server collections")}return self._collection.rawCollection()};Mongo.Collection.prototype.rawDatabase=function(){var self=this;if(!(self._driver.mongo&&self._driver.mongo.db)){throw new Error("Can only call rawDatabase on server collections")}return self._driver.mongo.db};Mongo.ObjectID=MongoID.ObjectID;Mongo.Cursor=LocalCollection.Cursor;Mongo.Collection.Cursor=Mongo.Cursor;Mongo.Collection.ObjectID=Mongo.ObjectID;Meteor.Collection=Mongo.Collection;_.extend(Meteor.Collection.prototype,AllowDeny.CollectionPrototype);function popCallbackFromArgs(args){if(args.length&&(args[args.length-1]===undefined||args[args.length-1]instanceof Function)){return args.pop()}}}}}}},{extensions:[".js",".json"]});require("./node_modules/meteor/mongo/local_collection_driver.js");require("./node_modules/meteor/mongo/collection.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.mongo={},{Mongo:Mongo})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var Random=Package.random.Random;var Hook=Package["callback-hook"].Hook;var ReactiveVar=Package["reactive-var"].ReactiveVar;var DDP=Package["ddp-client"].DDP;var Mongo=Package.mongo.Mongo;var meteorInstall=Package.modules.meteorInstall;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Symbol=Package["ecmascript-runtime-client"].Symbol;var Map=Package["ecmascript-runtime-client"].Map;var Set=Package["ecmascript-runtime-client"].Set;var Accounts,EXPIRE_TOKENS_INTERVAL_MS,CONNECTION_CLOSE_DELAY_MS;var require=meteorInstall({node_modules:{meteor:{"accounts-base":{"client_main.js":function(require,exports,module){var module1=module;module1.export({AccountsClient:function(){return AccountsClient},AccountsTest:function(){return AccountsTest}});var AccountsClient=void 0;module1.watch(require("./accounts_client.js"),{AccountsClient:function(v){AccountsClient=v}},0);var AccountsTest=void 0;module1.watch(require("./url_client.js"),{AccountsTest:function(v){AccountsTest=v}},1);module1.watch(require("./localstorage_token.js"));Accounts=new AccountsClient;Meteor.users=Accounts.users},"accounts_client.js":function(require,exports,module){var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({AccountsClient:function(){return AccountsClient}});var AccountsCommon=void 0;module.watch(require("./accounts_common.js"),{AccountsCommon:function(v){AccountsCommon=v}},0);var AccountsClient=function(_AccountsCommon){(0,_inherits3.default)(AccountsClient,_AccountsCommon);function AccountsClient(options){(0,_classCallCheck3.default)(this,AccountsClient);var _this=(0,_possibleConstructorReturn3.default)(this,_AccountsCommon.call(this,options));_this._loggingIn=new ReactiveVar(false);_this._loggingOut=new ReactiveVar(false);_this._loginServicesHandle=_this.connection.subscribe("meteor.loginServiceConfiguration");_this._pageLoadLoginCallbacks=[];_this._pageLoadLoginAttemptInfo=null;_this._initUrlMatching();_this._initLocalStorage();_this._loginFuncs={};return _this}AccountsClient.prototype.userId=function(){function userId(){return this.connection.userId()}return userId}();AccountsClient.prototype._setLoggingIn=function(){function _setLoggingIn(x){this._loggingIn.set(x)}return _setLoggingIn}();AccountsClient.prototype.loggingIn=function(){function loggingIn(){return this._loggingIn.get()}return loggingIn}();AccountsClient.prototype.loggingOut=function(){function loggingOut(){return this._loggingOut.get()}return loggingOut}();AccountsClient.prototype.registerClientLoginFunction=function(){function registerClientLoginFunction(funcName,func){if(this._loginFuncs[funcName]){throw new Error(funcName+" has been defined already")}this._loginFuncs[funcName]=func}return registerClientLoginFunction}();AccountsClient.prototype.callLoginFunction=function(){function callLoginFunction(funcName){if(!this._loginFuncs[funcName]){throw new Error(funcName+" was not defined")}for(var _len=arguments.length,funcArgs=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){funcArgs[_key-1]=arguments[_key]}return this._loginFuncs[funcName].apply(this,funcArgs)}return callLoginFunction}();AccountsClient.prototype.applyLoginFunction=function(){function applyLoginFunction(funcName,funcArgs){if(!this._loginFuncs[funcName]){throw new Error(funcName+" was not defined")}return this._loginFuncs[funcName].apply(this,funcArgs)}return applyLoginFunction}();AccountsClient.prototype.logout=function(){function logout(callback){var self=this;self._loggingOut.set(true);self.connection.apply("logout",[],{wait:true},function(error,result){self._loggingOut.set(false);if(error){callback&&callback(error)}else{self.makeClientLoggedOut();callback&&callback()}})}return logout}();AccountsClient.prototype.logoutOtherClients=function(){function logoutOtherClients(callback){var self=this;self.connection.apply("getNewToken",[],{wait:true},function(err,result){if(!err){self._storeLoginToken(self.userId(),result.token,result.tokenExpires)}});self.connection.apply("removeOtherTokens",[],{wait:true},function(err){callback&&callback(err)})}return logoutOtherClients}();return AccountsClient}(AccountsCommon);var Ap=AccountsClient.prototype;Meteor.loggingIn=function(){return Accounts.loggingIn()};Meteor.loggingOut=function(){return Accounts.loggingOut()};Ap.callLoginMethod=function(options){var self=this;options=_.extend({methodName:"login",methodArguments:[{}],_suppressLoggingIn:false},options);_.each(["validateResult","userCallback"],function(f){if(!options[f])options[f]=function(){}});var loginCallbacks=_.once(function(error){if(!error){self._onLoginHook.each(function(callback){callback();return true})}else{self._onLoginFailureHook.each(function(callback){callback({error:error});return true})}options.userCallback.apply(this,arguments)});var reconnected=false;var onResultReceived=function(err,result){if(err||!result||!result.token){}else{if(self._reconnectStopper){self._reconnectStopper.stop()}self._reconnectStopper=DDP.onReconnect(function(conn){if(conn!=self.connection){return}reconnected=true;var storedToken=self._storedLoginToken();if(storedToken){result={token:storedToken,tokenExpires:self._storedLoginTokenExpires()}}if(!result.tokenExpires)result.tokenExpires=self._tokenExpiration(new Date);if(self._tokenExpiresSoon(result.tokenExpires)){self.makeClientLoggedOut()}else{self.callLoginMethod({methodArguments:[{resume:result.token}],_suppressLoggingIn:true,userCallback:function(error){var storedTokenNow=self._storedLoginToken();if(error){if(storedTokenNow&&storedTokenNow===result.token){self.makeClientLoggedOut()}}loginCallbacks(error)}})}})}};var loggedInAndDataReadyCallback=function(error,result){if(reconnected)return;self._setLoggingIn(false);if(error||!result){error=error||new Error("No result from call to "+options.methodName);loginCallbacks(error);return}try{options.validateResult(result)}catch(e){loginCallbacks(e);return}self.makeClientLoggedIn(result.id,result.token,result.tokenExpires);loginCallbacks()};if(!options._suppressLoggingIn)self._setLoggingIn(true);self.connection.apply(options.methodName,options.methodArguments,{wait:true,onResultReceived:onResultReceived},loggedInAndDataReadyCallback)};Ap.makeClientLoggedOut=function(){if(this.connection._userId){this._onLogoutHook.each(function(callback){callback();return true})}this._unstoreLoginToken();this.connection.setUserId(null);this._reconnectStopper&&this._reconnectStopper.stop()};Ap.makeClientLoggedIn=function(userId,token,tokenExpires){this._storeLoginToken(userId,token,tokenExpires);this.connection.setUserId(userId)};Meteor.logout=function(callback){return Accounts.logout(callback)};Meteor.logoutOtherClients=function(callback){return Accounts.logoutOtherClients(callback)};Ap.loginServicesConfigured=function(){return this._loginServicesHandle.ready()};Ap.onPageLoadLogin=function(f){if(this._pageLoadLoginAttemptInfo){f(this._pageLoadLoginAttemptInfo)}else{this._pageLoadLoginCallbacks.push(f)}};Ap._pageLoadLogin=function(attemptInfo){if(this._pageLoadLoginAttemptInfo){Meteor._debug("Ignoring unexpected duplicate page load login attempt info");return}_.each(this._pageLoadLoginCallbacks,function(callback){callback(attemptInfo)});this._pageLoadLoginCallbacks=[];this._pageLoadLoginAttemptInfo=attemptInfo};if(Package.blaze){Package.blaze.Blaze.Template.registerHelper("currentUser",function(){return Meteor.user()});Package.blaze.Blaze.Template.registerHelper("loggingIn",function(){return Meteor.loggingIn()});Package.blaze.Blaze.Template.registerHelper("loggingOut",function(){return Meteor.loggingOut()});Package.blaze.Blaze.Template.registerHelper("loggingInOrOut",function(){return Meteor.loggingIn()||Meteor.loggingOut()})}},"accounts_common.js":function(require,exports,module){var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({AccountsCommon:function(){return AccountsCommon}});var AccountsCommon=function(){function AccountsCommon(options){(0,_classCallCheck3.default)(this,AccountsCommon);this._options={};this.connection=undefined;this._initConnection(options||{});this.users=new Mongo.Collection("users",{_preventAutopublish:true,connection:this.connection});this._onLoginHook=new Hook({bindEnvironment:false,debugPrintExceptions:"onLogin callback"});this._onLoginFailureHook=new Hook({bindEnvironment:false,debugPrintExceptions:"onLoginFailure callback"});this._onLogoutHook=new Hook({bindEnvironment:false,debugPrintExceptions:"onLogout callback"})}AccountsCommon.prototype.userId=function(){function userId(){throw new Error("userId method not implemented")}return userId}();AccountsCommon.prototype.user=function(){function user(){var userId=this.userId();return userId?this.users.findOne(userId):null}return user}();AccountsCommon.prototype.config=function(){function config(options){var self=this;if(Meteor.isServer){__meteor_runtime_config__.accountsConfigCalled=true}else if(!__meteor_runtime_config__.accountsConfigCalled){Meteor._debug("Accounts.config was called on the client but not on the "+"server; some configuration options may not take effect.")}if(_.has(options,"oauthSecretKey")){if(Meteor.isClient)throw new Error("The oauthSecretKey option may only be specified on the server");if(!Package["oauth-encryption"])throw new Error("The oauth-encryption package must be loaded to set oauthSecretKey");Package["oauth-encryption"].OAuthEncryption.loadKey(options.oauthSecretKey);options=_.omit(options,"oauthSecretKey")}var VALID_KEYS=["sendVerificationEmail","forbidClientAccountCreation","passwordEnrollTokenExpirationInDays","restrictCreationByEmailDomain","loginExpirationInDays","passwordResetTokenExpirationInDays","ambiguousErrorMessages"];_.each(_.keys(options),function(key){if(!_.contains(VALID_KEYS,key)){throw new Error("Accounts.config: Invalid key: "+key)}});_.each(VALID_KEYS,function(key){if(key in options){if(key in self._options){throw new Error("Can't set `"+key+"` more than once")}self._options[key]=options[key]}})}return config}();AccountsCommon.prototype.onLogin=function(){function onLogin(func){return this._onLoginHook.register(func)}return onLogin}();AccountsCommon.prototype.onLoginFailure=function(){function onLoginFailure(func){return this._onLoginFailureHook.register(func)}return onLoginFailure}();AccountsCommon.prototype.onLogout=function(){function onLogout(func){return this._onLogoutHook.register(func)}return onLogout}();AccountsCommon.prototype._initConnection=function(){function _initConnection(options){if(!Meteor.isClient){return}if(options.connection){this.connection=options.connection}else if(options.ddpUrl){this.connection=DDP.connect(options.ddpUrl)}else if(typeof __meteor_runtime_config__!=="undefined"&&__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL){this.connection=DDP.connect(__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL)}else{this.connection=Meteor.connection}}return _initConnection}();AccountsCommon.prototype._getTokenLifetimeMs=function(){function _getTokenLifetimeMs(){var loginExpirationInDays=this._options.loginExpirationInDays===null?LOGIN_UNEXPIRING_TOKEN_DAYS:this._options.loginExpirationInDays;return(loginExpirationInDays||DEFAULT_LOGIN_EXPIRATION_DAYS)*24*60*60*1e3}return _getTokenLifetimeMs}();AccountsCommon.prototype._getPasswordResetTokenLifetimeMs=function(){function _getPasswordResetTokenLifetimeMs(){return(this._options.passwordResetTokenExpirationInDays||DEFAULT_PASSWORD_RESET_TOKEN_EXPIRATION_DAYS)*24*60*60*1e3}return _getPasswordResetTokenLifetimeMs}();AccountsCommon.prototype._getPasswordEnrollTokenLifetimeMs=function(){function _getPasswordEnrollTokenLifetimeMs(){return(this._options.passwordEnrollTokenExpirationInDays||DEFAULT_PASSWORD_ENROLL_TOKEN_EXPIRATION_DAYS)*24*60*60*1e3}return _getPasswordEnrollTokenLifetimeMs}();AccountsCommon.prototype._tokenExpiration=function(){function _tokenExpiration(when){return new Date(new Date(when).getTime()+this._getTokenLifetimeMs())}return _tokenExpiration}();AccountsCommon.prototype._tokenExpiresSoon=function(){function _tokenExpiresSoon(when){var minLifetimeMs=.1*this._getTokenLifetimeMs();var minLifetimeCapMs=MIN_TOKEN_LIFETIME_CAP_SECS*1e3;if(minLifetimeMs>minLifetimeCapMs)minLifetimeMs=minLifetimeCapMs;return new Date>new Date(when)-minLifetimeMs}return _tokenExpiresSoon}();return AccountsCommon}();var Ap=AccountsCommon.prototype;Meteor.userId=function(){return Accounts.userId()};Meteor.user=function(){return Accounts.user()};var DEFAULT_LOGIN_EXPIRATION_DAYS=90;Ap.DEFAULT_LOGIN_EXPIRATION_DAYS=DEFAULT_LOGIN_EXPIRATION_DAYS;var DEFAULT_PASSWORD_RESET_TOKEN_EXPIRATION_DAYS=3;var DEFAULT_PASSWORD_ENROLL_TOKEN_EXPIRATION_DAYS=30;var MIN_TOKEN_LIFETIME_CAP_SECS=3600;EXPIRE_TOKENS_INTERVAL_MS=600*1e3;CONNECTION_CLOSE_DELAY_MS=10*1e3;var LOGIN_UNEXPIRING_TOKEN_DAYS=365*100;Ap.LOGIN_UNEXPIRING_TOKEN_DAYS=LOGIN_UNEXPIRING_TOKEN_DAYS;Meteor.startup(function(){var ServiceConfiguration=Package["service-configuration"].ServiceConfiguration;Ap.loginServiceConfiguration=ServiceConfiguration.configurations;Ap.ConfigError=ServiceConfiguration.ConfigError});var lceName="Accounts.LoginCancelledError";Ap.LoginCancelledError=Meteor.makeErrorType(lceName,function(description){this.message=description});Ap.LoginCancelledError.prototype.name=lceName;Ap.LoginCancelledError.numericError=145546287},"localstorage_token.js":function(require,exports,module){var AccountsClient=void 0;module.watch(require("./accounts_client.js"),{AccountsClient:function(v){AccountsClient=v}},0);var Ap=AccountsClient.prototype;Meteor.loginWithToken=function(token,callback){return Accounts.loginWithToken(token,callback)};Ap.loginWithToken=function(token,callback){this.callLoginMethod({methodArguments:[{resume:token}],userCallback:callback})};Ap._enableAutoLogin=function(){this._autoLoginEnabled=true;this._pollStoredLoginToken()};Ap._isolateLoginTokenForTest=function(){this.LOGIN_TOKEN_KEY=this.LOGIN_TOKEN_KEY+Random.id();this.USER_ID_KEY=this.USER_ID_KEY+Random.id()};Ap._storeLoginToken=function(userId,token,tokenExpires){Meteor._localStorage.setItem(this.USER_ID_KEY,userId);Meteor._localStorage.setItem(this.LOGIN_TOKEN_KEY,token);if(!tokenExpires)tokenExpires=this._tokenExpiration(new Date);Meteor._localStorage.setItem(this.LOGIN_TOKEN_EXPIRES_KEY,tokenExpires);this._lastLoginTokenWhenPolled=token};Ap._unstoreLoginToken=function(){Meteor._localStorage.removeItem(this.USER_ID_KEY);Meteor._localStorage.removeItem(this.LOGIN_TOKEN_KEY);Meteor._localStorage.removeItem(this.LOGIN_TOKEN_EXPIRES_KEY);this._lastLoginTokenWhenPolled=null};Ap._storedLoginToken=function(){return Meteor._localStorage.getItem(this.LOGIN_TOKEN_KEY)};Ap._storedLoginTokenExpires=function(){return Meteor._localStorage.getItem(this.LOGIN_TOKEN_EXPIRES_KEY)};Ap._storedUserId=function(){return Meteor._localStorage.getItem(this.USER_ID_KEY)};Ap._unstoreLoginTokenIfExpiresSoon=function(){var tokenExpires=this._storedLoginTokenExpires();if(tokenExpires&&this._tokenExpiresSoon(new Date(tokenExpires))){this._unstoreLoginToken()}};Ap._initLocalStorage=function(){var self=this;self.LOGIN_TOKEN_KEY="Meteor.loginToken";self.LOGIN_TOKEN_EXPIRES_KEY="Meteor.loginTokenExpires";self.USER_ID_KEY="Meteor.userId";var rootUrlPathPrefix=__meteor_runtime_config__.ROOT_URL_PATH_PREFIX;if(rootUrlPathPrefix||this.connection!==Meteor.connection){var namespace=":"+this.connection._stream.rawUrl;if(rootUrlPathPrefix){namespace+=":"+rootUrlPathPrefix}self.LOGIN_TOKEN_KEY+=namespace;self.LOGIN_TOKEN_EXPIRES_KEY+=namespace;self.USER_ID_KEY+=namespace}if(self._autoLoginEnabled){self._unstoreLoginTokenIfExpiresSoon();var token=self._storedLoginToken();if(token){var userId=self._storedUserId();userId&&self.connection.setUserId(userId);self.loginWithToken(token,function(err){if(err){Meteor._debug("Error logging in with token: "+err);self.makeClientLoggedOut()}self._pageLoadLogin({type:"resume",allowed:!err,error:err,methodName:"login",methodArguments:[{resume:token}]})})}}self._lastLoginTokenWhenPolled=token;if(self._pollIntervalTimer){clearInterval(self._pollIntervalTimer)}self._pollIntervalTimer=setInterval(function(){self._pollStoredLoginToken()},3e3)};Ap._pollStoredLoginToken=function(){var self=this;if(!self._autoLoginEnabled){return}var currentLoginToken=self._storedLoginToken();if(self._lastLoginTokenWhenPolled!=currentLoginToken){if(currentLoginToken){self.loginWithToken(currentLoginToken,function(err){if(err){self.makeClientLoggedOut()}})}else{self.logout()}}self._lastLoginTokenWhenPolled=currentLoginToken}},"url_client.js":function(require,exports,module){module.export({AccountsTest:function(){return AccountsTest}});var AccountsClient=void 0;module.watch(require("./accounts_client.js"),{AccountsClient:function(v){AccountsClient=v}},0);var Ap=AccountsClient.prototype;var accountsPaths=["reset-password","verify-email","enroll-account"];var savedHash=window.location.hash;Ap._initUrlMatching=function(){this._autoLoginEnabled=true;this._accountsCallbacks={};this._attemptToMatchHash()};Ap._attemptToMatchHash=function(){attemptToMatchHash(this,savedHash,defaultSuccessHandler)};function attemptToMatchHash(accounts,hash,success){_.each(accountsPaths,function(urlPart){var token;var tokenRegex=new RegExp("^\\#\\/"+urlPart+"\\/(.*)$");var match=hash.match(tokenRegex);if(match){token=match[1];if(urlPart==="reset-password"){accounts._resetPasswordToken=token}else if(urlPart==="verify-email"){accounts._verifyEmailToken=token}else if(urlPart==="enroll-account"){accounts._enrollAccountToken=token}}else{return}window.location.hash="";success.call(accounts,token,urlPart)})}function defaultSuccessHandler(token,urlPart){var self=this;self._autoLoginEnabled=false;Meteor.startup(function(){if(self._accountsCallbacks[urlPart]){self._accountsCallbacks[urlPart](token,function(){self._enableAutoLogin()})}})}var AccountsTest={attemptToMatchHash:function(hash,success){return attemptToMatchHash(Accounts,hash,success)}};Ap.onResetPasswordLink=function(callback){if(this._accountsCallbacks["reset-password"]){Meteor._debug("Accounts.onResetPasswordLink was called more than once. "+"Only one callback added will be executed.")}this._accountsCallbacks["reset-password"]=callback};Ap.onEmailVerificationLink=function(callback){if(this._accountsCallbacks["verify-email"]){Meteor._debug("Accounts.onEmailVerificationLink was called more than once. "+"Only one callback added will be executed.")}this._accountsCallbacks["verify-email"]=callback};Ap.onEnrollmentLink=function(callback){if(this._accountsCallbacks["enroll-account"]){Meteor._debug("Accounts.onEnrollmentLink was called more than once. "+"Only one callback added will be executed.")}this._accountsCallbacks["enroll-account"]=callback}}}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/accounts-base/client_main.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["accounts-base"]=exports,{Accounts:Accounts})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var Accounts=Package["accounts-base"].Accounts;var SRP=Package.srp.SRP;var SHA256=Package.sha.SHA256;var EJSON=Package.ejson.EJSON;var DDP=Package["ddp-client"].DDP;var check=Package.check.check;var Match=Package.check.Match;var _=Package.underscore._;var meteorInstall=Package.modules.meteorInstall;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Symbol=Package["ecmascript-runtime-client"].Symbol;var Map=Package["ecmascript-runtime-client"].Map;var Set=Package["ecmascript-runtime-client"].Set;var require=meteorInstall({node_modules:{meteor:{"accounts-password":{"password_client.js":function(){function reportError(error,callback){if(callback){callback(error)}else{throw error}}Meteor.loginWithPassword=function(selector,password,callback){if(typeof selector==="string")if(selector.indexOf("@")===-1)selector={username:selector};else selector={email:selector};Accounts.callLoginMethod({methodArguments:[{user:selector,password:Accounts._hashPassword(password)}],userCallback:function(error,result){if(error&&error.error===400&&error.reason==="old password format"){srpUpgradePath({upgradeError:error,userSelector:selector,plaintextPassword:password},callback)}else if(error){reportError(error,callback)}else{callback&&callback()}}})};Accounts._hashPassword=function(password){return{digest:SHA256(password),algorithm:"sha-256"}};var srpUpgradePath=function(options,callback){var details;try{details=EJSON.parse(options.upgradeError.details)}catch(e){}if(!(details&&details.format==="srp")){reportError(new Meteor.Error(400,"Password is old. Please reset your "+"password."),callback)}else{Accounts.callLoginMethod({methodArguments:[{user:options.userSelector,srp:SHA256(details.identity+":"+options.plaintextPassword),password:Accounts._hashPassword(options.plaintextPassword)}],userCallback:callback})}};Accounts.createUser=function(options,callback){options=_.clone(options);if(typeof options.password!=="string")throw new Error("options.password must be a string");if(!options.password){return reportError(new Meteor.Error(400,"Password may not be empty"),callback)}options.password=Accounts._hashPassword(options.password);Accounts.callLoginMethod({methodName:"createUser",methodArguments:[options],userCallback:callback})};Accounts.changePassword=function(oldPassword,newPassword,callback){if(!Meteor.user()){return reportError(new Error("Must be logged in to change password."),callback)}check(newPassword,String);if(!newPassword){return reportError(new Meteor.Error(400,"Password may not be empty"),callback)}Accounts.connection.apply("changePassword",[oldPassword?Accounts._hashPassword(oldPassword):null,Accounts._hashPassword(newPassword)],function(error,result){if(error||!result){if(error&&error.error===400&&error.reason==="old password format"){srpUpgradePath({upgradeError:error,userSelector:{id:Meteor.userId()},plaintextPassword:oldPassword},function(err){if(err){reportError(err,callback)}else{Accounts.changePassword(oldPassword,newPassword,callback)}})}else{reportError(error||new Error("No result from changePassword."),callback)}}else{callback&&callback()}})};Accounts.forgotPassword=function(options,callback){if(!options.email){return reportError(new Meteor.Error(400,"Must pass options.email"),callback)}if(callback){Accounts.connection.call("forgotPassword",options,callback)}else{Accounts.connection.call("forgotPassword",options)}};Accounts.resetPassword=function(token,newPassword,callback){check(token,String);check(newPassword,String);if(!newPassword){return reportError(new Meteor.Error(400,"Password may not be empty"),callback)}Accounts.callLoginMethod({methodName:"resetPassword",methodArguments:[token,Accounts._hashPassword(newPassword)],userCallback:callback})};Accounts.verifyEmail=function(token,callback){if(!token){return reportError(new Meteor.Error(400,"Need to pass token"),callback)}Accounts.callLoginMethod({methodName:"verifyEmail",methodArguments:[token],userCallback:callback})}}}}}},{extensions:[".js",".json"]});require("./node_modules/meteor/accounts-password/password_client.js");if(typeof Package==="undefined")Package={};Package["accounts-password"]={}})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var HTTP=Package.http.HTTP;var meteorInstall=Package.modules.meteorInstall;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Symbol=Package["ecmascript-runtime-client"].Symbol;var Map=Package["ecmascript-runtime-client"].Map;var Set=Package["ecmascript-runtime-client"].Set;var require=meteorInstall({node_modules:{meteor:{"ostrio:cookies":{"cookies.js":function(require,exports,module){var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({Cookies:function(){return Cookies}});var _=void 0;module.watch(require("meteor/underscore"),{_:function(v){_=v}},0);var Meteor=void 0;module.watch(require("meteor/meteor"),{Meteor:function(v){Meteor=v}},1);var HTTP=void 0;var WebApp=void 0;if(Meteor.isServer){WebApp=require("meteor/webapp").WebApp}else{HTTP=require("meteor/http").HTTP}var NoOp=function(){};var urlRE=/\/___cookie___\/set/;var decode=decodeURIComponent;var encode=encodeURIComponent;var pairSplitRegExp=/; */;var fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;var parse=function(str,options){if(typeof str!=="string"){throw new Meteor.Error(404,"argument str must be a string")}var obj={};var opt=options||{};var val=void 0;var key=void 0;var eqIndx=void 0;str.split(pairSplitRegExp).forEach(function(pair){eqIndx=pair.indexOf("=");if(eqIndx<0){return}key=pair.substr(0,eqIndx).trim();val=pair.substr(++eqIndx,pair.length).trim();if(val[0]==='"'){val=val.slice(1,-1)}if(void 0===obj[key]){obj[key]=tryDecode(val,opt.decode||decode)}});return obj};var serialize=function(key,val){var opt=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var name=void 0;if(!fieldContentRegExp.test(key)){name=escape(key)}else{name=key}var value=void 0;if(!_.isUndefined(val)){value=encode(val);if(value&&!fieldContentRegExp.test(value)){value=escape(value)}}else{value=""}var pairs=[name+"="+value];if(_.isNumber(opt.maxAge)){pairs.push("Max-Age="+opt.maxAge)}if(opt.domain&&_.isString(opt.domain)){if(!fieldContentRegExp.test(opt.domain)){throw new Meteor.Error(404,"option domain is invalid")}pairs.push("Domain="+opt.domain)}if(opt.path&&_.isString(opt.path)){if(!fieldContentRegExp.test(opt.path)){throw new Meteor.Error(404,"option path is invalid")}pairs.push("Path="+opt.path)}opt.expires=opt.expires||opt.expire||false;if(opt.expires===Infinity){pairs.push("Expires=Fri, 31 Dec 9999 23:59:59 GMT")}else if(opt.expires instanceof Date){pairs.push("Expires="+opt.expires.toUTCString())}else if(opt.expires===0){pairs.push("Expires=0")}else if(_.isNumber(opt.expires)){pairs.push("Expires="+new Date(opt.expires).toUTCString())}if(opt.httpOnly){pairs.push("HttpOnly")}if(opt.secure){pairs.push("Secure")}if(opt.firstPartyOnly){pairs.push("First-Party-Only")}if(opt.sameSite){pairs.push("SameSite")}return pairs.join("; ")};var tryDecode=function(str,d){try{return d(str)}catch(e){return str}};var __cookies=function(){function __cookies(_cookies,TTL,runOnServer,response){(0,_classCallCheck3.default)(this,__cookies);this.TTL=TTL;this.response=response;this.runOnServer=runOnServer;if(_.isObject(_cookies)){this.cookies=_cookies}else{this.cookies=parse(_cookies)}}__cookies.prototype.get=function(){function get(key,_tmp){var _cs=_tmp?parse(_tmp):this.cookies;if(!key||!_cs){return void 0}if(_cs.hasOwnProperty(key)){return _cs[key]}return void 0}return get}();__cookies.prototype.set=function(){function set(key,value){var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(key&&!_.isUndefined(value)){if(_.isNumber(this.TTL)&&opts.expires===undefined){opts.expires=new Date(+new Date+this.TTL)}var newCookie=serialize(key,value,opts);this.cookies[key]=value;if(Meteor.isClient){document.cookie=newCookie}else{this.response.setHeader("Set-Cookie",newCookie)}return true}return false}return set}();__cookies.prototype.remove=function(){function remove(key){var path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"/";var domain=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(key&&this.cookies.hasOwnProperty(key)){var newCookie=serialize(key,"",{domain:domain,path:path,expires:new Date(0)});delete this.cookies[key];if(Meteor.isClient){document.cookie=newCookie}else{this.response.setHeader("Set-Cookie",newCookie)}return true}else if(!key&&this.keys().length>0&&this.keys()[0]!==""){var keys=Object.keys(this.cookies);for(var i=0;i<keys.length;i++){this.remove(keys[i])}return true}return false}return remove}();__cookies.prototype.has=function(){function has(key,_tmp){var _cs=_tmp?parse(_tmp):this.cookies;if(!key||!_cs){return false}return _cs.hasOwnProperty(key)}return has}();__cookies.prototype.keys=function(){function keys(){if(this.cookies){return Object.keys(this.cookies)}return[]}return keys}();__cookies.prototype.send=function(){function send(){var cb=arguments.length>0&&arguments[0]!==undefined?arguments[0]:NoOp;if(Meteor.isServer){cb(new Meteor.Error(400,"Can't run `.send()` on server, it's Client only method!"))}if(this.runOnServer){HTTP.get((window.__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+"/___cookie___/set",cb)}else{cb(new Meteor.Error(400,"Can't send cookies on server when `runOnServer` is false."))}return void 0}return send}();return __cookies}();var __middlewareHandler=function(req,res,self){var _cookies={};if(self.runOnServer){if(req.headers&&req.headers.cookie){_cookies=parse(req.headers.cookie)}return new __cookies(_cookies,self.TTL,self.runOnServer,res)}throw new Meteor.Error(400,"Can't use middleware when `runOnServer` is false.")};var Cookies=function(_cookies2){(0,_inherits3.default)(Cookies,_cookies2);function Cookies(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};(0,_classCallCheck3.default)(this,Cookies);opts.TTL=_.isNumber(opts.TTL)?opts.TTL:false;opts.runOnServer=opts.runOnServer!==false?true:false;if(Meteor.isClient){var _this=(0,_possibleConstructorReturn3.default)(this,_cookies2.call(this,document.cookie,opts.TTL,opts.runOnServer))}else{var _this=(0,_possibleConstructorReturn3.default)(this,_cookies2.call(this,{},opts.TTL,opts.runOnServer));opts.auto=opts.auto!==false?true:false;_this.handler=opts.handler||function(){};_this.runOnServer=opts.runOnServer;if(_this.runOnServer){if(!Cookies.isLoadedOnServer){if(opts.auto){WebApp.connectHandlers.use(function(req,res,next){if(urlRE.test(req._parsedUrl.path)){if(req.headers&&req.headers.cookie){var _cObj=parse(req.headers.cookie);var _cKeys=Object.keys(_cObj);var _cArr=[];var _cStr=void 0;for(var i=0;i<_cKeys.length;i++){_cStr=serialize(_cKeys[i],_cObj[_cKeys[i]]);if(!~_cArr.indexOf(_cStr)){_cArr.push(_cStr)}}res.setHeader("Set-Cookie",_cArr)}res.writeHead(200);res.end("")}else{req.Cookies=__middlewareHandler(req,res,_this);next()}})}Cookies.isLoadedOnServer=true}}}return(0,_possibleConstructorReturn3.default)(_this)}Cookies.prototype.middleware=function(){function middleware(){var _this2=this;if(!Meteor.isServer){throw new Meteor.Error(500,"[ostrio:cookies] Can't use `.middleware()` on Client, it's Server only!")}return function(req,res,next){_this2.handler&&_this2.handler(__middlewareHandler(req,res,_this2));next()}}return middleware}();return Cookies}(__cookies);if(Meteor.isServer){Cookies.isLoadedOnServer=false}}}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/ostrio:cookies/cookies.js");if(typeof Package==="undefined")Package={};Package["ostrio:cookies"]=exports})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var ReactiveVar=Package["reactive-var"].ReactiveVar;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var HTTP=Package.http.HTTP;var Mongo=Package.mongo.Mongo;var _=Package.underscore._;var check=Package.check.check;var Match=Package.check.Match;var Random=Package.random.Random;var meteorInstall=Package.modules.meteorInstall;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Symbol=Package["ecmascript-runtime-client"].Symbol;var Map=Package["ecmascript-runtime-client"].Map;var Set=Package["ecmascript-runtime-client"].Set;var FilesCollection;var require=meteorInstall({node_modules:{meteor:{"ostrio:files":{"client.js":function(require,exports,module){var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({FilesCollection:function(){return FilesCollection}});var _=void 0;module.watch(require("meteor/underscore"),{_:function(v){_=v}},0);var Mongo=void 0;module.watch(require("meteor/mongo"),{Mongo:function(v){Mongo=v}},1);var Meteor=void 0;module.watch(require("meteor/meteor"),{Meteor:function(v){Meteor=v}},2);var Cookies=void 0;module.watch(require("meteor/ostrio:cookies"),{Cookies:function(v){Cookies=v}},3);var formatFleURL=void 0;module.watch(require("./lib.js"),{formatFleURL:function(v){formatFleURL=v}},4);var check=void 0,Match=void 0;module.watch(require("meteor/check"),{check:function(v){check=v},Match:function(v){Match=v}},5);var UploadInstance=void 0;module.watch(require("./upload.js"),{UploadInstance:function(v){UploadInstance=v}},6);var FilesCollectionCore=void 0;module.watch(require("./core.js"),{default:function(v){FilesCollectionCore=v}},7);var NOOP=function(){};var FilesCollection=function(_FilesCollectionCore){(0,_inherits3.default)(FilesCollection,_FilesCollectionCore);function FilesCollection(config){(0,_classCallCheck3.default)(this,FilesCollection);var _this=(0,_possibleConstructorReturn3.default)(this,_FilesCollectionCore.call(this));if(config){_this.ddp=config.ddp;_this.debug=config.debug;_this.schema=config.schema;_this.public=config.public;_this.chunkSize=config.chunkSize;_this.collection=config.collection;_this.downloadRoute=config.downloadRoute;_this.disableUpload=config.disableUpload;_this.namingFunction=config.namingFunction;_this.collectionName=config.collectionName;_this.onBeforeUpload=config.onBeforeUpload;_this.allowClientCode=config.allowClientCode;_this.onbeforeunloadMessage=config.onbeforeunloadMessage}var self=_this;var cookie=new Cookies;if(!_.isBoolean(_this.debug)){_this.debug=false}if(!_.isBoolean(_this.public)){_this.public=false}if(!_this.chunkSize){_this.chunkSize=1024*512}_this.chunkSize=Math.floor(_this.chunkSize/8)*8;if(!_.isString(_this.collectionName)&&!_this.collection){_this.collectionName="MeteorUploadFiles"}if(!_this.collection){_this.collection=new Mongo.Collection(_this.collectionName)}else{_this.collectionName=_this.collection._name}_this.collection.filesCollection=_this;check(_this.collectionName,String);if(_this.public&&!_this.downloadRoute){throw new Meteor.Error(500,"[FilesCollection."+_this.collectionName+']: "downloadRoute" must be precisely provided on "public" collections! Note: "downloadRoute" must be equal or be inside of your web/proxy-server (relative) root.')}if(!_.isBoolean(_this.disableUpload)){_this.disableUpload=false}if(!_.isString(_this.downloadRoute)){_this.downloadRoute="/cdn/storage"}_this.downloadRoute=_this.downloadRoute.replace(/\/$/,"");if(!_.isFunction(_this.namingFunction)){_this.namingFunction=false}if(!_.isFunction(_this.onBeforeUpload)){_this.onBeforeUpload=false}if(!_.isBoolean(_this.allowClientCode)){_this.allowClientCode=true}if(!_this.ddp){_this.ddp=Meteor}if(!_this.onbeforeunloadMessage){_this.onbeforeunloadMessage="Upload in a progress... Do you want to abort?"}var setTokenCookie=function(){if(!cookie.has("x_mtok")&&Meteor.connection._lastSessionId||cookie.has("x_mtok")&&cookie.get("x_mtok")!==Meteor.connection._lastSessionId){cookie.set("x_mtok",Meteor.connection._lastSessionId,{path:"/"})}};var unsetTokenCookie=function(){if(cookie.has("x_mtok")){cookie.remove("x_mtok","/")}};if(typeof Accounts!=="undefined"&&Accounts!==null){Meteor.startup(function(){setTokenCookie()});Accounts.onLogin(function(){setTokenCookie()});Accounts.onLogout(function(){unsetTokenCookie()})}check(_this.onbeforeunloadMessage,Match.OneOf(String,Function));try{var _URL=window.URL||window.webkitURL||window.mozURL||window.msURL||window.oURL||false;if(window.Worker&&window.Blob&&_URL){_this._supportWebWorker=true;_this._webWorkerUrl=_URL.createObjectURL(new Blob(['!function(a){"use strict";a.onmessage=function(b){var c=b.data.f.slice(b.data.cs*(b.data.cc-1),b.data.cs*b.data.cc);if(b.data.ib===!0)postMessage({bin:c,chunkId:b.data.cc});else{var d;a.FileReader?(d=new FileReader,d.onloadend=function(a){postMessage({bin:(d.result||a.srcElement||a.target).split(",")[1],chunkId:b.data.cc,s:b.data.s})},d.onerror=function(a){throw(a.target||a.srcElement).error},d.readAsDataURL(c)):a.FileReaderSync?(d=new FileReaderSync,postMessage({bin:d.readAsDataURL(c).split(",")[1],chunkId:b.data.cc})):postMessage({bin:null,chunkId:b.data.cc,error:"File API is not supported in WebWorker!"})}}}(this);'],{type:"application/javascript"}))}else if(window.Worker){_this._supportWebWorker=true;_this._webWorkerUrl=Meteor.absoluteUrl("packages/ostrio_files/worker.min.js")}else{_this._supportWebWorker=false}}catch(e){self._debug("[FilesCollection] [Check WebWorker Availability] Error:",e);_this._supportWebWorker=false}if(!_this.schema){_this.schema={size:{type:Number},name:{type:String},type:{type:String},path:{type:String},isVideo:{type:Boolean},isAudio:{type:Boolean},isImage:{type:Boolean},isText:{type:Boolean},isJSON:{type:Boolean},isPDF:{type:Boolean},extension:{type:String,optional:true},_storagePath:{type:String},_downloadRoute:{type:String},_collectionName:{type:String},public:{type:Boolean,optional:true},meta:{type:Object,blackbox:true,optional:true},userId:{type:String,optional:true},updatedAt:{type:Date,optional:true},versions:{type:Object,blackbox:true}}}check(_this.debug,Boolean);check(_this.schema,Object);check(_this.public,Boolean);check(_this.chunkSize,Number);check(_this.downloadRoute,String);check(_this.disableUpload,Boolean);check(_this.namingFunction,Match.OneOf(false,Function));check(_this.onBeforeUpload,Match.OneOf(false,Function));check(_this.allowClientCode,Boolean);check(_this.ddp,Match.Any);_this._methodNames={_Abort:"_FilesCollectionAbort_"+_this.collectionName,_Write:"_FilesCollectionWrite_"+_this.collectionName,_Start:"_FilesCollectionStart_"+_this.collectionName,_Remove:"_FilesCollectionRemove_"+_this.collectionName};return _this}FilesCollection.prototype._getMimeType=function(){function _getMimeType(fileData){var mime=void 0;check(fileData,Object);if(_.isObject(fileData)){mime=fileData.type}if(!mime||!_.isString(mime)){mime="application/octet-stream"}return mime}return _getMimeType}();FilesCollection.prototype._getUser=function(){function _getUser(){var result={user:function(){return null},userId:null};if(_.isFunction(Meteor.userId)){result.user=function(){return Meteor.user()};result.userId=Meteor.userId()}return result}return _getUser}();FilesCollection.prototype.insert=function(){function insert(config){var autoStart=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(this.disableUpload){console.warn("[FilesCollection] [insert()] Upload is disabled with [disableUpload]!");return{}}return new UploadInstance(config,this)[autoStart?"start":"manual"]()}return insert}();FilesCollection.prototype.remove=function(){function remove(){var selector=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var callback=arguments[1];this._debug("[FilesCollection] [remove("+JSON.stringify(selector)+")]");check(selector,Match.OneOf(Object,String));check(callback,Match.Optional(Function));if(this.allowClientCode){this.ddp.call(this._methodNames._Remove,selector,callback||NOOP)}else{callback&&callback(new Meteor.Error(401,"[FilesCollection] [remove] Run code from client is not allowed!"));this._debug("[FilesCollection] [remove] Run code from client is not allowed!")}return this}return remove}();return FilesCollection}(FilesCollectionCore);Meteor.startup(function(){if(typeof Template!=="undefined"&&Template!==null){Template.registerHelper("fileURL",function(fileRef){var version=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"original";if(!_.isObject(fileRef)){return""}version=!_.isString(version)?"original":version;return formatFleURL(fileRef,version)})}})},"core.js":function(require,exports,module){var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({default:function(){return FilesCollectionCore}});var _=void 0;module.watch(require("meteor/underscore"),{_:function(v){_=v}},0);var EventEmitter=void 0;module.watch(require("eventemitter3"),{EventEmitter:function(v){EventEmitter=v}},1);var formatFleURL=void 0;module.watch(require("./lib.js"),{formatFleURL:function(v){formatFleURL=v}},2);var check=void 0,Match=void 0;module.watch(require("meteor/check"),{check:function(v){check=v},Match:function(v){Match=v}},3);var FilesCursor=void 0,FileCursor=void 0;module.watch(require("./cursor.js"),{FilesCursor:function(v){FilesCursor=v},FileCursor:function(v){FileCursor=v}},4);var FilesCollectionCore=function(_EventEmitter){(0,_inherits3.default)(FilesCollectionCore,_EventEmitter);function FilesCollectionCore(){(0,_classCallCheck3.default)(this,FilesCollectionCore);return(0,_possibleConstructorReturn3.default)(this,_EventEmitter.call(this))}FilesCollectionCore.prototype._debug=function(){function _debug(){if(this.debug){(console.info||console.log||function(){}).apply(undefined,arguments)}}return _debug}();FilesCollectionCore.prototype._getFileName=function(){function _getFileName(fileData){var fileName=fileData.name||fileData.fileName;if(_.isString(fileName)&&fileName.length>0){return(fileData.name||fileData.fileName).replace(/\.\./g,"").replace(/\//g,"")}return""}return _getFileName}();FilesCollectionCore.prototype._getExt=function(){function _getExt(fileName){if(!!~fileName.indexOf(".")){var extension=(fileName.split(".").pop().split("?")[0]||"").toLowerCase();return{ext:extension,extension:extension,extensionWithDot:"."+extension}}return{ext:"",extension:"",extensionWithDot:""}}return _getExt}();FilesCollectionCore.prototype._updateFileTypes=function(){function _updateFileTypes(data){data.isVideo=/^video\//i.test(data.type);data.isAudio=/^audio\//i.test(data.type);data.isImage=/^image\//i.test(data.type);data.isText=/^text\//i.test(data.type);data.isJSON=/^application\/json$/i.test(data.type);data.isPDF=/^application\/(x-)?pdf$/i.test(data.type)}return _updateFileTypes}();FilesCollectionCore.prototype._dataToSchema=function(){function _dataToSchema(data){var ds={name:data.name,extension:data.extension,path:data.path,meta:data.meta,type:data.type,size:data.size,userId:data.userId||null,versions:{original:{path:data.path,size:data.size,type:data.type,extension:data.extension}},_downloadRoute:data._downloadRoute||this.downloadRoute,_collectionName:data._collectionName||this.collectionName};if(data.fileId){ds._id=data.fileId}this._updateFileTypes(ds);ds._storagePath=data._storagePath||this.storagePath(_.extend(data,ds));return ds}return _dataToSchema}();FilesCollectionCore.prototype.findOne=function(){function findOne(){var selector=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var options=arguments[1];this._debug("[FilesCollection] [findOne("+JSON.stringify(selector)+", "+JSON.stringify(options)+")]");check(selector,Match.Optional(Match.OneOf(Object,String,Boolean,Number,null)));check(options,Match.Optional(Object));var doc=this.collection.findOne(selector,options);if(doc){return new FileCursor(doc,this)}return doc}return findOne}();FilesCollectionCore.prototype.find=function(){function find(){var selector=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var options=arguments[1];this._debug("[FilesCollection] [find("+JSON.stringify(selector)+", "+JSON.stringify(options)+")]");check(selector,Match.Optional(Match.OneOf(Object,String,Boolean,Number,null)));check(options,Match.Optional(Object));return new FilesCursor(selector,options,this)}return find}();FilesCollectionCore.prototype.update=function(){function update(){this.collection.update.apply(this.collection,arguments);return this.collection}return update}();FilesCollectionCore.prototype.link=function(){function link(fileRef){var version=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"original";this._debug("[FilesCollection] [link("+(_.isObject(fileRef)?fileRef._id:undefined)+", "+version+")]");check(fileRef,Object);check(version,String);if(!fileRef){return""}return formatFleURL(fileRef,version)}return link}();return FilesCollectionCore}(EventEmitter)},"cursor.js":function(require,exports,module){var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({FileCursor:function(){return FileCursor},FilesCursor:function(){return FilesCursor}});var _=void 0;module.watch(require("meteor/underscore"),{_:function(v){_=v}},0);var Meteor=void 0;module.watch(require("meteor/meteor"),{Meteor:function(v){Meteor=v}},1);var FileCursor=function(){function FileCursor(_fileRef,_collection){(0,_classCallCheck3.default)(this,FileCursor);this._fileRef=_fileRef;this._collection=_collection;Object.assign(this,_fileRef)}FileCursor.prototype.remove=function(){function remove(callback){this._collection._debug("[FilesCollection] [FileCursor] [remove()]");if(this._fileRef){this._collection.remove(this._fileRef._id,callback)}else{callback&&callback(new Meteor.Error(404,"No such file"))}return this}return remove}();FileCursor.prototype.link=function(){function link(){var version=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"original";this._collection._debug("[FilesCollection] [FileCursor] [link("+version+")]");if(this._fileRef){return this._collection.link(this._fileRef,version)}return""}return link}();FileCursor.prototype.get=function(){function get(property){this._collection._debug("[FilesCollection] [FileCursor] [get("+property+")]");if(property){return this._fileRef[property]}return this._fileRef}return get}();FileCursor.prototype.fetch=function(){function fetch(){this._collection._debug("[FilesCollection] [FileCursor] [fetch()]");return[this._fileRef]}return fetch}();FileCursor.prototype.with=function(){function _with(){this._collection._debug("[FilesCollection] [FileCursor] [with()]");return _.extend(this,this._collection.collection.findOne(this._fileRef._id))}return _with}();return FileCursor}();var FilesCursor=function(){function FilesCursor(){var _selector=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var options=arguments[1];var _collection=arguments[2];(0,_classCallCheck3.default)(this,FilesCursor);this._collection=_collection;this._selector=_selector;this._current=-1;this.cursor=this._collection.collection.find(this._selector,options)}FilesCursor.prototype.get=function(){function get(){this._collection._debug("[FilesCollection] [FilesCursor] [get()]");return this.cursor.fetch()}return get}();FilesCursor.prototype.hasNext=function(){function hasNext(){this._collection._debug("[FilesCollection] [FilesCursor] [hasNext()]");return this._current<this.cursor.count()-1}return hasNext}();FilesCursor.prototype.next=function(){function next(){this._collection._debug("[FilesCollection] [FilesCursor] [next()]");this.cursor.fetch()[++this._current]}return next}();FilesCursor.prototype.hasPrevious=function(){function hasPrevious(){this._collection._debug("[FilesCollection] [FilesCursor] [hasPrevious()]");return this._current!==-1}return hasPrevious}();FilesCursor.prototype.previous=function(){function previous(){this._collection._debug("[FilesCollection] [FilesCursor] [previous()]");this.cursor.fetch()[--this._current]}return previous}();FilesCursor.prototype.fetch=function(){function fetch(){this._collection._debug("[FilesCollection] [FilesCursor] [fetch()]");return this.cursor.fetch()||[]}return fetch}();FilesCursor.prototype.first=function(){function first(){this._collection._debug("[FilesCollection] [FilesCursor] [first()]");this._current=0;return this.fetch()[this._current]}return first}();FilesCursor.prototype.last=function(){function last(){this._collection._debug("[FilesCollection] [FilesCursor] [last()]");this._current=this.count()-1;return this.fetch()[this._current]}return last}();FilesCursor.prototype.count=function(){function count(){this._collection._debug("[FilesCollection] [FilesCursor] [count()]");return this.cursor.count()}return count}();FilesCursor.prototype.remove=function(){function remove(callback){this._collection._debug("[FilesCollection] [FilesCursor] [remove()]");this._collection.remove(this._selector,callback);return this}return remove}();FilesCursor.prototype.forEach=function(){function forEach(callback){var context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._collection._debug("[FilesCollection] [FilesCursor] [forEach()]");this.cursor.forEach(callback,context)}return forEach}();FilesCursor.prototype.each=function(){function each(){var _this=this;return this.map(function(file){return new FileCursor(file,_this._collection)})}return each}();FilesCursor.prototype.map=function(){function map(callback){var context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._collection._debug("[FilesCollection] [FilesCursor] [map()]");return this.cursor.map(callback,context)}return map}();FilesCursor.prototype.current=function(){function current(){this._collection._debug("[FilesCollection] [FilesCursor] [current()]");if(this._current<0){this._current=0}return this.fetch()[this._current]}return current}();FilesCursor.prototype.observe=function(){function observe(callbacks){this._collection._debug("[FilesCollection] [FilesCursor] [observe()]");return this.cursor.observe(callbacks)}return observe}();FilesCursor.prototype.observeChanges=function(){function observeChanges(callbacks){this._collection._debug("[FilesCollection] [FilesCursor] [observeChanges()]");return this.cursor.observeChanges(callbacks)}return observeChanges}();return FilesCursor}()},"lib.js":function(require,exports,module){module.export({fixJSONParse:function(){return fixJSONParse},fixJSONStringify:function(){return fixJSONStringify},formatFleURL:function(){return formatFleURL}});var _=void 0;module.watch(require("meteor/underscore"),{_:function(v){_=v}},0);var check=void 0;module.watch(require("meteor/check"),{check:function(v){check=v}},1);var fixJSONParse=function(obj){for(var key in meteorBabelHelpers.sanitizeForInObject(obj)){if(_.isString(obj[key])&&!!~obj[key].indexOf("=--JSON-DATE--=")){obj[key]=obj[key].replace("=--JSON-DATE--=","");obj[key]=new Date(parseInt(obj[key]))}else if(_.isObject(obj[key])){obj[key]=fixJSONParse(obj[key])}else if(_.isArray(obj[key])){var v=void 0;for(var i=0;i<obj[key].length;i++){v=obj[key][i];if(_.isObject(v)){obj[key][i]=fixJSONParse(v)}else if(_.isString(v)&&!!~v.indexOf("=--JSON-DATE--=")){v=v.replace("=--JSON-DATE--=","");obj[key][i]=new Date(parseInt(v))}}}}return obj};var fixJSONStringify=function(obj){for(var key in meteorBabelHelpers.sanitizeForInObject(obj)){if(_.isDate(obj[key])){obj[key]="=--JSON-DATE--="+ +obj[key]}else if(_.isObject(obj[key])){obj[key]=fixJSONStringify(obj[key])}else if(_.isArray(obj[key])){var v=void 0;for(var i=0;i<obj[key].length;i++){v=obj[key][i];if(_.isObject(v)){obj[key][i]=fixJSONStringify(v)}else if(_.isDate(v)){obj[key][i]="=--JSON-DATE--="+ +v}}}}return obj};var formatFleURL=function(fileRef){var version=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"original";var ext=void 0;check(fileRef,Object);check(version,String);var _root=__meteor_runtime_config__.ROOT_URL.replace(/\/+$/,"");var vRef=fileRef.versions&&fileRef.versions[version]||fileRef;if(_.has(vRef,"extension")){ext="."+vRef.extension.replace(/^\./,"")}else{ext=""}if(fileRef.public===true){return _root+(version==="original"?fileRef._downloadRoute+"/"+fileRef._id+ext:fileRef._downloadRoute+"/"+version+"-"+fileRef._id+ext)}return _root+(fileRef._downloadRoute+"/"+fileRef._collectionName+"/"+fileRef._id+"/"+version+"/"+fileRef._id+ext)}},"upload.js":function(require,exports,module){var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.export({UploadInstance:function(){return UploadInstance},FileUpload:function(){return FileUpload}});var _=void 0;module.watch(require("meteor/underscore"),{_:function(v){_=v}},0);var HTTP=void 0;module.watch(require("meteor/http"),{HTTP:function(v){HTTP=v}},1);var Meteor=void 0;module.watch(require("meteor/meteor"),{Meteor:function(v){Meteor=v}},2);var Random=void 0;module.watch(require("meteor/random"),{Random:function(v){Random=v}},3);var Tracker=void 0;module.watch(require("meteor/tracker"),{Tracker:function(v){Tracker=v}},4);var ReactiveVar=void 0;module.watch(require("meteor/reactive-var"),{ReactiveVar:function(v){ReactiveVar=v}},5);var EventEmitter=void 0;module.watch(require("eventemitter3"),{EventEmitter:function(v){EventEmitter=v}},6);var check=void 0,Match=void 0;module.watch(require("meteor/check"),{check:function(v){check=v},Match:function(v){Match=v}},7);var fixJSONParse=void 0,fixJSONStringify=void 0;module.watch(require("./lib.js"),{fixJSONParse:function(v){fixJSONParse=v},fixJSONStringify:function(v){fixJSONStringify=v}},8);var isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var UploadInstance=function(_EventEmitter){(0,_inherits3.default)(UploadInstance,_EventEmitter);function UploadInstance(config,collection){(0,_classCallCheck3.default)(this,UploadInstance);var _this=(0,_possibleConstructorReturn3.default)(this,_EventEmitter.call(this));_this.config=config;_this.collection=collection;_this.collection._debug("[FilesCollection] [insert()]");if(!_this.config.ddp){_this.config.ddp=_this.collection.ddp}if(!_this.config.meta){_this.config.meta={}}if(!_this.config.streams){_this.config.streams=2}if(_this.config.streams<1){_this.config.streams=2}if(!_.isString(_this.config.transport)){_this.config.transport="ddp"}_this.config.transport=_this.config.transport.toLowerCase();if(_this.config.transport!=="ddp"&&_this.config.transport!=="http"){_this.config.transport="ddp"}if(!_this.config.chunkSize){_this.config.chunkSize=_this.collection.chunkSize}if(!_.isBoolean(_this.config.allowWebWorkers)){_this.config.allowWebWorkers=true}check(_this.config,{ddp:Match.Any,file:Match.Any,meta:Match.Optional(Object),type:Match.Optional(String),onError:Match.Optional(Function),onAbort:Match.Optional(Function),streams:Match.OneOf("dynamic",Number),onStart:Match.Optional(Function),fileName:Match.Optional(String),isBase64:Match.Optional(Boolean),transport:Match.OneOf("http","ddp"),chunkSize:Match.OneOf("dynamic",Number),onUploaded:Match.Optional(Function),onProgress:Match.Optional(Function),onBeforeUpload:Match.Optional(Function),allowWebWorkers:Boolean});if(!_this.config.fileName&&!_this.config.file.name){throw new Meteor.Error(400,'"fileName" must me specified for base64 upload!')}if(_this.config.isBase64===true){check(_this.config.file,String);if(!!~_this.config.file.indexOf("data:")){_this.config.file=_this.config.file.replace("data:","")}if(!!~_this.config.file.indexOf(",")){var _file=_this.config.file.split(",");_this.fileData={size:Math.floor(_file[1].replace(/\=/g,"").length/4*3),type:_file[0].split(";")[0],name:_this.config.fileName,meta:_this.config.meta};_this.config.file=_file[1]}else if(!_this.config.type){throw new Meteor.Error(400,'"type" must me specified for base64 upload! And represent mime-type of the file')}else{_this.fileData={size:Math.floor(_this.config.file.replace(/\=/g,"").length/4*3),type:_this.config.type,name:_this.config.fileName,meta:_this.config.meta}}}if(_this.config.file){if(!_this.config.isBase64){_this.fileData={size:_this.config.file.size,type:_this.config.type||_this.config.file.type,name:_this.config.fileName||_this.config.file.name,meta:_this.config.meta}}if(_this.collection.debug){console.time("insert "+_this.fileData.name);console.time("loadFile "+_this.fileData.name)}if(_this.collection._supportWebWorker&&_this.config.allowWebWorkers){try{_this.worker=new Worker(_this.collection._webWorkerUrl)}catch(wwError){_this.worker=false;_this.collection._debug("[FilesCollection] [insert] [create WebWorker]: Can't create WebWorker, fallback to MainThread",wwError)}}else{_this.worker=null}_this.startTime={};_this.config.debug=_this.collection.debug;_this.config._debug=_this.collection._debug;_this.currentChunk=0;_this.transferTime=0;_this.trackerComp=null;_this.sentChunks=0;_this.fileLength=1;_this.EOFsent=false;_this.fileId=Random.id();_this.FSName=_this.collection.namingFunction?_this.collection.namingFunction(_this.fileData):_this.fileId;_this.pipes=[];_this.fileData=_.extend(_this.fileData,_this.collection._getExt(_this.fileData.name),{mime:_this.collection._getMimeType(_this.fileData)});_this.fileData["mime-type"]=_this.fileData.mime;_this.result=new FileUpload(_.extend(_this.config,{fileData:_this.fileData,fileId:_this.fileId,_Abort:_this.collection._methodNames._Abort}));_this.beforeunload=function(e){var message=_.isFunction(_this.collection.onbeforeunloadMessage)?_this.collection.onbeforeunloadMessage.call(_this.result,_this.fileData):_this.collection.onbeforeunloadMessage;if(e){e.returnValue=message}return message};_this.result.config.beforeunload=_this.beforeunload;window.addEventListener("beforeunload",_this.beforeunload,false);_this.result.config._onEnd=function(){return _this.emit("_onEnd")};_this.addListener("end",_this.end);_this.addListener("start",_this.start);_this.addListener("upload",_this.upload);_this.addListener("sendEOF",_this.sendEOF);_this.addListener("prepare",_this.prepare);_this.addListener("sendChunk",_this.sendChunk);_this.addListener("proceedChunk",_this.proceedChunk);_this.addListener("createStreams",_this.createStreams);_this.addListener("calculateStats",_.throttle(function(){var _t=_this.transferTime/_this.sentChunks/_this.config.streams;_this.result.estimateTime.set(_t*(_this.fileLength-_this.sentChunks));_this.result.estimateSpeed.set(_this.config.chunkSize/(_t/1e3));var progress=Math.round(_this.sentChunks/_this.fileLength*100);_this.result.progress.set(progress);_this.config.onProgress&&_this.config.onProgress.call(_this.result,progress,_this.fileData);_this.result.emit("progress",progress,_this.fileData)},250));_this.addListener("_onEnd",function(){if(_this.result.estimateTimer){Meteor.clearInterval(_this.result.estimateTimer)}if(_this.worker){_this.worker.terminate()}if(_this.trackerComp){_this.trackerComp.stop()}if(_this.beforeunload){window.removeEventListener("beforeunload",_this.beforeunload,false)}if(_this.result){return _this.result.progress.set(0)}return void 0})}else{throw new Meteor.Error(500,"[FilesCollection] [insert] Have you forget to pass a File itself?")}return _this}UploadInstance.prototype.end=function(){function end(error,data){this.collection._debug("[FilesCollection] [UploadInstance] [end]",this.fileData.name);if(this.collection.debug){console.timeEnd("insert "+this.fileData.name)}this.emit("_onEnd");this.result.emit("uploaded",error,data);this.config.onUploaded&&this.config.onUploaded.call(this.result,error,data);if(error){this.collection._debug("[FilesCollection] [insert] [end] Error:",error);this.result.abort();this.result.state.set("aborted");this.result.emit("error",error,this.fileData);this.config.onError&&this.config.onError.call(this.result,error,this.fileData)}else{this.result.state.set("completed");this.collection.emit("afterUpload",data)}this.result.emit("end",error,data||this.fileData);return this.result}return end}();UploadInstance.prototype.sendChunk=function(){function sendChunk(evt){var _this2=this;var opts={fileId:this.fileId,binData:evt.data.bin,chunkId:evt.data.chunkId};if(this.config.isBase64){var pad=opts.binData.length%4;if(pad){var p=0;while(p<pad){opts.binData+="=";p++}}}this.emit("data",evt.data.bin);if(this.pipes.length){for(var i=this.pipes.length-1;i>=0;i--){opts.binData=this.pipes[i](opts.binData)}}if(this.fileLength===evt.data.chunkId){if(this.collection.debug){console.timeEnd("loadFile "+this.fileData.name)}this.emit("readEnd")}if(opts.binData){if(this.config.transport==="ddp"){this.config.ddp.call(this.collection._methodNames._Write,opts,function(error){_this2.transferTime+=+new Date-_this2.startTime[opts.chunkId];if(error){if(_this2.result.state.get()!=="aborted"){_this2.emit("end",error)}}else{++_this2.sentChunks;if(_this2.sentChunks>=_this2.fileLength){_this2.emit("sendEOF")}else if(_this2.currentChunk<_this2.fileLength){_this2.emit("upload")}_this2.emit("calculateStats")}})}else{HTTP.call("POST",this.collection.downloadRoute+"/"+this.collection.collectionName+"/__upload",{content:opts.binData,headers:{"x-mtok":(_.isObject(Meteor.connection)?Meteor.connection._lastSessionId:undefined)||null,"x-fileid":opts.fileId,"x-chunkid":opts.chunkId,"content-type":"text/plain"}},function(error){_this2.transferTime+=+new Date-_this2.startTime[opts.chunkId];if(error){if(""+error==="Error: network"){_this2.result.pause()}else{if(_this2.result.state.get()!=="aborted"){_this2.emit("end",error)}}}else{++_this2.sentChunks;if(_this2.sentChunks>=_this2.fileLength){_this2.emit("sendEOF")}else if(_this2.currentChunk<_this2.fileLength){_this2.emit("upload")}_this2.emit("calculateStats")}})}}}return sendChunk}();UploadInstance.prototype.sendEOF=function(){function sendEOF(){var _this3=this;this.collection._debug("[FilesCollection] [UploadInstance] [sendEOF]",this.EOFsent);if(!this.EOFsent){this.EOFsent=true;var opts={eof:true,fileId:this.fileId};if(this.config.transport==="ddp"){this.config.ddp.call(this.collection._methodNames._Write,opts,function(error,result){_this3.emit("end",error,result)})}else{HTTP.call("POST",this.collection.downloadRoute+"/"+this.collection.collectionName+"/__upload",{content:"",headers:{"x-eof":"1","x-mtok":(_.isObject(Meteor.connection)?Meteor.connection._lastSessionId:undefined)||null,"x-fileId":opts.fileId,"content-type":"text/plain"}},function(error,_result){var result=void 0;try{result=JSON.parse((_.isObject(_result)?_result.content:undefined)||{})}catch(e){console.warn("Something went wrong! [sendEOF] method doesn't returned JSON! Looks like you're on Cordova app or behind proxy, switching to DDP transport is recommended.");result={}}if(result.meta){result.meta=fixJSONParse(result.meta)}_this3.emit("end",error,result)})}}}return sendEOF}();UploadInstance.prototype.proceedChunk=function(){function proceedChunk(chunkId){var _this4=this;var chunk=this.config.file.slice(this.config.chunkSize*(chunkId-1),this.config.chunkSize*chunkId);if(this.config.isBase64){this.emit("sendChunk",{data:{bin:chunk,chunkId:chunkId}})}else{var fileReader=void 0;if(FileReader){fileReader=new FileReader;fileReader.onloadend=function(evt){_this4.emit("sendChunk",{data:{bin:((_.isObject(fileReader)?fileReader.result:undefined)||(evt.srcElement?evt.srcElement.result:undefined)||(evt.target?evt.target.result:undefined)).split(",")[1],chunkId:chunkId}})};fileReader.onerror=function(e){_this4.emit("end",(e.target||e.srcElement).error)};fileReader.readAsDataURL(chunk)}else if(FileReaderSync){fileReader=new FileReaderSync;this.emit("sendChunk",{data:{bin:fileReader.readAsDataURL(chunk).split(",")[1],chunkId:chunkId}})}else{this.emit("end","File API is not supported in this Browser!")}}}return proceedChunk}();UploadInstance.prototype.upload=function(){function upload(){if(this.result.onPause.get()){return this}if(this.result.state.get()==="aborted"){return this}if(this.currentChunk<=this.fileLength){++this.currentChunk;if(this.worker){this.worker.postMessage({f:this.config.file,sc:this.sentChunks,cc:this.currentChunk,cs:this.config.chunkSize,ib:this.config.isBase64})}else{this.emit("proceedChunk",this.currentChunk)}}else{this.emit("sendEOF")}this.startTime[this.currentChunk]=+new Date;return this}return upload}();UploadInstance.prototype.createStreams=function(){function createStreams(){this.collection._debug("[FilesCollection] [UploadInstance] [createStreams]");var i=1;while(i<=this.config.streams){this.emit("upload");i++}}return createStreams}();UploadInstance.prototype.prepare=function(){function prepare(){var _this5=this;var _len=void 0;this.config.onStart&&this.config.onStart.call(this.result,null,this.fileData);this.result.emit("start",null,this.fileData);if(this.config.chunkSize==="dynamic"){this.config.chunkSize=this.fileData.size/1e3;if(this.config.chunkSize<327680){this.config.chunkSize=327680}else if(this.config.chunkSize>1048576){this.config.chunkSize=1048576}if(this.config.transport==="http"){this.config.chunkSize=Math.round(this.config.chunkSize/2)}else if(isSafari){this.config.chunkSize=Math.ceil(this.config.chunkSize/8)}}if(this.config.isBase64){this.config.chunkSize=Math.floor(this.config.chunkSize/4)*4;_len=Math.ceil(this.config.file.length/this.config.chunkSize)}else{this.config.chunkSize=Math.floor(this.config.chunkSize/8)*8;_len=Math.ceil(this.fileData.size/this.config.chunkSize)}if(this.config.streams==="dynamic"){this.config.streams=_.clone(_len);if(this.config.streams>24){this.config.streams=24}if(this.config.transport==="http"){this.config.streams=Math.round(this.config.streams/2)}else if(isSafari){this.config.streams=1}}this.fileLength=_len<=0?1:_len;if(this.config.streams>this.fileLength){this.config.streams=this.fileLength}this.result.config.fileLength=this.fileLength;var opts={file:this.fileData,fileId:this.fileId,chunkSize:this.config.isBase64?this.config.chunkSize/4*3:this.config.chunkSize,fileLength:this.fileLength};if(this.FSName!==this.fileId){opts.FSName=this.FSName}var handleStart=function(error){if(error){_this5.collection._debug("[FilesCollection] [_Start] Error:",error);_this5.emit("end",error)}else{_this5.result.continueFunc=function(){_this5.collection._debug("[FilesCollection] [insert] [continueFunc]");_this5.emit("createStreams")};_this5.emit("createStreams")}};if(this.config.transport==="ddp"){this.config.ddp.call(this.collection._methodNames._Start,opts,handleStart)}else{if(_.isObject(opts.file)?opts.file.meta:undefined){opts.file.meta=fixJSONStringify(opts.file.meta)}HTTP.call("POST",this.collection.downloadRoute+"/"+this.collection.collectionName+"/__upload",{data:opts,headers:{"x-start":"1","x-mtok":(_.isObject(Meteor.connection)?Meteor.connection._lastSessionId:undefined)||null}},handleStart)}}return prepare}();UploadInstance.prototype.pipe=function(){function pipe(func){this.pipes.push(func);return this}return pipe}();UploadInstance.prototype.start=function(){function start(){var _this6=this;var isUploadAllowed=void 0;if(this.fileData.size<=0){this.end(new Meteor.Error(400,"Can't upload empty file"));return this.result}if(this.config.onBeforeUpload&&_.isFunction(this.config.onBeforeUpload)){isUploadAllowed=this.config.onBeforeUpload.call(_.extend(this.result,this.collection._getUser()),this.fileData);if(isUploadAllowed!==true){return this.end(new Meteor.Error(403,_.isString(isUploadAllowed)?isUploadAllowed:"config.onBeforeUpload() returned false"))}}if(this.collection.onBeforeUpload&&_.isFunction(this.collection.onBeforeUpload)){isUploadAllowed=this.collection.onBeforeUpload.call(_.extend(this.result,this.collection._getUser()),this.fileData);if(isUploadAllowed!==true){return this.end(new Meteor.Error(403,_.isString(isUploadAllowed)?isUploadAllowed:"collection.onBeforeUpload() returned false"))}}Tracker.autorun(function(computation){_this6.trackerComp=computation;if(!_this6.result.onPause.curValue&&!Meteor.status().connected){_this6.collection._debug("[FilesCollection] [insert] [Tracker] [pause]");_this6.result.pause()}});if(this.worker){this.collection._debug("[FilesCollection] [insert] using WebWorkers");this.worker.onmessage=function(evt){if(evt.data.error){_this6.collection._debug("[FilesCollection] [insert] [worker] [onmessage] [ERROR:]",evt.data.error);_this6.emit("proceedChunk",evt.data.chunkId)}else{_this6.emit("sendChunk",evt)}};this.worker.onerror=function(e){_this6.collection._debug("[FilesCollection] [insert] [worker] [onerror] [ERROR:]",e);_this6.emit("end",e.message)}}else{this.collection._debug("[FilesCollection] [insert] using MainThread")}this.emit("prepare");return this.result}return start}();UploadInstance.prototype.manual=function(){function manual(){var _this7=this;this.result.start=function(){_this7.emit("start")};this.result.pipe=function(func){self.pipe(func);return this};return this.result}return manual}();return UploadInstance}(EventEmitter);var FileUpload=function(_EventEmitter2){(0,_inherits3.default)(FileUpload,_EventEmitter2);function FileUpload(config){(0,_classCallCheck3.default)(this,FileUpload);var _this8=(0,_possibleConstructorReturn3.default)(this,_EventEmitter2.call(this));_this8.config=config;_this8.config._debug("[FilesCollection] [FileUpload] [constructor]");if(!_this8.config.isBase64){_this8.file=_.extend(_this8.config.file,_this8.config.fileData)}else{_this8.file=_this8.config.fileData}_this8.state=new ReactiveVar("active");_this8.onPause=new ReactiveVar(false);_this8.progress=new ReactiveVar(0);_this8.continueFunc=function(){};_this8.estimateTime=new ReactiveVar(1e3);_this8.estimateSpeed=new ReactiveVar(0);_this8.estimateTimer=Meteor.setInterval(function(){if(_this8.state.get()==="active"){var _currentTime=_this8.estimateTime.get();if(_currentTime>1e3){_this8.estimateTime.set(_currentTime-1e3)}}},1e3);return _this8}FileUpload.prototype.pause=function(){function pause(){this.config._debug("[FilesCollection] [insert] [.pause()]");if(!this.onPause.get()){this.onPause.set(true);this.state.set("paused");this.emit("pause",this.file)}}return pause}();FileUpload.prototype.continue=function(){function _continue(){this.config._debug("[FilesCollection] [insert] [.continue()]");if(this.onPause.get()){this.onPause.set(false);this.state.set("active");this.emit("continue",this.file);this.continueFunc()}}return _continue}();FileUpload.prototype.toggle=function(){function toggle(){this.config._debug("[FilesCollection] [insert] [.toggle()]");if(this.onPause.get()){this.continue()}else{this.pause()}}return toggle}();FileUpload.prototype.abort=function(){function abort(){this.config._debug("[FilesCollection] [insert] [.abort()]");window.removeEventListener("beforeunload",this.config.beforeunload,false);this.config.onAbort&&this.config.onAbort.call(this,this.file);this.emit("abort",this.file);this.pause();this.config._onEnd();this.state.set("aborted");if(this.config.debug){console.timeEnd("insert "+this.config.fileData.name)}this.config.ddp.call(this.config._Abort,this.config.fileId)}return abort}();return FileUpload}(EventEmitter)},node_modules:{eventemitter3:{"package.json":function(require,exports){exports.name="eventemitter3";exports.version="2.0.3";exports.main="index.js"},"index.js":function(require,exports,module){"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}if(Object.create){Events.prototype=Object.create(null);if(!(new Events).__proto__)prefix=false}function EE(fn,context,once){this.fn=fn;this.context=context;this.once=once||false}function EventEmitter(){this._events=new Events;this._eventsCount=0}EventEmitter.prototype.eventNames=function eventNames(){var names=[],events,name;if(this._eventsCount===0)return names;for(name in events=this._events){if(has.call(events,name))names.push(prefix?name.slice(1):name)}if(Object.getOwnPropertySymbols){return names.concat(Object.getOwnPropertySymbols(events))}return names};EventEmitter.prototype.listeners=function listeners(event,exists){var evt=prefix?prefix+event:event,available=this._events[evt];if(exists)return!!available;if(!available)return[];if(available.fn)return[available.fn];for(var i=0,l=available.length,ee=new Array(l);i<l;i++){ee[i]=available[i].fn}return ee};EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return false;var listeners=this._events[evt],len=arguments.length,args,i;if(listeners.fn){if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);switch(len){case 1:return listeners.fn.call(listeners.context),true;case 2:return listeners.fn.call(listeners.context,a1),true;case 3:return listeners.fn.call(listeners.context,a1,a2),true;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true}for(i=1,args=new Array(len-1);i<len;i++){args[i-1]=arguments[i]}listeners.fn.apply(listeners.context,args)}else{var length=listeners.length,j;for(i=0;i<length;i++){if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);switch(len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++){args[j-1]=arguments[j]}listeners[i].fn.apply(listeners[i].context,args)}}}return true};EventEmitter.prototype.on=function on(event,fn,context){var listener=new EE(fn,context||this),evt=prefix?prefix+event:event;if(!this._events[evt])this._events[evt]=listener,this._eventsCount++;else if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener];return this};EventEmitter.prototype.once=function once(event,fn,context){var listener=new EE(fn,context||this,true),evt=prefix?prefix+event:event;if(!this._events[evt])this._events[evt]=listener,this._eventsCount++;else if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener];return this};EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn){if(--this._eventsCount===0)this._events=new Events;else delete this._events[evt];return this}var listeners=this._events[evt];if(listeners.fn){if(listeners.fn===fn&&(!once||listeners.once)&&(!context||listeners.context===context)){if(--this._eventsCount===0)this._events=new Events;else delete this._events[evt]}}else{for(var i=0,events=[],length=listeners.length;i<length;i++){if(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context){events.push(listeners[i])}}if(events.length)this._events[evt]=events.length===1?events[0]:events;else if(--this._eventsCount===0)this._events=new Events;else delete this._events[evt]}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;if(event){evt=prefix?prefix+event:event;if(this._events[evt]){if(--this._eventsCount===0)this._events=new Events;else delete this._events[evt]}}else{this._events=new Events;this._eventsCount=0}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.setMaxListeners=function setMaxListeners(){return this};EventEmitter.prefixed=prefix;EventEmitter.EventEmitter=EventEmitter;if("undefined"!==typeof module){module.exports=EventEmitter}}}}}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/ostrio:files/client.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["ostrio:files"]=exports,{FilesCollection:FilesCollection})})();Symbol=Package["ecmascript-runtime-client"].Symbol;Map=Package["ecmascript-runtime-client"].Map;Set=Package["ecmascript-runtime-client"].Set;Accounts=Package["accounts-base"].Accounts;DDP=Package["ddp-client"].DDP;Meteor=Package.meteor.Meteor;global=Package.meteor.global;meteorEnv=Package.meteor.meteorEnv;Mongo=Package.mongo.Mongo;FilesCollection=Package["ostrio:files"].FilesCollection;Tracker=Package.tracker.Tracker;Deps=Package.tracker.Deps;_=Package.underscore._;ReactiveVar=Package["reactive-var"].ReactiveVar;meteorInstall=Package.modules.meteorInstall;meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;Promise=Package.promise.Promise;(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var Accounts=Package["accounts-base"].Accounts;var Mongo=Package.mongo.Mongo;var ServiceConfiguration;(function(){if(typeof ServiceConfiguration==="undefined"){ServiceConfiguration={}}ServiceConfiguration.configurations=new Mongo.Collection("meteor_accounts_loginServiceConfiguration",{_preventAutopublish:true,connection:Meteor.isClient?Accounts.connection:Meteor.connection});ServiceConfiguration.ConfigError=function(serviceName){if(Meteor.isClient&&!Accounts.loginServicesConfigured()){this.message="Login service configuration not yet loaded"}else if(serviceName){this.message="Service "+serviceName+" not configured"}else{this.message="Service not configured"}};ServiceConfiguration.ConfigError.prototype=new Error;ServiceConfiguration.ConfigError.prototype.name="ServiceConfiguration.ConfigError"}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["service-configuration"]={},{ServiceConfiguration:ServiceConfiguration})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var EV;(function(){(function(){function _EV(){var self=this;var handlers={};self.emit=function emit(event){var args=Array.prototype.slice.call(arguments,1);if(handlers[event]){for(var lc=0;lc<handlers[event].length;lc++){var handler=handlers[event][lc];handler.apply(this,args)}}};self.on=function on(event,callback){if(!handlers[event]){handlers[event]=[]}handlers[event].push(callback)};self.once=function once(event,callback){self.on(event,function onetimeCallback(){callback.apply(this,arguments);self.removeListener(event,onetimeCallback)})};self.removeListener=function removeListener(event,callback){if(handlers[event]){var index=handlers[event].indexOf(callback);handlers[event].splice(index,1)}};self.removeAllListeners=function removeAllListeners(event){handlers[event]=undefined}}EV=_EV}).call(this);(function(){Meteor.Stream=function Stream(name,callback){EV.call(this);var self=this;var streamName="stream-"+name;var collection=new Meteor.Collection(streamName);var subscription;var subscriptionId;var connected=false;var pendingEvents=[];self._emit=self.emit;collection.find({}).observe({added:function(item){if(item.type=="subscriptionId"){subscriptionId=item._id;connected=true;pendingEvents.forEach(function(args){self.emit.apply(self,args)});pendingEvents=[]}else{var context={};context.subscriptionId=item.subscriptionId;context.userId=item.userId;self._emit.apply(context,item.args)}}});subscription=Meteor.subscribe(streamName,callback);self.emit=function emit(){if(connected){Meteor.call(streamName,subscriptionId,arguments)}else{pendingEvents.push(arguments)}};self.close=function close(){subscription.stop()}};_.extend(Meteor.Stream.prototype,EV.prototype)}).call(this)}).call(this);if(typeof Package==="undefined")Package={};Package["arunoda:streams"]={}})();